{"version":3,"file":"AnchorTarget.js","sources":["../../../components/anchor/AnchorTarget.tsx"],"sourcesContent":["import React, { FunctionComponent } from 'react';\nimport classNames from 'classnames';\nimport { FileCopyIcon as TdFileCopyIcon } from 'tdesign-icons-react';\nimport Popup from '../popup';\nimport { MessagePlugin } from '../message';\nimport useConfig from '../hooks/useConfig';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport copyText from '../_util/copyText';\n\nimport { TdAnchorTargetProps } from './type';\nimport { StyledProps } from '../common';\nimport { anchorTargetDefaultProps } from './defaultProps';\nimport useDefaultProps from '../hooks/useDefaultProps';\n\nexport interface AnchorTargetProps extends TdAnchorTargetProps, StyledProps {\n  children?: React.ReactNode;\n}\n\nconst AnchorTarget: FunctionComponent<AnchorTargetProps> = (props) => {\n  const { classPrefix } = useConfig();\n  const { FileCopyIcon } = useGlobalIcon({ FileCopyIcon: TdFileCopyIcon });\n\n  const { id, tag, children, className, style } = useDefaultProps(props, anchorTargetDefaultProps);\n\n  const tagClassName = classNames(`${classPrefix}-anchor__target`, className);\n  const iconClassName = `${classPrefix}-anchor__copy`;\n\n  const handleCopyText = () => {\n    const a = document.createElement('a');\n    a.href = `#${id}`;\n    copyText(a.href);\n    MessagePlugin.success('链接复制成功', 1000);\n  };\n\n  const Content = () => (\n    <>\n      {children}\n      <Popup content=\"复制链接\" placement=\"top\" showArrow>\n        <FileCopyIcon className={iconClassName} onClick={handleCopyText} />\n      </Popup>\n    </>\n  );\n\n  return React.createElement(tag, { id, className: tagClassName, style }, React.createElement(Content));\n};\n\nAnchorTarget.displayName = 'AnchorTarget';\n\nexport default AnchorTarget;\n"],"names":["AnchorTarget","props","_useConfig","useConfig","classPrefix","_useGlobalIcon","useGlobalIcon","FileCopyIcon","TdFileCopyIcon","_useDefaultProps","useDefaultProps","anchorTargetDefaultProps","id","tag","children","className","style","tagClassName","classNames","concat","iconClassName","handleCopyText","a","document","createElement","href","copyText","MessagePlugin","success","Content","React","Fragment","Popup","content","placement","showArrow","onClick","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkBA,IAAMA,YAAA,GAAqD,SAArDA,YAAAA,CAAsDC,KAAU,EAAA;AAC9D,EAAA,IAAAC,UAAA,GAAkBC,SAAU,EAAA;IAA1BC,WAAY,GAAAF,UAAA,CAAZE,WAAY,CAAA;EACpB,IAAAC,cAAA,GAAyBC,cAAc;AAAEC,MAAAA,YAAA,EAAcC,YAAAA;AAAe,KAAC,CAAA;IAA/DD,cAAa,GAAAF,cAAA,CAAbE,YAAa,CAAA;AAEf,EAAA,IAAAE,gBAAA,GAA0CC,eAAgB,CAAAT,KAAA,EAAOU,wBAAwB,CAAA;IAAvFC,sBAAAA;IAAIC,GAAK,GAAAJ,gBAAA,CAALI,GAAK;IAAAC,QAAA,GAAAL,gBAAA,CAAAK,QAAA;IAAUC,6BAAAA;IAAWC,KAAM,GAAAP,gBAAA,CAANO,KAAM,CAAA;EAE5C,IAAMC,YAAe,GAAAC,UAAA,CAAA,EAAA,CAAAC,MAAA,CAAcf,WAAA,EAA8BW,iBAAAA,CAAAA,EAAAA,SAAS,CAAA,CAAA;AAC1E,EAAA,IAAMK,0BAAmBhB,WAAA,EAAA,eAAA,CAAA,CAAA;AAEzB,EAAA,IAAMiB,iBAAiB,SAAjBA,iBAAuB;AACrB,IAAA,IAAAC,CAAA,GAAIC,QAAS,CAAAC,aAAA,CAAc,GAAG,CAAA,CAAA;AACpCF,IAAAA,CAAA,CAAEG,kBAAWb,EAAA,CAAA,CAAA;AACbc,IAAAA,QAAA,CAASJ,EAAEG,IAAI,CAAA,CAAA;AACDE,IAAAA,aAAA,CAAAC,OAAA,CAAQ,wCAAU,GAAI,CAAA,CAAA;GACtC,CAAA;AAEA,EAAA,IAAMC,OAAU,GAAA,SAAVA,OAAUA,GAAA;AAAA,IAAA,sBAEXC,KAAA,CAAAN,aAAA,CAAAM,KAAA,CAAAC,QAAA,EAAA,IAAA,EAAAjB,QAAA,iBACAgB,KAAA,CAAAN,aAAA,CAAAQ,KAAA,EAAA;AAAMC,MAAAA,OAAQ,EAAA,0BAAA;AAAOC,MAAAA,SAAU,EAAA,KAAA;AAAMC,MAAAA,SAAS,EAAA,IAAA;AAAA,KAAA,iBAC5CL,KAAA,CAAAN,aAAA,CAAAjB,cAAA,EAAA;AAAaQ,MAAAA,SAAW,EAAAK,aAAA;AAAegB,MAAAA,OAAS,EAAAf,cAAAA;KAAgB,CACnE,CACF,CAAA,CAAA;AAAA,GAAA,CAAA;AAGF,EAAA,oBAAOS,KAAM,CAAAN,aAAA,CAAcX,GAAK,EAAA;AAAED,IAAAA,EAAI,EAAJA,EAAI;AAAAG,IAAAA,SAAA,EAAWE,YAAc;AAAAD,IAAAA,KAAA,EAAAA,KAAAA;AAAM,GAAG,eAAAc,KAAA,CAAMN,aAAc,CAAAK,OAAO,CAAC,CAAA,CAAA;AACtG,EAAA;AAEA7B,YAAA,CAAaqC,WAAc,GAAA,cAAA;;;;"}