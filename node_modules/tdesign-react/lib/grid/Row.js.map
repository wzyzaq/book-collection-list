{"version":3,"file":"Row.js","sources":["../../../components/grid/Row.tsx"],"sourcesContent":["import React, { useEffect, useState, forwardRef, createContext } from 'react';\nimport classNames from 'classnames';\nimport { isObject } from 'lodash-es';\nimport useConfig from '../hooks/useConfig';\nimport { StyledProps } from '../common';\nimport { TdRowProps } from './type';\nimport { canUseDocument, getCssVarsValue } from '../_util/dom';\nimport { rowDefaultProps } from './defaultProps';\nimport useDefaultProps from '../hooks/useDefaultProps';\n\n/**\n * Row 组件支持的属性。\n */\nexport interface RowProps extends TdRowProps, StyledProps {\n  /**\n   * 默认子元素内容\n   */\n  children: React.ReactNode;\n}\n\nconst calcSize = (width: number) => {\n  const smWidth = parseFloat(getCssVarsValue('--td-screen-sm') || '768');\n  const mdWidth = parseFloat(getCssVarsValue('--td-screen-md') || '992');\n  const lgWidth = parseFloat(getCssVarsValue('--td-screen-lg') || '1200');\n  const xlWidth = parseFloat(getCssVarsValue('--td-screen-xl') || '1400');\n  const xxlWidth = parseFloat(getCssVarsValue('--td-screen-xxl') || '1880');\n\n  let size = 'xs';\n  if (width >= xxlWidth) {\n    size = 'xxl';\n  } else if (width >= xlWidth) {\n    size = 'xl';\n  } else if (width >= lgWidth) {\n    size = 'lg';\n  } else if (width >= mdWidth) {\n    size = 'md';\n  } else if (width >= smWidth) {\n    size = 'sm';\n  } else {\n    size = 'xs';\n  }\n\n  return size;\n};\n\nconst calcRowStyle = (gutter: TdRowProps['gutter'], currentSize: string): object => {\n  const rowStyle = {};\n  if (typeof gutter === 'number') {\n    Object.assign(rowStyle, {\n      marginLeft: `${gutter / -2}px`,\n      marginRight: `${gutter / -2}px`,\n    });\n  } else if (Array.isArray(gutter) && gutter.length) {\n    if (typeof gutter[0] === 'number') {\n      Object.assign(rowStyle, {\n        marginLeft: `${gutter[0] / -2}px`,\n        marginRight: `${gutter[0] / -2}px`,\n      });\n    }\n    if (typeof gutter[1] === 'number') {\n      Object.assign(rowStyle, { rowGap: `${gutter[1]}px` });\n    }\n\n    if (isObject(gutter[0]) && gutter[0][currentSize] !== undefined) {\n      Object.assign(rowStyle, {\n        marginLeft: `${gutter[0][currentSize] / -2}px`,\n        marginRight: `${gutter[0][currentSize] / -2}px`,\n      });\n    }\n    if (isObject(gutter[1]) && gutter[1][currentSize] !== undefined) {\n      Object.assign(rowStyle, { rowGap: `${gutter[1][currentSize]}px` });\n    }\n  } else if (isObject(gutter) && gutter[currentSize]) {\n    if (Array.isArray(gutter[currentSize]) && gutter[currentSize].length) {\n      Object.assign(rowStyle, {\n        marginLeft: `${gutter[currentSize][0] / -2}px`,\n        marginRight: `${gutter[currentSize][0] / -2}px`,\n      });\n      Object.assign(rowStyle, { rowGap: `${gutter[currentSize][1]}px` });\n    } else {\n      Object.assign(rowStyle, {\n        marginLeft: `${gutter[currentSize] / -2}px`,\n        marginRight: `${gutter[currentSize] / -2}px`,\n      });\n    }\n  }\n  return rowStyle;\n};\n\nexport const RowContext = createContext({ gutter: undefined, size: undefined });\n\nconst Row = forwardRef<HTMLElement, RowProps>((props, ref) => {\n  const {\n    align,\n    gutter,\n    justify,\n    tag,\n    style: propStyle,\n    className,\n    children,\n    ...otherRowProps\n  } = useDefaultProps<RowProps>(props, rowDefaultProps);\n\n  const [size, setSize] = useState(() => (canUseDocument ? calcSize(window.innerWidth) : 'md'));\n\n  const updateSize = () => {\n    const currentSize = calcSize(window.innerWidth);\n    if (currentSize !== size) {\n      setSize(size);\n    }\n  };\n\n  const { classPrefix } = useConfig();\n  const rowClassNames = classNames(`${classPrefix}-row`, className, {\n    [`${classPrefix}-row--${justify}`]: true,\n    [`${classPrefix}-row--${align}`]: true,\n  });\n  const rowStyle = {\n    ...calcRowStyle(gutter, size),\n    ...propStyle,\n  };\n\n  useEffect(() => {\n    window.addEventListener('resize', updateSize);\n    return () => {\n      window.removeEventListener('resize', updateSize);\n    };\n  });\n\n  return React.createElement(\n    tag,\n    {\n      ref,\n      className: rowClassNames,\n      style: rowStyle,\n      ...otherRowProps,\n    },\n    <RowContext.Provider value={{ gutter, size }}>{children}</RowContext.Provider>,\n  );\n});\n\nRow.displayName = 'Row';\n\nexport default Row;\n"],"names":["calcSize","width","smWidth","parseFloat","getCssVarsValue","mdWidth","lgWidth","xlWidth","xxlWidth","size","calcRowStyle","gutter","currentSize","rowStyle","Object","assign","marginLeft","concat","marginRight","Array","isArray","length","rowGap","isObject","RowContext","createContext","Row","forwardRef","props","ref","_useDefaultProps","useDefaultProps","rowDefaultProps","align","justify","tag","propStyle","style","className","children","otherRowProps","_objectWithoutProperties","_excluded","_useState","useState","canUseDocument","window","innerWidth","_useState2","_slicedToArray","setSize","updateSize","_useConfig","useConfig","classPrefix","rowClassNames","classNames","_defineProperty","_objectSpread","useEffect","addEventListener","removeEventListener","React","createElement","Provider","value","displayName"],"mappings":"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"}