{"version":3,"file":"Card.js","sources":["../../../components/card/Card.tsx"],"sourcesContent":["import React, { forwardRef } from 'react';\nimport classNames from 'classnames';\nimport { TdCardProps } from './type';\nimport Loading from '../loading';\nimport { StyledProps } from '../common';\nimport useConfig from '../hooks/useConfig';\nimport useCommonClassName from '../hooks/useCommonClassName';\nimport { cardDefaultProps } from './defaultProps';\nimport useDefaultProps from '../hooks/useDefaultProps';\n\nexport interface CardProps extends TdCardProps, StyledProps {}\n\nconst Card = forwardRef<HTMLDivElement, CardProps>((props, ref) => {\n  const {\n    actions,\n    avatar,\n    bordered,\n    children,\n    className,\n    cover,\n    description,\n    footer,\n    header,\n    headerBordered,\n    hoverShadow,\n    loading,\n    shadow,\n    size,\n    style,\n    subtitle,\n    title,\n    theme,\n    status,\n    loadingProps,\n  } = useDefaultProps<CardProps>(props, cardDefaultProps);\n\n  const { classPrefix } = useConfig();\n  const commonClassNames = useCommonClassName();\n  // 是否为海报风格2\n  const isPoster2 = theme === 'poster2';\n\n  const cardClass = classNames(`${classPrefix}-card`, className, {\n    [commonClassNames.SIZE.small]: size === 'small',\n    [`${classPrefix}-card--bordered`]: bordered,\n    [`${classPrefix}-card--shadow`]: shadow,\n    [`${classPrefix}-card--shadow-hover`]: hoverShadow,\n  });\n\n  const showHeader =\n    header || title || subtitle || description || avatar || (actions && !isPoster2) || (status && isPoster2);\n\n  const headerClass = classNames({\n    [`${classPrefix}-card__header`]: showHeader,\n    [`${classPrefix}-card__title--bordered`]: headerBordered,\n  });\n\n  const titleClass = classNames({\n    [`${classPrefix}-card__title`]: title,\n  });\n\n  const subtitleClass = classNames({\n    [`${classPrefix}-card__subtitle`]: subtitle,\n  });\n\n  const actionClass = classNames({\n    [`${classPrefix}-card__actions`]: actions,\n  });\n\n  const footerClass = classNames({\n    [`${classPrefix}-card__footer`]: footer,\n  });\n\n  const coverClass = classNames({\n    [`${classPrefix}-card__cover`]: cover,\n  });\n\n  const avatarClass = classNames({\n    [`${classPrefix}-card__avatar`]: avatar,\n  });\n\n  const bodyClass = classNames({\n    [`${classPrefix}-card__body`]: children,\n  });\n\n  const descriptionClass = classNames({\n    [`${classPrefix}-card__description`]: description,\n  });\n\n  const renderTitle = title ? <div className={titleClass}>{title}</div> : null;\n\n  const renderSubtitle = subtitle ? <div className={subtitleClass}>{subtitle}</div> : null;\n\n  const renderDescription = description ? <p className={descriptionClass}>{description}</p> : null;\n\n  const renderAvatar = avatar && <div className={avatarClass}>{avatar}</div>;\n\n  const renderHeaderActions = actions && !isPoster2 && <div className={actionClass}>{actions}</div>;\n  const renderFooterActions = actions && isPoster2 && <div className={actionClass}>{actions}</div>;\n\n  const renderStatus = status && isPoster2 && <div className={actionClass}>{status}</div>;\n\n  const renderHeader = () => {\n    if (header) {\n      return <div className={headerClass}>{header}</div>;\n    }\n    return (\n      <div className={headerClass}>\n        <div className={`${classPrefix}-card__header-wrapper`}>\n          {renderAvatar}\n          <div>\n            {renderTitle}\n            {renderSubtitle}\n            {renderDescription}\n          </div>\n        </div>\n        {renderHeaderActions}\n        {renderStatus}\n      </div>\n    );\n  };\n\n  const renderCover = cover ? (\n    <div className={coverClass}>{typeof cover === 'string' ? <img src={cover} alt=\"\"></img> : cover}</div>\n  ) : null;\n\n  const renderChildren = children && <div className={bodyClass}>{children}</div>;\n\n  const renderFooter = footer && (\n    <div className={footerClass}>\n      <div className={`${classPrefix}-card__footer-wrapper`}>{footer}</div>\n      {renderFooterActions}\n    </div>\n  );\n\n  const card = (\n    <>\n      {showHeader ? renderHeader() : null}\n      {renderCover}\n      {renderChildren}\n      {renderFooter}\n    </>\n  );\n\n  let childrenNode: React.ReactNode = null;\n  if (!Reflect.has(props, 'loading')) {\n    childrenNode = card;\n  } else if (React.isValidElement(loading)) {\n    childrenNode = React.cloneElement(loading, null, card);\n  } else {\n    childrenNode = (\n      <Loading {...loadingProps} loading={!!loading}>\n        {card}\n      </Loading>\n    );\n  }\n\n  return (\n    <div ref={ref} className={cardClass} style={style}>\n      {childrenNode}\n    </div>\n  );\n});\n\nCard.displayName = 'Card';\n\nexport default Card;\n"],"names":["Card","forwardRef","props","ref","_useDefaultProps","useDefaultProps","cardDefaultProps","actions","avatar","bordered","children","className","cover","description","footer","header","headerBordered","hoverShadow","loading","shadow","size","style","subtitle","title","theme","status","loadingProps","_useConfig","useConfig","classPrefix","commonClassNames","useCommonClassName","isPoster2","cardClass","classNames","concat","_defineProperty","SIZE","small","showHeader","headerClass","titleClass","subtitleClass","actionClass","footerClass","coverClass","avatarClass","bodyClass","descriptionClass","renderTitle","React","createElement","renderSubtitle","renderDescription","renderAvatar","renderHeaderActions","renderFooterActions","renderStatus","renderHeader","renderCover","src","alt","renderChildren","renderFooter","card","childrenNode","Reflect","has","isValidElement","cloneElement","Loading","_objectSpread","displayName"],"mappings":"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"}