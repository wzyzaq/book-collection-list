{"version":3,"file":"useDialogPosition.js","sources":["../../../../components/dialog/hooks/useDialogPosition.ts"],"sourcesContent":["import { MutableRefObject, useEffect, useRef } from 'react';\nimport useIsomorphicLayoutEffect from '../../hooks/useLayoutEffect';\n\nexport default function useDialogPosition(visible: boolean, dialogCardRef: MutableRefObject<HTMLElement>) {\n  const mousePosRef = useRef(null);\n\n  const getClickPosition = (e: MouseEvent) => {\n    mousePosRef.current = {\n      x: e.clientX,\n      y: e.clientY,\n    };\n    setTimeout(() => {\n      mousePosRef.current = null;\n    }, 100);\n  };\n\n  useIsomorphicLayoutEffect(() => {\n    document.addEventListener('click', getClickPosition, true);\n    return () => {\n      document.removeEventListener('click', getClickPosition, true);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!visible) return;\n    // 动画渲染初始位置\n    if (mousePosRef.current && dialogCardRef.current) {\n      // eslint-disable-next-line\n      dialogCardRef.current.style.transformOrigin = `${mousePosRef.current.x - dialogCardRef.current.offsetLeft}px ${\n        mousePosRef.current.y - dialogCardRef.current.offsetTop\n      }px`;\n    }\n  }, [visible, dialogCardRef]);\n}\n"],"names":["useDialogPosition","visible","dialogCardRef","mousePosRef","useRef","getClickPosition","e","current","x","clientX","y","clientY","setTimeout","useIsomorphicLayoutEffect","document","addEventListener","removeEventListener","useEffect","style","transformOrigin","concat","offsetLeft","offsetTop"],"mappings":";;;;;;;;;;;;;AAGwB,SAAAA,iBAAAA,CAAkBC,SAAkBC,aAA8C,EAAA;AAClG,EAAA,IAAAC,WAAA,GAAcC,OAAO,IAAI,CAAA,CAAA;AAEzB,EAAA,IAAAC,gBAAA,GAAmB,SAAnBA,gBAAAA,CAAoBC,CAAkB,EAAA;IAC1CH,WAAA,CAAYI,OAAU,GAAA;MACpBC,GAAGF,CAAE,CAAAG,OAAA;MACLC,GAAGJ,CAAE,CAAAK,OAAAA;KACP,CAAA;AACAC,IAAAA,UAAA,CAAW,YAAM;MACfT,WAAA,CAAYI,OAAU,GAAA,IAAA,CAAA;OACrB,GAAG,CAAA,CAAA;GACR,CAAA;AAEAM,EAAAA,yBAAA,CAA0B,YAAM;IACrBC,QAAA,CAAAC,gBAAA,CAAiB,OAAS,EAAAV,gBAAA,EAAkB,IAAI,CAAA,CAAA;AACzD,IAAA,OAAO,YAAM;MACFS,QAAA,CAAAE,mBAAA,CAAoB,OAAS,EAAAX,gBAAA,EAAkB,IAAI,CAAA,CAAA;KAC9D,CAAA;GACF,EAAG,EAAE,CAAA,CAAA;AAELY,EAAAA,SAAA,CAAU,YAAM;IACd,IAAI,CAAChB,OAAA,EAAS,OAAA;AAEV,IAAA,IAAAE,WAAA,CAAYI,OAAW,IAAAL,aAAA,CAAcK,OAAS,EAAA;AAEhDL,MAAAA,aAAA,CAAcK,OAAQ,CAAAW,KAAA,CAAMC,eAAkB,GAAA,EAAA,CAAAC,MAAA,CAAGjB,YAAYI,OAAQ,CAAAC,CAAA,GAAIN,aAAc,CAAAK,OAAA,CAAQc,UAC7F,EAAA,KAAA,CAAA,CAAAD,MAAA,CAAAjB,WAAA,CAAYI,OAAQ,CAAAG,CAAA,GAAIR,cAAcK,OAAQ,CAAAe,SAAA,EAAA,IAAA,CAAA,CAAA;AAElD,KAAA;AACF,GAAG,EAAA,CAACrB,OAAS,EAAAC,aAAa,CAAC,CAAA,CAAA;AAC7B;;;;"}