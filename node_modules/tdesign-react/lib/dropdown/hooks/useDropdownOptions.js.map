{"version":3,"file":"useDropdownOptions.js","sources":["../../../../components/dropdown/hooks/useDropdownOptions.ts"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { DropdownOption } from '../type';\nimport DropdownMenu from '../DropdownMenu';\nimport DropdownItem from '../DropdownItem';\n\nexport const getOptionsFromChildren = (children: React.ReactElement<any>): DropdownOption[] => {\n  if (!children) return [];\n\n  if (children.type === DropdownMenu) {\n    const groupChildren = children.props.children as React.ReactElement;\n    if (Array.isArray(groupChildren)) {\n      return getOptionsFromChildren(groupChildren);\n    }\n  }\n\n  return React.Children.toArray(children)\n    .map((item: React.ReactElement<any>) => {\n      const groupChildren = item.props?.children;\n      const contextRes = item.props?.content;\n\n      if (Array.isArray(groupChildren)) {\n        const contentCtx = groupChildren?.filter?.((v) => ![DropdownItem, DropdownMenu].includes(v.type));\n        const childrenCtx = groupChildren?.filter?.((v) => [DropdownItem, DropdownMenu].includes(v.type));\n\n        return {\n          ...item.props,\n          content: contentCtx || groupChildren,\n          children: childrenCtx.length > 0 ? getOptionsFromChildren(groupChildren[1]) : null,\n        };\n      }\n      return { ...item.props, content: groupChildren || contextRes, children: null };\n    })\n    .filter((v) => !!v.content);\n};\n\nexport default function useDropdownOptions(\n  children: (React.ReactElement | React.ReactNode | React.ReactPortal)[],\n  options: DropdownOption[],\n): DropdownOption[] {\n  const dropdownOptions = useMemo(() => {\n    if (options && options.length > 0) return options;\n    let dropdownMenuChild: React.ReactElement;\n    React.Children.forEach(children, (child: React.ReactElement) => {\n      if (!React.isValidElement(child)) return;\n\n      if (child.type === DropdownMenu && (child.props as { children: React.ReactElement }).children) {\n        dropdownMenuChild = (child.props as { children: React.ReactElement }).children;\n      }\n    });\n    return getOptionsFromChildren(dropdownMenuChild);\n  }, [options, children]);\n\n  return dropdownOptions;\n}\n"],"names":["getOptionsFromChildren","children","type","DropdownMenu","groupChildren","props","Array","isArray","React","Children","toArray","map","item","_item$props","_item$props2","contextRes","content","_groupChildren$filter","_groupChildren$filter2","contentCtx","filter","call","v","DropdownItem","includes","childrenCtx","_objectSpread","length","useDropdownOptions","options","dropdownOptions","useMemo","dropdownMenuChild","forEach","child","isValidElement"],"mappings":"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"}