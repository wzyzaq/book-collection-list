{"version":3,"file":"index.js","sources":["../../../../../components/color-picker/components/panel/index.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState, forwardRef, useCallback } from 'react';\nimport classNames from 'classnames';\nimport {\n  Color,\n  DEFAULT_COLOR,\n  DEFAULT_LINEAR_GRADIENT,\n  DEFAULT_SYSTEM_SWATCH_COLORS,\n  TD_COLOR_USED_COLORS_MAX_SIZE,\n  getColorObject,\n  GradientColorPoint,\n  initColorFormat,\n  type ColorFormat,\n} from '@tdesign/common-js/color-picker/index';\nimport useCommonClassName from '../../../hooks/useCommonClassName';\nimport useControlled from '../../../hooks/useControlled';\nimport useDefaultProps from '../../../hooks/useDefaultProps';\nimport { useLocaleReceiver } from '../../../locale/LocalReceiver';\nimport useClassName from '../../hooks/useClassNames';\nimport type { ColorPickerProps, TdColorModes, TdColorSaturationData } from '../../interface';\nimport type { ColorPickerChangeTrigger } from '../../type';\nimport { colorPickerDefaultProps } from '../../defaultProps';\nimport LinearGradient from './linear-gradient';\nimport SaturationPanel from './saturation';\nimport HUESlider from './hue';\nimport AlphaSlider from './alpha';\nimport FormatPanel from './format';\nimport PanelHeader from './header';\nimport SwatchesPanel from './swatches';\n\nconst Panel = forwardRef<HTMLDivElement, ColorPickerProps>((props, ref) => {\n  const baseClassName = useClassName();\n  const { STATUS } = useCommonClassName();\n  const [local, t] = useLocaleReceiver('colorPicker');\n  const {\n    className,\n    colorModes,\n    defaultRecentColors,\n    disabled,\n    enableAlpha,\n    enableMultipleGradient,\n    format,\n    style,\n    swatchColors,\n    showPrimaryColorPreview,\n    onChange,\n    onPaletteBarChange,\n    onRecentColorsChange,\n  } = useDefaultProps(props, colorPickerDefaultProps);\n  const [innerValue, setInnerValue] = useControlled(props, 'value', onChange);\n\n  const [updateId, setUpdateId] = useState(0);\n\n  const getModeByColor = (input: string) => {\n    if (colorModes.length === 1) return colorModes[0];\n    return colorModes.includes('linear-gradient') && Color.isGradientColor(input) ? 'linear-gradient' : 'monochrome';\n  };\n  const [mode, setMode] = useState<TdColorModes>(() => getModeByColor(innerValue));\n\n  const isGradient = mode === 'linear-gradient';\n  const defaultEmptyColor = isGradient ? DEFAULT_LINEAR_GRADIENT : DEFAULT_COLOR;\n\n  const [recentlyUsedColors, setRecentlyUsedColors] = useControlled(props, 'recentColors', onRecentColorsChange, {\n    defaultRecentColors,\n  });\n  const colorInstanceRef = useRef<Color>(new Color(innerValue || defaultEmptyColor));\n  const formatRef = useRef<ColorFormat>(initColorFormat(format, enableAlpha));\n\n  const update = useCallback(\n    (value: string) => {\n      colorInstanceRef.current.update(value);\n      // 确保 UI 同步更新\n      setUpdateId(updateId + 1);\n    },\n    [updateId],\n  );\n\n  const emitColorChange = useCallback(\n    (trigger?: ColorPickerChangeTrigger) => {\n      const value = colorInstanceRef.current.getFormattedColor(formatRef.current, enableAlpha);\n      setInnerValue(value, {\n        color: getColorObject(colorInstanceRef.current),\n        trigger: trigger || 'palette-saturation-brightness',\n      });\n    },\n    [enableAlpha, setInnerValue],\n  );\n\n  useEffect(() => {\n    // 根据颜色自动切换模式\n    const newMode = getModeByColor(innerValue);\n    setMode(newMode);\n    colorInstanceRef.current.isGradient = newMode === 'linear-gradient';\n    update(innerValue);\n  }, [innerValue]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const baseProps = {\n    color: colorInstanceRef.current,\n    disabled,\n    baseClassName,\n  };\n\n  const handleModeChange = (newMode: TdColorModes) => {\n    setMode(newMode);\n\n    const isGradientMode = newMode === 'linear-gradient';\n    colorInstanceRef.current.isGradient = isGradientMode;\n\n    const { rgba, gradientColors, linearGradient } = colorInstanceRef.current;\n    if (isGradientMode) {\n      update(gradientColors.length > 0 ? linearGradient : DEFAULT_LINEAR_GRADIENT);\n    } else {\n      update(rgba);\n    }\n    emitColorChange();\n  };\n\n  // 最近使用颜色变更时触发\n  const handleRecentlyUsedColorsChange = (colors: string[]) => {\n    setRecentlyUsedColors(colors);\n  };\n\n  // 添加最近使用颜色\n  const addRecentlyUsedColor = () => {\n    const colors = [...((recentlyUsedColors as string[]) || [])];\n    const { isGradient, linearGradient, rgba } = colorInstanceRef.current;\n    const currentColor = isGradient ? linearGradient : rgba;\n    const index = colors.indexOf(currentColor);\n    if (index > -1) {\n      colors.splice(index, 1);\n    }\n    colors.unshift(currentColor);\n    if (colors.length > TD_COLOR_USED_COLORS_MAX_SIZE) {\n      colors.length = TD_COLOR_USED_COLORS_MAX_SIZE;\n    }\n    handleRecentlyUsedColorsChange(colors);\n  };\n\n  // 饱和度亮度变化\n  const handleSatAndValueChange = ({ saturation, value }: TdColorSaturationData) => {\n    const { saturation: sat, value: val } = colorInstanceRef.current;\n    let changeTrigger: ColorPickerChangeTrigger = 'palette-saturation-brightness';\n    if (value !== val && saturation !== sat) {\n      changeTrigger = 'palette-saturation-brightness';\n      colorInstanceRef.current.saturation = saturation;\n      colorInstanceRef.current.value = value;\n    } else if (saturation !== sat) {\n      changeTrigger = 'palette-saturation';\n      colorInstanceRef.current.saturation = saturation;\n    } else if (value !== val) {\n      changeTrigger = 'palette-brightness';\n      colorInstanceRef.current.value = value;\n    } else {\n      return;\n    }\n\n    emitColorChange(changeTrigger);\n  };\n\n  // hue色相变化\n  const handleHUEChange = (hue: number) => {\n    colorInstanceRef.current.hue = hue;\n    emitColorChange('palette-hue-bar');\n    onPaletteBarChange?.({\n      color: getColorObject(colorInstanceRef.current),\n    });\n  };\n\n  /**\n   * 透明度变化\n   * @param alpha\n   */\n  const handleAlphaChange = (alpha: number) => {\n    colorInstanceRef.current.alpha = alpha;\n    emitColorChange('palette-alpha-bar');\n    onPaletteBarChange?.({\n      color: getColorObject(colorInstanceRef.current),\n    });\n  };\n\n  /**\n   * 渐变改变\n   * @param param0\n   */\n  const handleGradientChange = ({\n    key,\n    payload,\n  }: {\n    key: 'degree' | 'selectedId' | 'colors';\n    payload: number | string | GradientColorPoint[];\n    addUsedColor?: boolean;\n  }) => {\n    let trigger: ColorPickerChangeTrigger = 'palette-saturation-brightness';\n    switch (key) {\n      case 'degree':\n        colorInstanceRef.current.gradientDegree = payload as number;\n        trigger = 'input';\n        break;\n      case 'selectedId':\n        colorInstanceRef.current.gradientSelectedId = payload as string;\n        break;\n      case 'colors':\n        colorInstanceRef.current.gradientColors = payload as GradientColorPoint[];\n        break;\n    }\n    emitColorChange(trigger);\n  };\n\n  // format 输入变化\n  const handleInputChange = useCallback(\n    (input: string) => {\n      update(input);\n      emitColorChange('input');\n    },\n    [emitColorChange, update],\n  );\n\n  // 渲染预设颜色区域\n  const SwatchesArea = React.memo(() => {\n    // 只支持渐变模式\n    const onlySupportGradient = colorModes.length === 1 && colorModes.includes('linear-gradient');\n\n    // 最近使用颜色\n    let recentColors = recentlyUsedColors;\n    if (onlySupportGradient && Array.isArray(recentColors)) {\n      recentColors = recentColors.filter((color) => Color.isGradientColor(color));\n    }\n    const showUsedColors = Array.isArray(recentColors) || recentColors === true;\n\n    // 系统预设颜色\n    let systemColors = swatchColors;\n    if (systemColors === undefined) {\n      systemColors = [...DEFAULT_SYSTEM_SWATCH_COLORS];\n    }\n    if (onlySupportGradient) {\n      systemColors = systemColors.filter((color) => Color.isGradientColor(color));\n    }\n    const showSystemColors = Array.isArray(systemColors);\n\n    // 色块点击\n    const handleSetColor = (value: string, trigger: ColorPickerChangeTrigger) => {\n      const newMode = getModeByColor(value);\n      setMode(newMode);\n      // 确保在渐变模式下选择纯色块，能切换回单色模式\n      colorInstanceRef.current.isGradient = newMode === 'linear-gradient';\n      update(value);\n      emitColorChange(trigger);\n    };\n\n    if (!showSystemColors && !showUsedColors) return null;\n\n    return (\n      <>\n        <div className={`${baseClassName}__swatches-wrap`}>\n          {showUsedColors && (\n            <SwatchesPanel\n              {...baseProps}\n              title={t(local.recentColorTitle)}\n              editable\n              handleAddColor={addRecentlyUsedColor}\n              colors={recentColors as string[]}\n              onSetColor={(color: string) => handleSetColor(color, 'recent')}\n              onChange={handleRecentlyUsedColorsChange}\n            />\n          )}\n          {showSystemColors && (\n            <SwatchesPanel\n              {...baseProps}\n              title={t(local.swatchColorTitle)}\n              colors={systemColors}\n              onSetColor={(color: string) => handleSetColor(color, 'preset')}\n            />\n          )}\n        </div>\n      </>\n    );\n  });\n\n  return (\n    <div\n      className={classNames(`${baseClassName}__panel`, disabled ? STATUS.disabled : false, className)}\n      onClick={(e) => e.stopPropagation()}\n      style={{ ...style }}\n      ref={ref}\n    >\n      <PanelHeader baseClassName={baseClassName} mode={mode} colorModes={colorModes} onModeChange={handleModeChange} />\n      <div className={`${baseClassName}__body`}>\n        {isGradient && (\n          <LinearGradient\n            {...baseProps}\n            enableMultipleGradient={enableMultipleGradient}\n            onChange={handleGradientChange}\n          />\n        )}\n        <SaturationPanel {...baseProps} onChange={handleSatAndValueChange} />\n        <div className={`${baseClassName}__sliders-wrapper`}>\n          <div className={`${baseClassName}__sliders`}>\n            <HUESlider {...baseProps} onChange={handleHUEChange} />\n            {enableAlpha && <AlphaSlider {...baseProps} onChange={handleAlphaChange} />}\n          </div>\n          {showPrimaryColorPreview ? (\n            <div className={classNames([`${baseClassName}__sliders-preview`, `${baseClassName}--bg-alpha`])}>\n              <span\n                className={`${baseClassName}__sliders-preview-inner`}\n                style={{\n                  background: isGradient ? colorInstanceRef.current.linearGradient : colorInstanceRef.current.rgba,\n                }}\n              />\n            </div>\n          ) : null}\n        </div>\n\n        <FormatPanel {...props} {...baseProps} format={formatRef.current} onInputChange={handleInputChange} />\n        <SwatchesArea />\n      </div>\n    </div>\n  );\n});\n\nexport default React.memo(Panel);\n"],"names":["Panel","forwardRef","props","ref","baseClassName","useClassName","_useCommonClassName","useCommonClassName","STATUS","_useLocaleReceiver","useLocaleReceiver","_useLocaleReceiver2","_slicedToArray","local","t","_useDefaultProps","useDefaultProps","colorPickerDefaultProps","className","colorModes","defaultRecentColors","disabled","enableAlpha","enableMultipleGradient","format","style","swatchColors","showPrimaryColorPreview","onChange","onPaletteBarChange","onRecentColorsChange","_useControlled","useControlled","_useControlled2","innerValue","setInnerValue","_useState","useState","_useState2","updateId","setUpdateId","getModeByColor","input","length","includes","Color","isGradientColor","_useState3","_useState4","mode","setMode","isGradient","defaultEmptyColor","DEFAULT_LINEAR_GRADIENT","DEFAULT_COLOR","_useControlled3","_useControlled4","recentlyUsedColors","setRecentlyUsedColors","colorInstanceRef","useRef","formatRef","initColorFormat","update","useCallback","value","current","emitColorChange","trigger","getFormattedColor","color","getColorObject","useEffect","newMode","baseProps","handleModeChange","isGradientMode","_colorInstanceRef$cur","rgba","gradientColors","linearGradient","handleRecentlyUsedColorsChange","colors","addRecentlyUsedColor","_toConsumableArray","_colorInstanceRef$cur2","currentColor","index","indexOf","splice","unshift","TD_COLOR_USED_COLORS_MAX_SIZE","handleSatAndValueChange","_ref","saturation","_colorInstanceRef$cur3","sat","val","changeTrigger","handleHUEChange","hue","handleAlphaChange","alpha","handleGradientChange","key","_ref2","payload","gradientDegree","gradientSelectedId","handleInputChange","SwatchesArea","React","memo","onlySupportGradient","recentColors","Array","isArray","filter","showUsedColors","systemColors","DEFAULT_SYSTEM_SWATCH_COLORS","showSystemColors","handleSetColor","createElement","SwatchesPanel","_objectSpread","title","recentColorTitle","editable","handleAddColor","onSetColor","swatchColorTitle","classNames","onClick","e","stopPropagation","PanelHeader","onModeChange","LinearGradient","SaturationPanel","HUESlider","AlphaSlider","concat","background","FormatPanel","onInputChange"],"mappings":"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"}