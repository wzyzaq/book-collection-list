{"version":3,"file":"helper.js","sources":["../../../../components/select/util/helper.ts"],"sourcesContent":["import { ReactElement } from 'react';\nimport { isPlainObject, get } from 'lodash-es';\nimport OptionGroup from '../base/OptionGroup';\nimport Option from '../base/Option';\n\nimport { SelectValue, TdOptionProps, SelectKeysType, TdSelectProps, SelectOption, SelectOptionGroup } from '../type';\n\ntype SelectLabeledValue = Required<Omit<TdOptionProps, 'disabled'>>;\n\ntype ValueToOption = {\n  [value: string | number]: TdOptionProps;\n};\n\nfunction setValueToOptionFormOptionDom(dom: ReactElement<any>, valueToOption: ValueToOption, keys: SelectKeysType) {\n  const { value, label, children } = dom.props;\n  // eslint-disable-next-line no-param-reassign\n  valueToOption[value] = {\n    ...dom.props,\n    [keys?.value || 'value']: value,\n    [keys?.label || 'label']: label || children || value,\n  };\n}\n\n// 获取 value => option，用于快速基于 value 找到对应的 option\nexport const getValueToOption = (\n  children: ReactElement<any>,\n  options: TdOptionProps[],\n  keys: SelectKeysType,\n): ValueToOption => {\n  const valueToOption = {};\n\n  // options 优先级高于 children\n  if (Array.isArray(options)) {\n    options.forEach((option) => {\n      if ((option as SelectOptionGroup).group) {\n        (option as SelectOptionGroup)?.children?.forEach((child) => {\n          valueToOption[get(child, keys?.value || 'value')] = {\n            ...child,\n            value: get(child, keys?.value || 'value'),\n            label: get(child, keys?.label || 'label'),\n          };\n        });\n      } else {\n        valueToOption[get(option, keys?.value || 'value')] = {\n          ...option,\n          value: get(option, keys?.value || 'value'),\n          label: get(option, keys?.label || 'label'),\n        };\n      }\n    });\n    return valueToOption;\n  }\n\n  if (isPlainObject(children)) {\n    if (children.type === Option) {\n      setValueToOptionFormOptionDom(children, valueToOption, keys);\n      return valueToOption;\n    }\n\n    if (children.type === OptionGroup) {\n      const groupChildren = children.props.children;\n\n      if (Array.isArray(groupChildren)) {\n        groupChildren.forEach((item) => {\n          setValueToOptionFormOptionDom(item, valueToOption, keys);\n        });\n        return valueToOption;\n      }\n    }\n  }\n\n  /**\n   * children如果存在ReactElement和map函数混写的情况，会出现嵌套数组\n   */\n  if (Array.isArray(children)) {\n    const handlerElement = (item: ReactElement) => {\n      if (item.type === Option) {\n        setValueToOptionFormOptionDom(item, valueToOption, keys);\n      }\n\n      if (item.type === OptionGroup) {\n        const groupChildren = (item.props as SelectOption).children;\n        if (Array.isArray(groupChildren)) {\n          groupChildren.forEach((groupItem) => {\n            setValueToOptionFormOptionDom(groupItem, valueToOption, keys);\n          });\n        }\n      }\n\n      if (Array.isArray(item)) {\n        item.forEach((child) => {\n          handlerElement(child);\n        });\n      }\n    };\n    children.forEach((item: ReactElement) => handlerElement(item));\n  }\n\n  return valueToOption;\n};\n\n// 获取单选的 label\nexport const getLabel = (\n  children: ReactElement<any>,\n  value: SelectValue<TdOptionProps>,\n  options: TdOptionProps[],\n  keys: SelectKeysType,\n) => {\n  let selectedLabel = '';\n  // 处理带 options 属性的情况\n  if (Array.isArray(options)) {\n    options.some((option) => {\n      if ([get(value, keys?.value || 'value'), value].includes(option.value)) {\n        selectedLabel = option.label;\n        return true;\n      }\n      return false;\n    });\n\n    return selectedLabel;\n  }\n\n  if (isPlainObject(children)) {\n    selectedLabel = children.props.label;\n\n    if (children.type === OptionGroup) {\n      const groupChildren = children.props.children;\n\n      if (Array.isArray(groupChildren)) {\n        groupChildren.some((item) => {\n          const selectedValue = isPlainObject(value) ? get(value, 'value') : value;\n          if (isPlainObject(item.props) && item.props.value === selectedValue) {\n            selectedLabel = item.props.label || item.props.children;\n            return true;\n          }\n          return false;\n        });\n      }\n    }\n  }\n\n  if (Array.isArray(children)) {\n    children.some((item: ReactElement<any>) => {\n      // 处理分组\n      if (item.type === OptionGroup) {\n        const groupChildren = item.props.children;\n        if (Array.isArray(groupChildren)) {\n          const isSelected = groupChildren.some((item) => {\n            const selectedValue = isPlainObject(value) ? get(value, 'value') : value;\n            if (isPlainObject(item.props) && item.props.value === selectedValue) {\n              selectedLabel = item.props.label || item.props.children;\n              return true;\n            }\n            return false;\n          });\n          return isSelected;\n        }\n      }\n      const selectedValue = isPlainObject(value) ? get(value, 'value') : value;\n      if (isPlainObject(item.props) && item.props.value === selectedValue) {\n        selectedLabel = item.props.label || item.props.children;\n        return true;\n      }\n      return false;\n    });\n  }\n\n  return selectedLabel;\n};\n\nexport const getMultipleTags = (values: SelectValue[], keys: SelectKeysType) => {\n  const tags = values.map((item) => ({\n    label: get(item, keys?.label || 'label') || item.toString(),\n    value: get(item, keys?.value || 'value') || item,\n  }));\n  return tags;\n};\n\nexport const getSelectValueArr = (\n  values: SelectValue | SelectValue[],\n  activeValue: SelectValue,\n  selected?: boolean,\n  valueType?: TdSelectProps['valueType'],\n  keys?: SelectKeysType,\n  objVal?: SelectValue,\n) => {\n  // eslint-disable-next-line no-param-reassign\n  values = Array.isArray(values) ? values : [];\n\n  if (Array.isArray(values)) {\n    let currentValues = [...values];\n    const isValueObj = valueType === 'object';\n    if (selected) {\n      currentValues = currentValues.filter((item: SelectLabeledValue) => {\n        if (isValueObj) {\n          if (isPlainObject(activeValue)) {\n            return get(item, keys?.value || 'value') !== get(activeValue, keys?.value || 'value');\n          }\n          return get(item, keys?.value || 'value') !== activeValue;\n        }\n        return item !== activeValue;\n      });\n    } else {\n      const item = isValueObj ? objVal : activeValue;\n\n      currentValues.push(item as SelectValue);\n    }\n    return currentValues;\n  }\n};\n\n// 计算onChange事件回调的selectedOptions参数\nexport const getSelectedOptions = (\n  value: SelectValue,\n  multiple: TdSelectProps['multiple'],\n  valueType: TdSelectProps['valueType'],\n  keys: SelectKeysType,\n  valueToOption: ValueToOption,\n  selectedValue?: SelectValue,\n) => {\n  const isObjectType = valueType === 'object';\n  // 当前所有选中的选项\n  let currentSelectedOptions = [];\n  // 当前选中的选项\n  let currentOption: SelectOption;\n  // 全选值\n  let allSelectedValue: Array<SelectValue>;\n  // 所有可选项\n  const tmpPropOptions = Object.values(valueToOption);\n  if (multiple) {\n    currentSelectedOptions = isObjectType\n      ? (value as Array<SelectValue>)\n      : tmpPropOptions?.filter?.((v) => (value as Array<string | number>).includes?.(v[keys?.value || 'value']));\n\n    allSelectedValue = isObjectType\n      ? currentSelectedOptions\n      : currentSelectedOptions?.map((v) => v[keys?.value || 'value']);\n\n    currentOption = isObjectType\n      ? (value as Array<SelectValue>).find((v) => v[keys?.value || 'value'] === selectedValue)\n      : currentSelectedOptions?.find((option) => option[keys?.value || 'value'] === selectedValue);\n  } else {\n    currentSelectedOptions = isObjectType\n      ? [value]\n      : tmpPropOptions?.filter?.((v) => value === v[keys?.value || 'value']) || [];\n    allSelectedValue = currentSelectedOptions;\n    currentOption = isObjectType\n      ? value\n      : currentSelectedOptions?.find((option) => option[keys?.value || 'value'] === selectedValue);\n  }\n\n  return { currentSelectedOptions, currentOption, allSelectedValue };\n};\n"],"names":["setValueToOptionFormOptionDom","dom","valueToOption","keys","_dom$props","props","value","label","children","_objectSpread","_defineProperty","getValueToOption","options","Array","isArray","forEach","option","group","_option$children","child","get","isPlainObject","type","Option","OptionGroup","groupChildren","item","handlerElement","groupItem","getLabel","selectedLabel","some","includes","selectedValue","isSelected","getMultipleTags","values","tags","map","toString","getSelectValueArr","activeValue","selected","valueType","objVal","currentValues","_toConsumableArray","isValueObj","filter","push","getSelectedOptions","multiple","isObjectType","currentSelectedOptions","currentOption","allSelectedValue","tmpPropOptions","Object","_tmpPropOptions$filte","_currentSelectedOptio","_currentSelectedOptio2","call","v","_value$includes","find","_tmpPropOptions$filte2","_currentSelectedOptio3"],"mappings":"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"}