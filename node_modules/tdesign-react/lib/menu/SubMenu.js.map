{"version":3,"file":"SubMenu.js","sources":["../../../components/menu/SubMenu.tsx"],"sourcesContent":["import React, { FC, useContext, useState, ReactElement, useMemo, useRef } from 'react';\nimport classNames from 'classnames';\nimport { CSSTransition } from 'react-transition-group';\nimport { StyledProps } from '../common';\nimport { TdSubmenuProps } from './type';\nimport useConfig from '../hooks/useConfig';\nimport { MenuContext } from './MenuContext';\nimport useDomRefCallback from '../hooks/useDomRefCallback';\nimport useRipple from '../hooks/useRipple';\nimport { getSubMenuMaxHeight } from './_util/getSubMenuChildStyle';\nimport checkSubMenuChildrenActive from './_util/checkSubMenuChildrenActive';\nimport FakeArrow from '../common/FakeArrow';\nimport { checkIsSubMenu, checkIsMenuGroup } from './_util/checkMenuType';\nimport { cacularPaddingLeft } from './_util/cacularPaddingLeft';\nimport { Popup, PopupPlacement } from '../popup';\nimport parseTNode from '../_util/parseTNode';\n\nexport interface SubMenuProps extends TdSubmenuProps, StyledProps {}\n\nexport interface SubMenuWithCustomizeProps extends SubMenuProps {\n  level?: number;\n}\n\nconst SubAccordion: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { content, children = content, disabled, icon, title, value, className, style, level = 1, popupProps } = props;\n  const { overlayClassName, overlayInnerClassName, ...restPopupProps } = popupProps || {};\n\n  const { classPrefix } = useConfig();\n\n  // popup 状态下控制开关\n  const [open, setOpen] = useState(false);\n  const { expanded = [], onExpand, active, expandType, theme = 'light' } = useContext(MenuContext);\n\n  const isPopUp = expandType === 'popup';\n\n  // 非 popup 展开\n  const isExpand = expanded.includes(value) && !disabled && !isPopUp;\n\n  const handleClick = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    e.stopPropagation();\n    onExpand(value, expanded);\n    setOpen(false);\n  };\n\n  const handleVisibleChange = (visible: boolean) => {\n    setOpen(visible);\n  };\n\n  const handleMouseEvent = (type: 'leave' | 'enter') => {\n    if (!isPopUp) return;\n    if (type === 'enter') setOpen(true);\n    else if (type === 'leave') setOpen(false);\n  };\n\n  const childrens = React.Children.map(children, (child) =>\n    React.cloneElement(child as ReactElement<any>, {\n      className: classNames(\n        `${classPrefix}-menu__item--plain`,\n        `${classPrefix}-submenu__item`,\n        `${classPrefix}-submenu__item--icon`,\n        (child as ReactElement<any>).props?.className,\n      ),\n    }),\n  );\n\n  // 计算有多少子节点并设置最大高度，为做出动画效果\n  const childStyle = {\n    maxHeight: isExpand || (open && isPopUp) ? getSubMenuMaxHeight(children) : 0,\n  };\n\n  // 是否展开（popup 与 expand 两种状态）\n  const isOpen = useMemo(() => {\n    if (disabled) return false;\n    if (isPopUp) return open;\n    return isExpand;\n  }, [disabled, isPopUp, open, isExpand]);\n\n  // 计算左边距，兼容多层级子菜单\n  const menuPaddingLeft = cacularPaddingLeft(level - 1);\n\n  const fakeArrowStyle = isPopUp && level > 1 ? { transform: 'rotate(-90deg)' } : {};\n\n  const contentRef = useRef<HTMLUListElement>(null);\n\n  const transitionCallbacks = {\n    onEnter: () => {\n      contentRef.current.style.height = `${contentRef?.current.scrollHeight}px`;\n    },\n    onEntered: () => {\n      contentRef.current.style.height = 'auto';\n    },\n    onExit: () => {\n      contentRef.current.style.height = `${contentRef?.current.scrollHeight}px`;\n    },\n    onExiting: () => {\n      contentRef.current.style.height = '0px';\n    },\n  };\n\n  const pupContent = (\n    <ul\n      className={classNames(`${classPrefix}-menu__popup-wrapper`, {\n        [`${classPrefix}-is-opened`]: isOpen,\n      })}\n      key=\"popup\"\n      style={childStyle}\n    >\n      {childrens}\n    </ul>\n  );\n\n  const submenu = (\n    <li\n      className={classNames(`${classPrefix}-submenu`, className, {\n        [`${classPrefix}-is-disabled`]: disabled,\n        [`${classPrefix}-is-opened`]: isOpen,\n      })}\n      style={style}\n      onMouseEnter={() => handleMouseEvent('enter')}\n      onMouseLeave={() => handleMouseEvent('leave')}\n    >\n      <div\n        className={classNames(`${classPrefix}-menu__item`, {\n          [`${classPrefix}-is-opened`]: isOpen,\n          [`${classPrefix}-is-active`]: checkSubMenuChildrenActive(children, active),\n        })}\n        onClick={handleClick}\n      >\n        {parseTNode(icon)}\n        <span className={`${classPrefix}-menu__content`}>{title}</span>\n        <FakeArrow style={fakeArrowStyle} isActive={isOpen} disabled={disabled} />\n      </div>\n      {!isPopUp && (\n        <CSSTransition in={isOpen} appear timeout={300} nodeRef={contentRef} {...transitionCallbacks}>\n          <ul\n            key=\"normal\"\n            style={\n              {\n                ...childStyle,\n                '--padding-left': `${menuPaddingLeft}px`,\n                overflow: 'hidden',\n              } as React.CSSProperties\n            }\n            className={classNames(`${classPrefix}-menu__sub`, `${classPrefix}-slide-down-enter-active`)}\n            ref={contentRef}\n          >\n            {childrens}\n          </ul>\n        </CSSTransition>\n      )}\n    </li>\n  );\n\n  if (isPopUp) {\n    return (\n      <Popup\n        {...restPopupProps}\n        overlayInnerClassName={[\n          `${classPrefix}-menu__popup`,\n          `${classPrefix}-is-vertical`,\n          {\n            [`${classPrefix}-is-opened`]: isOpen,\n          },\n          overlayInnerClassName,\n        ]}\n        overlayClassName={[\n          `${classPrefix}-menu--${theme}`,\n          { [`${classPrefix}-menu-is-nested`]: level > 1 },\n          overlayClassName,\n        ]}\n        visible={open}\n        placement=\"right-top\"\n        content={pupContent}\n        onVisibleChange={handleVisibleChange}\n      >\n        {submenu}\n      </Popup>\n    );\n  }\n\n  return submenu;\n};\n\nconst SubTitleMenu: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { className, style, children, disabled, icon, title, value, level = 1, popupProps } = props;\n\n  const { overlayClassName, overlayInnerClassName, ...restPopupProps } = popupProps || {};\n\n  const { active, onChange, expandType, theme = 'light' } = useContext(MenuContext);\n  const { classPrefix } = useConfig();\n  const [open, setOpen] = useState(false);\n\n  const handleClick = () => onChange(value);\n\n  const handleVisibleChange = (visible: boolean) => {\n    setOpen(visible);\n  };\n\n  // 斜八角动画\n  const [subMenuDom, setRefCurrent] = useDomRefCallback();\n\n  useRipple(subMenuDom);\n\n  // pupup 导航\n  const isPopUp = expandType === 'popup';\n  // 当前二级导航激活\n  const isActive = checkSubMenuChildrenActive(children, active) || active === value;\n\n  const handleMouseEvent = (type: 'leave' | 'enter') => {\n    if (!isPopUp) return;\n    if (type === 'enter') setOpen(true);\n    else if (type === 'leave') setOpen(false);\n  };\n\n  // 是否展开（popup 与 expand 两种状态）\n  const isOpen = useMemo(() => {\n    if (disabled) return false;\n    if (isPopUp) return open;\n    return false;\n  }, [disabled, isPopUp, open]);\n\n  const fakeArrowStyle = level > 1 ? { transform: 'rotate(-90deg)' } : {};\n\n  const pupContent = (\n    <ul\n      className={classNames(`${classPrefix}-menu__popup-wrapper`, {\n        [`${classPrefix}-is-opened`]: isOpen,\n      })}\n    >\n      {children}\n    </ul>\n  );\n\n  let placement = 'right-top';\n  if (level < 2) {\n    placement = 'bottom-left';\n  }\n\n  const submenu = (\n    <li\n      className={classNames(`${classPrefix}-submenu`, className, {\n        [`${classPrefix}-is-opened`]: open,\n      })}\n      onMouseEnter={() => handleMouseEvent('enter')}\n      onMouseLeave={() => handleMouseEvent('leave')}\n    >\n      <div\n        ref={setRefCurrent}\n        className={classNames(`${classPrefix}-menu__item`, {\n          [`${classPrefix}-is-active`]: isActive,\n          [`${classPrefix}-is-opened`]: open,\n        })}\n        onClick={handleClick}\n        style={style}\n      >\n        {parseTNode(icon)}\n        <span>{title}</span>\n        {isPopUp && <FakeArrow style={fakeArrowStyle} isActive={level === 1 && open} />}\n      </div>\n    </li>\n  );\n\n  if (isPopUp) {\n    return (\n      <Popup\n        {...restPopupProps}\n        overlayInnerClassName={[\n          `${classPrefix}-menu__popup`,\n          `${classPrefix}-is-vertical`,\n          {\n            [`${classPrefix}-is-opened`]: isOpen,\n          },\n          overlayInnerClassName,\n        ]}\n        overlayClassName={[\n          `${classPrefix}-menu--${theme}`,\n          `${classPrefix}-is-head-menu`,\n          { [`${classPrefix}-menu-is-nested`]: level > 1 },\n          overlayClassName,\n        ]}\n        visible={open}\n        placement={placement as PopupPlacement}\n        content={pupContent}\n        onVisibleChange={handleVisibleChange}\n      >\n        {submenu}\n      </Popup>\n    );\n  }\n\n  return submenu;\n};\n\nconst SubMenu: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { mode } = useContext(MenuContext);\n  const { children, level = 1 } = props;\n\n  const changeItemLevel = (item: React.ReactElement<any>) => {\n    if (checkIsSubMenu(item)) {\n      return React.cloneElement(item, {\n        level: level + 1,\n      });\n    }\n    if (checkIsMenuGroup(item)) {\n      const groupChildren = React.Children.map(item.props.children, (item: React.ReactElement) =>\n        changeItemLevel(item),\n      );\n      return React.cloneElement(\n        item,\n        {\n          level: level + 1,\n        },\n        groupChildren,\n      );\n    }\n    return item;\n  };\n\n  // 如果是第二层及以及的 subMenu 需要添加 notFirstLevelSubMenu 属性\n  const childElement = React.Children.map(children, (item: React.ReactElement) => changeItemLevel(item));\n\n  if (mode === 'accordion') return <SubAccordion {...props}>{childElement}</SubAccordion>;\n  if (mode === 'title') return <SubTitleMenu {...props}>{childElement}</SubTitleMenu>;\n  return null;\n};\n\nSubMenu.displayName = 'SubMenu';\n\nexport default SubMenu;\n"],"names":["SubAccordion","props","content","_props$children","children","disabled","icon","title","value","className","style","_props$level","level","popupProps","_ref","overlayClassName","overlayInnerClassName","restPopupProps","_objectWithoutProperties","_excluded","_useConfig","useConfig","classPrefix","_useState","useState","_useState2","_slicedToArray","open","setOpen","_useContext","useContext","MenuContext","_useContext$expanded","expanded","onExpand","active","expandType","_useContext$theme","theme","isPopUp","isExpand","includes","handleClick","e","stopPropagation","handleVisibleChange","visible","handleMouseEvent","type","childrens","React","Children","map","child","_child$props","cloneElement","classNames","concat","childStyle","maxHeight","getSubMenuMaxHeight","isOpen","useMemo","menuPaddingLeft","cacularPaddingLeft","fakeArrowStyle","transform","contentRef","useRef","transitionCallbacks","onEnter","current","height","scrollHeight","onEntered","onExit","onExiting","pupContent","createElement","_defineProperty","key","submenu","onMouseEnter","onMouseLeave","checkSubMenuChildrenActive","onClick","parseTNode","FakeArrow","isActive","CSSTransition","_objectSpread","appear","timeout","nodeRef","overflow","ref","Popup","placement","onVisibleChange","SubTitleMenu","_props$level2","_ref4","_excluded2","_useContext2","onChange","_useContext2$theme","_useConfig2","_useState3","_useState4","_useDomRefCallback","useDomRefCallback","_useDomRefCallback2","subMenuDom","setRefCurrent","useRipple","SubMenu","_useContext3","mode","_props$level3","changeItemLevel","item","checkIsSubMenu","checkIsMenuGroup","groupChildren","childElement","displayName"],"mappings":"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"}