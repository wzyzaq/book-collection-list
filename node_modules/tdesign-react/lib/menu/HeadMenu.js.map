{"version":3,"file":"HeadMenu.js","sources":["../../../components/menu/HeadMenu.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport React, { FC, ReactElement, useMemo } from 'react';\nimport { isObject } from 'lodash-es';\nimport Tabs from '../tabs';\nimport { StyledProps } from '../common';\nimport { TdHeadMenuProps } from './type';\nimport useConfig from '../hooks/useConfig';\nimport useMenuContext from './hooks/useMenuContext';\nimport { MenuContext } from './MenuContext';\nimport checkSubMenuActive from './_util/checkSubMenuActive';\n\nconst { TabPanel } = Tabs;\n\nexport interface HeadMenuProps extends TdHeadMenuProps, StyledProps {\n  children?: React.ReactNode;\n}\n\nconst HeadMenu: FC<HeadMenuProps> = (props) => {\n  const { children, className, theme = 'light', style, logo, operations } = props;\n  const { classPrefix } = useConfig();\n  const { value } = useMenuContext({ ...props, children, mode: 'title' });\n\n  const childList: ReactElement[] | null = useMemo(() => {\n    if (value.expandType === 'popup') return null;\n    const activeMenu: ReactElement<any> = checkSubMenuActive(children, value.active);\n    if (!activeMenu) return null;\n    const child = activeMenu.props.children;\n    if (Array.isArray(child)) return child;\n    if (isObject(child)) return [child];\n    return activeMenu.props.children;\n  }, [children, value.expandType, value.active]);\n\n  const currentChildListValues =\n    childList?.length > 0 ? childList.map((item: ReactElement<any>) => item.props.value) : [];\n\n  return (\n    <MenuContext.Provider value={value}>\n      <div\n        className={classNames(`${classPrefix}-head-menu`, `${classPrefix}-menu--${theme}`, className)}\n        style={{ ...style }}\n      >\n        <div className={`${classPrefix}-head-menu__inner`}>\n          {logo && <div className={`${classPrefix}-menu__logo`}>{logo}</div>}\n          <ul className={`${classPrefix}-menu`}>{children}</ul>\n          {operations && <div className={`${classPrefix}-menu__operations`}>{operations}</div>}\n        </div>\n        {childList?.length > 0 && (\n          <ul className={`${classPrefix}-head-menu__submenu ${classPrefix}-submenu`}>\n            <Tabs\n              value={currentChildListValues.includes(value.active) ? value.active : currentChildListValues[0]}\n              onChange={value.onChange}\n            >\n              {childList.map(({ props: { children, ...restProps } }: any) => (\n                <TabPanel key={props.value} {...restProps} label={children}></TabPanel>\n              ))}\n            </Tabs>\n          </ul>\n        )}\n      </div>\n    </MenuContext.Provider>\n  );\n};\n\nexport default HeadMenu;\n"],"names":["TabPanel","Tabs","HeadMenu","props","children","className","_props$theme","theme","style","logo","operations","_useConfig","useConfig","classPrefix","_useMenuContext","useMenuContext","_objectSpread","mode","value","childList","useMemo","expandType","activeMenu","checkSubMenuActive","active","child","Array","isArray","isObject","currentChildListValues","length","map","item","React","createElement","MenuContext","Provider","classNames","concat","includes","onChange","_ref","_ref$props","restProps","_objectWithoutProperties","_excluded","key","label"],"mappings":"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"}