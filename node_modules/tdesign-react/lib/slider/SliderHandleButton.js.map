{"version":3,"file":"SliderHandleButton.js","sources":["../../../components/slider/SliderHandleButton.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport classNames from 'classnames';\nimport Tooltip from '../tooltip/Tooltip';\nimport { TdTooltipProps } from '../tooltip/type';\n\ninterface SliderHandleButtonProps {\n  onChange: (event: React.MouseEvent | MouseEvent) => void;\n  classPrefix: string;\n  style: React.CSSProperties;\n  toolTipProps: TdTooltipProps;\n  hideTips: boolean;\n}\n\nconst SliderHandleButton: React.FC<SliderHandleButtonProps> = ({\n  onChange,\n  style,\n  classPrefix,\n  toolTipProps,\n  hideTips,\n}) => {\n  const [popupVisible, setPopupVisible] = useState(false);\n  const [isDragging, toggleIsDragging] = useState(false);\n\n  const onSliderDragging = (e: MouseEvent) => {\n    toggleIsDragging(true);\n    onChange(e);\n  };\n\n  const onSliderDraggingEnd = () => {\n    toggleIsDragging(false);\n    window.removeEventListener('mousemove', onSliderDragging);\n    window.removeEventListener('mouseup', onSliderDraggingEnd);\n    window.removeEventListener('touchmove', onSliderDragging);\n    window.removeEventListener('touchend', onSliderDraggingEnd);\n  };\n\n  const handleSliderMouseDown = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    setPopupVisible(true);\n    window.addEventListener('mousemove', onSliderDragging);\n    window.addEventListener('mouseup', onSliderDraggingEnd);\n    window.addEventListener('touchmove', onSliderDragging);\n    window.addEventListener('touchend', onSliderDraggingEnd);\n  };\n\n  const handleSliderEnter = (event: React.MouseEvent) => {\n    event.stopPropagation();\n    setPopupVisible(true);\n  };\n\n  const handleSliderLeave = (event: React.MouseEvent) => {\n    event.stopPropagation();\n    setPopupVisible(false);\n  };\n\n  const handleNode = (\n    <div\n      style={style}\n      className={`${classPrefix}-slider__button-wrapper`}\n      onMouseDown={(e) => handleSliderMouseDown(e)}\n      onMouseEnter={(e) => handleSliderEnter(e)}\n      onMouseLeave={(e) => handleSliderLeave(e)}\n    >\n      <div\n        className={classNames(`${classPrefix}-slider__button`, {\n          [`${classPrefix}-slider__button--dragging`]: isDragging,\n        })}\n      ></div>\n    </div>\n  );\n\n  return hideTips ? (\n    handleNode\n  ) : (\n    <Tooltip visible={popupVisible} placement=\"top\" {...toolTipProps}>\n      {handleNode}\n    </Tooltip>\n  );\n};\n\nexport default SliderHandleButton;\n"],"names":["SliderHandleButton","onChange","_ref","style","classPrefix","toolTipProps","hideTips","_useState","useState","_useState2","_slicedToArray","popupVisible","setPopupVisible","_useState3","_useState4","isDragging","toggleIsDragging","onSliderDragging","e","onSliderDraggingEnd","window","removeEventListener","handleSliderMouseDown","stopPropagation","addEventListener","handleSliderEnter","event","handleSliderLeave","handleNode","React","createElement","className","onMouseDown","onMouseEnter","onMouseLeave","classNames","concat","_defineProperty","Tooltip","_objectSpread","visible","placement"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAaA,IAAMA,qBAAwD,SAAxDA,yBAMA;AAAA,EAAA,IALJC,QAAA,GAAAC,IAAA,CAAAD,QAAA;IACAE,KAAA,GAAAD,IAAA,CAAAC,KAAA;IACAC,WAAA,GAAAF,IAAA,CAAAE,WAAA;IACAC,YAAA,GAAAH,IAAA,CAAAG,YAAA;IACAC,QAAA,GAAAJ,IAAA,CAAAI,QAAA,CAAA;AAEA,EAAA,IAAAC,SAAA,GAAwCC,SAAS,KAAK,CAAA;IAAAC,UAAA,GAAAC,cAAA,CAAAH,SAAA,EAAA,CAAA,CAAA;AAA/CI,IAAAA,YAAA,GAAAF,UAAA,CAAA,CAAA,CAAA;AAAcG,IAAAA,eAAe,GAAAH,UAAA,CAAA,CAAA,CAAA,CAAA;AACpC,EAAA,IAAAI,UAAA,GAAuCL,SAAS,KAAK,CAAA;IAAAM,UAAA,GAAAJ,cAAA,CAAAG,UAAA,EAAA,CAAA,CAAA;AAA9CE,IAAAA,UAAA,GAAAD,UAAA,CAAA,CAAA,CAAA;AAAYE,IAAAA,gBAAgB,GAAAF,UAAA,CAAA,CAAA,CAAA,CAAA;AAE7B,EAAA,IAAAG,gBAAA,GAAmB,SAAnBA,gBAAAA,CAAoBC,CAAkB,EAAA;IAC1CF,gBAAA,CAAiB,IAAI,CAAA,CAAA;IACrBf,QAAA,CAASiB,CAAC,CAAA,CAAA;GACZ,CAAA;AAEA,EAAA,IAAMC,uBAAsB,SAAtBA,sBAA4B;IAChCH,gBAAA,CAAiB,KAAK,CAAA,CAAA;AACfI,IAAAA,MAAA,CAAAC,mBAAA,CAAoB,aAAaJ,gBAAgB,CAAA,CAAA;AACjDG,IAAAA,MAAA,CAAAC,mBAAA,CAAoB,WAAWF,oBAAmB,CAAA,CAAA;AAClDC,IAAAA,MAAA,CAAAC,mBAAA,CAAoB,aAAaJ,gBAAgB,CAAA,CAAA;AACjDG,IAAAA,MAAA,CAAAC,mBAAA,CAAoB,YAAYF,oBAAmB,CAAA,CAAA;GAC5D,CAAA;AAEM,EAAA,IAAAG,qBAAA,GAAwB,SAAxBA,qBAAAA,CAAyBJ,CAAwB,EAAA;IACrDA,CAAA,CAAEK,eAAgB,EAAA,CAAA;IAClBX,eAAA,CAAgB,IAAI,CAAA,CAAA;AACbQ,IAAAA,MAAA,CAAAI,gBAAA,CAAiB,aAAaP,gBAAgB,CAAA,CAAA;AAC9CG,IAAAA,MAAA,CAAAI,gBAAA,CAAiB,WAAWL,oBAAmB,CAAA,CAAA;AAC/CC,IAAAA,MAAA,CAAAI,gBAAA,CAAiB,aAAaP,gBAAgB,CAAA,CAAA;AAC9CG,IAAAA,MAAA,CAAAI,gBAAA,CAAiB,YAAYL,oBAAmB,CAAA,CAAA;GACzD,CAAA;AAEM,EAAA,IAAAM,iBAAA,GAAoB,SAApBA,iBAAAA,CAAqBC,KAA4B,EAAA;IACrDA,KAAA,CAAMH,eAAgB,EAAA,CAAA;IACtBX,eAAA,CAAgB,IAAI,CAAA,CAAA;GACtB,CAAA;AAEM,EAAA,IAAAe,iBAAA,GAAoB,SAApBA,iBAAAA,CAAqBD,KAA4B,EAAA;IACrDA,KAAA,CAAMH,eAAgB,EAAA,CAAA;IACtBX,eAAA,CAAgB,KAAK,CAAA,CAAA;GACvB,CAAA;EAEA,IAAMgB,4BACHC,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACC3B,IAAAA,KAAA,EAAAA,KAAA;AACA4B,IAAAA,qBAAc3B,WAAA,EAAA,yBAAA,CAAA;AACd4B,IAAAA,WAAa,EAAA,SAAbA,WAAaA,CAACd,CAAM,EAAA;MAAA,OAAAI,qBAAA,CAAsBJ,CAAC,CAAA,CAAA;AAAA,KAAA;AAC3Ce,IAAAA,YAAc,EAAA,SAAdA,YAAcA,CAACf,CAAM,EAAA;MAAA,OAAAO,iBAAA,CAAkBP,CAAC,CAAA,CAAA;AAAA,KAAA;AACxCgB,IAAAA,YAAc,EAAA,SAAdA,YAAcA,CAAChB,CAAM,EAAA;MAAA,OAAAS,iBAAA,CAAkBT,CAAC,CAAA,CAAA;AAAA,KAAA;AAAA,GAAA,iBAEvCW,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACCC,IAAAA,SAAA,EAAWI,UAAW,CAAAC,EAAAA,CAAAA,MAAA,CAAGhC,WAA8B,EAAA,iBAAA,CAAA,EAAAiC,eAAA,CAAA,EAAA,EAAA,EAAA,CAAAD,MAAA,CACjDhC,WAAyC,EAAA,2BAAA,CAAA,EAAAW,UAAA,CAC9C,CAAA;AAAA,GACF,CACH,CAAA,CAAA;EAGK,OAAAT,QAAA,GACLsB,4BAECC,KAAA,CAAAC,aAAA,CAAAQ,OAAA,EAAAC,aAAA,CAAA;AAAQC,IAAAA,OAAS,EAAA7B,YAAA;AAAc8B,IAAAA,SAAU,EAAA,KAAA;GAAUpC,EAAAA,YAAA,CACjDuB,EAAAA,UACH,CAAA,CAAA;AAEJ;;;;"}