{"version":3,"file":"Panel.js","sources":["../../../../components/cascader/components/Panel.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport classNames from 'classnames';\nimport Item from './Item';\n\nimport useConfig from '../../hooks/useConfig';\nimport { useLocaleReceiver } from '../../locale/LocalReceiver';\nimport { getPanels } from '../core/helper';\nimport { expendClickEffect, valueChangeEffect } from '../core/effect';\n\nimport { TreeNode, CascaderContextType } from '../interface';\nimport { TdCascaderProps } from '../type';\nimport { StyledProps } from '../../common';\n\nexport interface CascaderPanelProps\n  extends StyledProps,\n    Pick<TdCascaderProps, 'trigger' | 'empty' | 'onChange' | 'loading' | 'loadingText'> {\n  cascaderContext: CascaderContextType;\n}\n\nconst Panel = (props: CascaderPanelProps) => {\n  const { cascaderContext } = props;\n\n  const panels = useMemo(() => getPanels(cascaderContext.treeNodes), [cascaderContext.treeNodes]);\n\n  const handleExpand = (node: TreeNode, trigger: 'hover' | 'click') => {\n    const { trigger: propsTrigger, cascaderContext } = props;\n    expendClickEffect(propsTrigger, trigger, node, cascaderContext);\n  };\n\n  const { classPrefix } = useConfig();\n  const [global] = useLocaleReceiver('cascader');\n  const COMPONENT_NAME = `${classPrefix}-cascader`;\n\n  const renderItem = (node: TreeNode, index) => (\n    <Item\n      key={index}\n      node={node}\n      cascaderContext={cascaderContext}\n      onClick={() => {\n        handleExpand(node, 'click');\n      }}\n      onMouseEnter={() => {\n        handleExpand(node, 'hover');\n      }}\n      onChange={() => {\n        valueChangeEffect(node, cascaderContext);\n      }}\n    />\n  );\n\n  const renderList = (treeNodes: TreeNode[], isFilter = false, segment = true, key = '1') => (\n    <ul\n      className={classNames(`${COMPONENT_NAME}__menu`, 'narrow-scrollbar', {\n        [`${COMPONENT_NAME}__menu--segment`]: segment,\n        [`${COMPONENT_NAME}__menu--filter`]: isFilter,\n      })}\n      key={key}\n    >\n      {treeNodes.map((node: TreeNode, index: number) => renderItem(node, index))}\n    </ul>\n  );\n\n  const renderPanels = () => {\n    const { inputVal, treeNodes } = props.cascaderContext;\n    return inputVal\n      ? renderList(treeNodes, true)\n      : panels.map((treeNodes, index: number) =>\n          renderList(treeNodes, false, index !== panels.length - 1, `${COMPONENT_NAME}__menu${index}`),\n        );\n  };\n\n  let content;\n  if (props.loading) {\n    content = <div className={`${COMPONENT_NAME}__panel--empty`}>{props.loadingText ?? global.loadingText}</div>;\n  } else {\n    content = panels?.length ? (\n      renderPanels()\n    ) : (\n      <div className={`${COMPONENT_NAME}__panel--empty`}>{props.empty ?? global.empty}</div>\n    );\n  }\n  return (\n    <div\n      className={classNames(\n        `${COMPONENT_NAME}__panel`,\n        { [`${COMPONENT_NAME}--normal`]: panels.length && !props.loading },\n        props.className,\n      )}\n      style={props.style}\n    >\n      {content}\n    </div>\n  );\n};\n\nexport default Panel;\n"],"names":["Panel","props","cascaderContext","panels","useMemo","getPanels","treeNodes","handleExpand","node","trigger","propsTrigger","expendClickEffect","_useConfig","useConfig","classPrefix","_useLocaleReceiver","useLocaleReceiver","_useLocaleReceiver2","_slicedToArray","global","COMPONENT_NAME","renderItem","index","React","createElement","Item","key","onClick","onMouseEnter","onChange","valueChangeEffect","renderList","isFilter","arguments","length","undefined","segment","className","classNames","concat","_defineProperty","map","renderPanels","_props$cascaderContex","inputVal","content","loading","_props$loadingText","loadingText","_props$empty","empty","style"],"mappings":"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"}