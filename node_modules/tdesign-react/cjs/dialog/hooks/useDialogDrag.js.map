{"version":3,"file":"useDialogDrag.js","sources":["../../../../components/dialog/hooks/useDialogDrag.ts"],"sourcesContent":["export default function useDialogDrag(props) {\n  const { contentClickRef, dialogCardRef, canDraggable } = props;\n  const validWindow = typeof window === 'object';\n\n  const screenHeight = validWindow ? window.innerHeight || document.documentElement.clientHeight : undefined;\n  const screenWidth = validWindow ? window.innerWidth || document.documentElement.clientWidth : undefined;\n\n  let dialogOffset = { x: 0, y: 0 };\n  // 拖拽代码实现部分\n  const onDialogMove = (e: MouseEvent) => {\n    const { style, offsetWidth, offsetHeight } = dialogCardRef.current;\n\n    let diffX = e.clientX - dialogOffset.x;\n    let diffY = e.clientY - dialogOffset.y;\n    // 拖拽上左边界限制\n    if (diffX < 0) diffX = 0;\n    if (diffY < 0) diffY = 0;\n    if (screenWidth - offsetWidth - diffX < 0) diffX = screenWidth - offsetWidth;\n    if (screenHeight - offsetHeight - diffY < 0) diffY = screenHeight - offsetHeight;\n    style.position = 'absolute';\n    style.left = `${diffX}px`;\n    style.top = `${diffY}px`;\n  };\n\n  const onDialogMoveEnd = () => {\n    dialogCardRef.current.style.cursor = 'default';\n    document.removeEventListener('mousemove', onDialogMove);\n    document.removeEventListener('mouseup', onDialogMoveEnd);\n  };\n\n  const onDialogMoveStart = (e: React.MouseEvent<HTMLDivElement>) => {\n    contentClickRef.current = true;\n    // 阻止事件冒泡\n    if (canDraggable && e.currentTarget === e.target) {\n      const { offsetLeft, offsetTop, offsetHeight, offsetWidth } = dialogCardRef.current;\n      // 如果弹出框超出屏幕范围 不能进行拖拽\n      if (offsetWidth > screenWidth || offsetHeight > screenHeight) return;\n      dialogCardRef.current.style.cursor = 'move';\n      // 计算鼠标\n      const diffX = e.clientX - offsetLeft;\n      const diffY = e.clientY - offsetTop;\n      dialogOffset = {\n        x: diffX,\n        y: diffY,\n      };\n\n      document.addEventListener('mousemove', onDialogMove);\n      document.addEventListener('mouseup', onDialogMoveEnd);\n    }\n  };\n\n  return {\n    onDialogMoveStart,\n    onDialogMove,\n    onDialogMoveEnd,\n  };\n}\n"],"names":["useDialogDrag","props","contentClickRef","dialogCardRef","canDraggable","validWindow","window","_typeof","screenHeight","innerHeight","document","documentElement","clientHeight","screenWidth","innerWidth","clientWidth","dialogOffset","x","y","onDialogMove","e","_dialogCardRef$curren","current","style","offsetWidth","offsetHeight","diffX","clientX","diffY","clientY","position","left","top","onDialogMoveEnd","cursor","removeEventListener","onDialogMoveStart","currentTarget","target","_dialogCardRef$curren2","offsetLeft","offsetTop","addEventListener"],"mappings":"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"}