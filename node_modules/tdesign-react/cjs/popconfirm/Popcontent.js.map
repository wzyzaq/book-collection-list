{"version":3,"file":"Popcontent.js","sources":["../../../components/popconfirm/Popcontent.tsx"],"sourcesContent":["import React from 'react';\nimport { isString } from 'lodash-es';\nimport classNames from 'classnames';\nimport { InfoCircleFilledIcon as TdInfoCircleFilledIcon } from 'tdesign-icons-react';\nimport Button, { ButtonProps } from '../button';\nimport noop from '../_util/noop';\nimport useConfig from '../hooks/useConfig';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport type { PopconfirmProps } from './Popconfirm';\nimport type { PopconfirmVisibleChangeContext } from './type';\n\ninterface PopcontentProps {\n  onClose?: (context: PopconfirmVisibleChangeContext) => any;\n}\n\nconst Popcontent: React.FC<PopcontentProps & PopconfirmProps> = (props) => {\n  const { content, cancelBtn, confirmBtn, icon, theme, onCancel = noop, onConfirm = noop, onClose = noop } = props;\n\n  const { classPrefix } = useConfig();\n  const { InfoCircleFilledIcon } = useGlobalIcon({ InfoCircleFilledIcon: TdInfoCircleFilledIcon });\n\n  const hideCancel = cancelBtn === null || cancelBtn === undefined;\n  const hideConfirm = confirmBtn === null || confirmBtn === undefined;\n\n  function renderIcon() {\n    let color = '#0052D9';\n    // theme 为 default 时不展示图标，否则根据 theme 的值设置图标颜色样式\n    const defaultIcon = <InfoCircleFilledIcon />;\n\n    switch (theme) {\n      case 'warning': // 黄色\n        color = '#FFAA00';\n        break;\n      case 'danger':\n        color = '#FF3E00'; // 红色\n        break;\n    }\n\n    let iconComponent = null;\n\n    // icon 是自定义组件实例，优先级最高\n    if (React.isValidElement(icon)) {\n      iconComponent = React.cloneElement(icon, {\n        style: { color },\n        ...(icon.props as any),\n      });\n    } else if (defaultIcon) {\n      iconComponent = React.cloneElement(defaultIcon, {\n        style: { color },\n      });\n    }\n    return iconComponent;\n  }\n\n  function renderCancel() {\n    if (React.isValidElement(cancelBtn)) {\n      return React.cloneElement<any>(cancelBtn, {\n        onClick: (e) => {\n          onClose({ e, trigger: 'cancel' });\n          (cancelBtn as any).props?.onClick?.(e);\n        },\n      });\n    }\n\n    if (hideCancel) {\n      return null;\n    }\n\n    return (\n      <Button\n        size=\"small\"\n        theme=\"default\"\n        variant=\"base\"\n        onClick={(e) => {\n          onClose({ e, trigger: 'cancel' });\n          onCancel({ e });\n        }}\n        {...(typeof cancelBtn === 'object' ? { ...(cancelBtn as ButtonProps) } : {})}\n      >\n        {isString(cancelBtn) && cancelBtn}\n      </Button>\n    );\n  }\n\n  function renderConfirm() {\n    if (React.isValidElement(confirmBtn)) {\n      return React.cloneElement<any>(confirmBtn, {\n        onClick: (e) => {\n          onClose({ e, trigger: 'confirm' });\n          (confirmBtn as any).props?.onClick?.(e);\n        },\n      });\n    }\n\n    if (hideConfirm) {\n      return null;\n    }\n\n    return (\n      <Button\n        size=\"small\"\n        theme=\"primary\"\n        onClick={(e) => {\n          onClose({ e, trigger: 'confirm' });\n          onConfirm({ e });\n        }}\n        {...(typeof confirmBtn === 'object' ? { ...(confirmBtn as ButtonProps) } : {})}\n      >\n        {isString(confirmBtn) && confirmBtn}\n      </Button>\n    );\n  }\n\n  return (\n    <div className={`${classPrefix}-popconfirm__content ${props.className}`} style={props.style}>\n      <div className={`${classPrefix}-popconfirm__body`}>\n        {renderIcon()}\n        <div className={`${classPrefix}-popconfirm__inner`}>{content}</div>\n      </div>\n      <div className={`${classPrefix}-popconfirm__buttons`}>\n        <span className={classNames(`${classPrefix}-popconfirm__cancel`)}>{renderCancel()}</span>\n        <span className={classNames(`${classPrefix}-popconfirm__confirm`)}>{renderConfirm()}</span>\n      </div>\n    </div>\n  );\n};\n\nPopcontent.displayName = 'Popcontent';\n\nexport default Popcontent;\n"],"names":["Popcontent","props","content","cancelBtn","confirmBtn","icon","theme","_props$onCancel","onCancel","noop","_props$onConfirm","onConfirm","_props$onClose","onClose","_useConfig","useConfig","classPrefix","_useGlobalIcon","useGlobalIcon","InfoCircleFilledIcon","TdInfoCircleFilledIcon","hideCancel","hideConfirm","renderIcon","color","defaultIcon","iconComponent","React","isValidElement","cloneElement","_objectSpread","style","renderCancel","onClick","e","_cancelBtn$props","_cancelBtn$props$onCl","trigger","call","createElement","Button","size","variant","_typeof","isString","renderConfirm","_confirmBtn$props","_confirmBtn$props$onC","className","concat","classNames","displayName"],"mappings":"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"}