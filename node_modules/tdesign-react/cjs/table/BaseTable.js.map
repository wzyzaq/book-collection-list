{"version":3,"file":"BaseTable.js","sources":["../../../components/table/BaseTable.tsx"],"sourcesContent":["import React, {\n  useRef,\n  useMemo,\n  useImperativeHandle,\n  forwardRef,\n  useEffect,\n  useState,\n  WheelEvent,\n  RefAttributes,\n} from 'react';\nimport { pick } from 'lodash-es';\nimport classNames from 'classnames';\nimport { getIEVersion } from '@tdesign/common-js/utils/helper';\nimport log from '@tdesign/common-js/log/index';\nimport TBody, { extendTableProps, TableBodyProps } from './TBody';\nimport { Affix, AffixRef } from '../affix';\nimport { ROW_LISTENERS } from './TR';\nimport THead, { TheadProps } from './THead';\nimport TFoot from './TFoot';\nimport useTableHeader from './hooks/useTableHeader';\nimport useColumnResize from './hooks/useColumnResize';\nimport useElementLazyRender from '../hooks/useElementLazyRender';\nimport useFixed from './hooks/useFixed';\nimport useAffix from './hooks/useAffix';\nimport usePagination from './hooks/usePagination';\nimport Loading from '../loading';\nimport { BaseTableProps, BaseTableRef } from './interface';\nimport useStyle, { formatCSSUnit } from './hooks/useStyle';\nimport useClassName from './hooks/useClassName';\nimport { getAffixProps } from './utils';\nimport { baseTableDefaultProps } from './defaultProps';\nimport { Styles } from '../common';\nimport { TableRowData } from './type';\nimport useVirtualScroll from '../hooks/useVirtualScroll';\nimport useDefaultProps from '../hooks/useDefaultProps';\n\nexport const BASE_TABLE_EVENTS = ['page-change', 'cell-click', 'scroll', 'scrollX', 'scrollY'];\nexport const BASE_TABLE_ALL_EVENTS = ROW_LISTENERS.map((t) => `row-${t}`).concat(BASE_TABLE_EVENTS);\n\nexport interface TableListeners {\n  [key: string]: Function;\n}\n\nconst BaseTable = forwardRef<BaseTableRef, BaseTableProps>((originalProps, ref) => {\n  const props = useDefaultProps<BaseTableProps<TableRowData>>(originalProps, baseTableDefaultProps);\n  const {\n    showHeader = true,\n    tableLayout,\n    height,\n    data,\n    columns,\n    style,\n    headerAffixedTop,\n    bordered,\n    resizable,\n    lazyLoad,\n    pagination,\n  } = props;\n  const tableRef = useRef<HTMLDivElement>(null);\n  const tableElmRef = useRef<HTMLTableElement>(null);\n  const bottomContentRef = useRef<HTMLDivElement>(null);\n  const [tableFootHeight, setTableFootHeight] = useState(0);\n  const allTableClasses = useClassName();\n\n  const { classPrefix, virtualScrollClasses, tableLayoutClasses, tableBaseClass, tableColFixedClasses } =\n    allTableClasses;\n  // 表格基础样式类\n  const { tableClasses, sizeClassNames, tableContentStyles, tableElementStyles } = useStyle(props);\n  const { isMultipleHeader, spansAndLeafNodes, thList } = useTableHeader({ columns: props.columns });\n  const finalColumns = useMemo(\n    () => spansAndLeafNodes?.leafColumns || columns,\n    [spansAndLeafNodes?.leafColumns, columns],\n  );\n\n  const { showElement } = useElementLazyRender(tableRef, lazyLoad);\n  const paginationAffixRef = useRef<AffixRef>(null);\n  const horizontalScrollAffixRef = useRef<AffixRef>(null);\n  const headerTopAffixRef = useRef<AffixRef>(null);\n  const footerBottomAffixRef = useRef<AffixRef>(null);\n\n  // 1. 表头吸顶；2. 表尾吸底；3. 底部滚动条吸底；4. 分页器吸底\n  const {\n    affixHeaderRef,\n    affixFooterRef,\n    horizontalScrollbarRef,\n    paginationRef,\n    showAffixHeader,\n    showAffixFooter,\n    showAffixPagination,\n    onHorizontalScroll,\n    setTableContentRef,\n    updateAffixHeaderOrFooter,\n  } = useAffix(props, { showElement });\n\n  // 固定表头和固定列逻辑\n  const {\n    scrollbarWidth,\n    tableWidth,\n    tableElmWidth,\n    tableContentRef,\n    isFixedHeader,\n    isWidthOverflow,\n    isFixedColumn,\n    thWidthList,\n    showColumnShadow,\n    rowAndColFixedPosition,\n    setData,\n    refreshTable,\n    setTableElmWidth,\n    emitScrollEvent,\n    setUseFixedTableElmRef,\n    updateColumnFixedShadow,\n    getThWidthList,\n    updateThWidthList,\n    addTableResizeObserver,\n    updateTableAfterColumnResize,\n  } = useFixed(\n    props,\n    finalColumns,\n    // {\n    //   paginationAffixRef,\n    //   horizontalScrollAffixRef,\n    //   headerTopAffixRef,\n    //   footerBottomAffixRef,\n    // }\n  );\n\n  const { dataSource, innerPagination, isPaginateData, renderPagination } = usePagination(props);\n\n  // 列宽拖拽逻辑\n  const columnResizeParams = useColumnResize({\n    isWidthOverflow,\n    tableContentRef,\n    showColumnShadow,\n    getThWidthList,\n    updateThWidthList,\n    setTableElmWidth,\n    updateTableAfterColumnResize,\n    onColumnResizeChange: props.onColumnResizeChange,\n  });\n  const { resizeLineRef, resizeLineStyle, setEffectColMap, updateTableWidthOnColumnChange } = columnResizeParams;\n\n  const dynamicBaseTableClasses = classNames(\n    tableClasses.concat({\n      [tableBaseClass.headerFixed]: isFixedHeader,\n      [tableBaseClass.columnFixed]: isFixedColumn,\n      [tableBaseClass.widthOverflow]: isWidthOverflow,\n      [tableBaseClass.multipleHeader]: isMultipleHeader,\n      [tableColFixedClasses.leftShadow]: showColumnShadow.left,\n      [tableColFixedClasses.rightShadow]: showColumnShadow.right,\n      [tableBaseClass.columnResizableTable]: props.resizable,\n    }),\n  );\n\n  const tableElmClasses = classNames([\n    [tableLayoutClasses[tableLayout || 'fixed']],\n    { [tableBaseClass.fullHeight]: height },\n  ]);\n\n  const showRightDivider = useMemo(\n    () => props.bordered && isFixedHeader && ((isMultipleHeader && isWidthOverflow) || !isMultipleHeader),\n    [isFixedHeader, isMultipleHeader, isWidthOverflow, props.bordered],\n  );\n\n  const [dividerBottom, setDividerBottom] = useState(0);\n  useEffect(() => {\n    if (!bordered) return;\n    const bottomRect = bottomContentRef.current?.getBoundingClientRect();\n    const paginationRect = paginationRef.current?.getBoundingClientRect();\n    const bottom = (bottomRect?.height || 0) + (paginationRect?.height || 0);\n    setDividerBottom(bottom);\n  }, [bottomContentRef, paginationRef, bordered]);\n\n  useEffect(() => {\n    setUseFixedTableElmRef(tableElmRef.current);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableElmRef]);\n\n  useEffect(() => {\n    setData(isPaginateData ? dataSource : props.data);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.data, dataSource, isPaginateData]);\n\n  const [lastLeafColumns, setLastLeafColumns] = useState(props.columns || []);\n\n  useEffect(() => {\n    if (lastLeafColumns.map((t) => t.colKey).join() !== spansAndLeafNodes.leafColumns.map((t) => t.colKey).join()) {\n      props.onLeafColumnsChange?.(spansAndLeafNodes.leafColumns);\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      setLastLeafColumns(spansAndLeafNodes.leafColumns);\n    }\n    setEffectColMap(spansAndLeafNodes.leafColumns, null);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [spansAndLeafNodes.leafColumns]);\n\n  const onFixedChange = () => {\n    const timer = setTimeout(() => {\n      onHorizontalScroll();\n      updateAffixHeaderOrFooter();\n      clearTimeout(timer);\n    }, 0);\n  };\n\n  const virtualScrollParams = useMemo(\n    () => ({\n      data,\n      scroll: { ...props.scroll, fixedRows: props.fixedRows },\n    }),\n    [data, props.scroll, props.fixedRows],\n  );\n  const virtualConfig = useVirtualScroll(tableContentRef, virtualScrollParams);\n\n  let lastScrollY = -1;\n  const onInnerVirtualScroll = (e: WheelEvent<HTMLDivElement>) => {\n    const target = e.target as HTMLElement;\n    const top = target.scrollTop;\n    // 排除横向滚动触发的纵向虚拟滚动计算\n    if (lastScrollY !== top) {\n      virtualConfig.isVirtualScroll && virtualConfig.handleScroll();\n    } else {\n      lastScrollY = -1;\n      updateColumnFixedShadow(target);\n    }\n    lastScrollY = top;\n    emitScrollEvent(e);\n  };\n\n  /**\n   * 横向滚动到指定列\n   * 对外暴露方法，修改时需谨慎（expose）\n   * @param colKey\n   * @returns\n   */\n  const scrollColumnIntoView = (colKey: string) => {\n    if (!tableContentRef.current) return;\n    const thDom = tableContentRef.current.querySelector(`th[data-colkey=\"${colKey}\"]`);\n    const fixedThDom = tableContentRef.current.querySelectorAll('th.t-table__cell--fixed-left');\n    let totalWidth = 0;\n    for (let i = 0, len = fixedThDom.length; i < len; i++) {\n      totalWidth += fixedThDom[i].getBoundingClientRect().width;\n    }\n    const domRect = thDom.getBoundingClientRect();\n    const contentRect = tableContentRef.current.getBoundingClientRect();\n    const distance = domRect.left - contentRect.left - totalWidth;\n    tableContentRef.current.scrollTo({ left: distance, behavior: 'smooth' });\n  };\n\n  useImperativeHandle(ref, () => ({\n    showColumnShadow,\n    tableElement: tableRef.current,\n    tableHtmlElement: tableElmRef.current,\n    tableContentElement: tableContentRef.current,\n    affixHeaderElement: affixHeaderRef.current,\n    refreshTable,\n    scrollToElement: virtualConfig.scrollToElement,\n    scrollColumnIntoView,\n    updateTableWidthOnColumnChange,\n  }));\n\n  // used for top margin\n  const getTFootHeight = () => {\n    const timer = setTimeout(() => {\n      if (!tableElmRef.current) return;\n      const height = tableElmRef.current.querySelector('tfoot')?.getBoundingClientRect().height;\n      setTableFootHeight(height);\n    }, 1);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  };\n\n  useEffect(() => {\n    setTableContentRef(tableContentRef.current);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableContentRef]);\n\n  useEffect(\n    () => addTableResizeObserver(tableRef.current),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [tableRef],\n  );\n\n  useEffect(getTFootHeight, [tableElmRef, props.footData, props.footerSummary]);\n\n  const newData = isPaginateData ? dataSource : data;\n\n  const renderColGroup = (isFixedHeader = true) => (\n    <colgroup>\n      {finalColumns.map((col) => {\n        const style: Styles = {\n          width: formatCSSUnit((isFixedHeader || resizable ? thWidthList.current[col.colKey] : undefined) || col.width),\n        };\n        if (col.minWidth) {\n          style.minWidth = formatCSSUnit(col.minWidth);\n        }\n        // 没有设置任何宽度的场景下，需要保留表格正常显示的最小宽度，否则会出现因宽度过小的抖动问题\n        if (!style.width && !col.minWidth && props.tableLayout === 'fixed') {\n          style.minWidth = '80px';\n        }\n        return <col key={col.colKey} style={style} />;\n      })}\n    </colgroup>\n  );\n  const headProps: TheadProps = {\n    isFixedHeader,\n    rowAndColFixedPosition,\n    isMultipleHeader,\n    bordered: props.bordered,\n    maxHeight: props.maxHeight,\n    height: props.height,\n    spansAndLeafNodes,\n    thList,\n    thWidthList: thWidthList.current,\n    resizable: props.resizable,\n    columnResizeParams,\n    classPrefix,\n    ellipsisOverlayClassName: props.size !== 'medium' ? sizeClassNames[props.size] : '',\n    attach: props.attach,\n    thDraggable: props.thDraggable,\n    showColumnShadow,\n  };\n\n  const headUseMemoDependencies = [\n    resizable,\n    thWidthList,\n    isFixedHeader,\n    rowAndColFixedPosition,\n    isMultipleHeader,\n    spansAndLeafNodes,\n    thList,\n    columnResizeParams,\n    classPrefix,\n    props.bordered,\n    props.resizable,\n    props.size,\n  ];\n\n  // 多级表头左边线缺失\n  const affixedLeftBorder = props.bordered ? 1 : 0;\n\n  // IE浏览器需要遮挡header吸顶滚动条，要减去getBoundingClientRect.height的滚动条高度4像素\n  const IEHeaderWrap = getIEVersion() <= 11 ? 4 : 0;\n  const affixHeaderHeight = (affixHeaderRef.current?.getBoundingClientRect().height || 0) - IEHeaderWrap;\n  /**\n   * Affixed Header\n   */\n  const renderFixedHeader = () => {\n    if (!showHeader) return null;\n    // 两类场景：1. 虚拟滚动，永久显示表头，直到表头消失在可视区域； 2. 表头吸顶，根据滚动情况判断是否显示吸顶表头\n    const headerOpacity = headerAffixedTop ? Number(showAffixHeader) : 1;\n    const barWidth = isWidthOverflow ? scrollbarWidth : 0;\n    const affixHeaderWrapHeight = affixHeaderHeight - barWidth;\n    const affixHeaderWrapHeightStyle = {\n      width: `${tableWidth.current}px`,\n      height: `${affixHeaderWrapHeight}px`,\n      opacity: headerOpacity,\n    };\n    const affixedHeader = Boolean((headerAffixedTop || virtualConfig.isVirtualScroll) && tableWidth.current) && (\n      <div\n        ref={affixHeaderRef}\n        style={{ width: `${tableWidth.current - affixedLeftBorder}px`, opacity: headerOpacity }}\n        className={classNames([\n          'scrollbar',\n          {\n            [tableBaseClass.affixedHeaderElm]: props.headerAffixedTop || virtualConfig.isVirtualScroll,\n          },\n        ])}\n      >\n        <table\n          className={classNames(tableElmClasses)}\n          style={{ ...tableElementStyles, width: tableElmWidth.current ? `${tableElmWidth.current}px` : undefined }}\n        >\n          {renderColGroup(true)}\n          {showHeader && <THead {...headProps} />}\n        </table>\n      </div>\n    );\n\n    // 添加这一层，是为了隐藏表头的横向滚动条。如果以后不需要照顾 IE 10 以下的项目，则可直接移除这一层\n    // 彼时，可更为使用 CSS 样式中的 .hideScrollbar()\n    const affixHeaderWithWrap = (\n      <div className={tableBaseClass.affixedHeaderWrap} style={affixHeaderWrapHeightStyle}>\n        {affixedHeader}\n      </div>\n    );\n    return affixHeaderWithWrap;\n  };\n\n  const renderAffixedHeader = () => {\n    if (!showHeader) return null;\n    return (\n      !!(virtualConfig.isVirtualScroll || props.headerAffixedTop) &&\n      (props.headerAffixedTop ? (\n        <Affix\n          offsetTop={0}\n          {...getAffixProps(props.headerAffixedTop, props.headerAffixProps)}\n          ref={headerTopAffixRef}\n          onFixedChange={onFixedChange}\n        >\n          {renderFixedHeader()}\n        </Affix>\n      ) : (\n        isFixedHeader && renderFixedHeader()\n      ))\n    );\n  };\n\n  /**\n   * Affixed Footer\n   */\n  const renderAffixedFooter = () => {\n    let marginScrollbarWidth = isWidthOverflow ? scrollbarWidth : 0;\n    if (bordered) {\n      marginScrollbarWidth += 1;\n    }\n    // Hack: Affix 组件，marginTop 临时使用 负 margin 定位位置\n    const affixedFooter = Boolean(\n      (virtualConfig.isVirtualScroll || props.footerAffixedBottom) && props.footData?.length && tableWidth.current,\n    ) && (\n      <Affix\n        className={tableBaseClass.affixedFooterWrap}\n        onFixedChange={onFixedChange}\n        offsetBottom={marginScrollbarWidth || 0}\n        {...getAffixProps(props.footerAffixedBottom)}\n        ref={footerBottomAffixRef}\n        style={{ marginTop: `${-1 * ((tableFootHeight || 0) + marginScrollbarWidth)}px` }}\n      >\n        <div\n          ref={affixFooterRef}\n          style={{ width: `${tableWidth.current - affixedLeftBorder}px`, opacity: Number(showAffixFooter) }}\n          className={classNames([\n            'scrollbar',\n            { [tableBaseClass.affixedFooterElm]: props.footerAffixedBottom || virtualConfig.isVirtualScroll },\n          ])}\n        >\n          <table\n            className={tableElmClasses}\n            style={{ ...tableElementStyles, width: tableElmWidth.current ? `${tableElmWidth.current}px` : undefined }}\n          >\n            {renderColGroup(true)}\n            <TFoot\n              rowKey={props.rowKey}\n              isFixedHeader={isFixedHeader}\n              rowAndColFixedPosition={rowAndColFixedPosition}\n              footData={props.footData}\n              columns={spansAndLeafNodes?.leafColumns || columns}\n              rowAttributes={props.rowAttributes}\n              rowClassName={props.rowClassName}\n              thWidthList={thWidthList.current}\n              footerSummary={props.footerSummary}\n              rowspanAndColspanInFooter={props.rowspanAndColspanInFooter}\n            ></TFoot>\n          </table>\n        </div>\n      </Affix>\n    );\n    return affixedFooter;\n  };\n\n  const tableBodyProps: TableBodyProps = {\n    classPrefix,\n    ellipsisOverlayClassName: props.size !== 'medium' ? sizeClassNames[props.size] : '',\n    rowAndColFixedPosition,\n    showColumnShadow,\n    data: newData,\n    virtualConfig,\n    handleRowMounted: virtualConfig.handleRowMounted,\n    columns: spansAndLeafNodes?.leafColumns || columns,\n    tableRef,\n    tableContentRef,\n    tableWidth,\n    isWidthOverflow,\n    allTableClasses,\n    rowKey: props.rowKey || 'id',\n    scroll: props.scroll,\n    cellEmptyContent: props.cellEmptyContent,\n    renderExpandedRow: props.renderExpandedRow,\n    ...pick(props, extendTableProps),\n    pagination: innerPagination,\n  };\n  const translate = `translate(0, ${virtualConfig.scrollHeight + (affixHeaderHeight || 0) + (tableFootHeight || 0)}px)`;\n  const virtualStyle = {\n    transform: translate,\n    msTransform: translate,\n    MozTransform: translate,\n    WebkitTransform: translate,\n  };\n  const tableContent = (\n    <div\n      ref={tableContentRef}\n      className={tableBaseClass.content}\n      style={tableContentStyles}\n      onScroll={onInnerVirtualScroll}\n    >\n      {virtualConfig.isVirtualScroll && <div className={virtualScrollClasses.cursor} style={virtualStyle} />}\n\n      <table\n        ref={tableElmRef}\n        className={classNames(tableElmClasses)}\n        style={{\n          ...tableElementStyles,\n          width:\n            resizable && isWidthOverflow && tableElmWidth.current\n              ? `${tableElmWidth.current}px`\n              : tableElementStyles.width,\n        }}\n      >\n        {renderColGroup(false)}\n        {useMemo(() => {\n          if (!showHeader) return null;\n          return <THead {...{ ...headProps, thWidthList: resizable ? thWidthList.current : {} }} />;\n          // eslint-disable-next-line\n        }, headUseMemoDependencies)}\n\n        {useMemo(\n          () => (\n            <TBody {...tableBodyProps} />\n          ),\n          // eslint-disable-next-line\n          [\n            allTableClasses,\n            tableBodyProps.ellipsisOverlayClassName,\n            tableBodyProps.rowAndColFixedPosition,\n            tableBodyProps.showColumnShadow,\n            tableBodyProps.data,\n            tableBodyProps.columns,\n            tableRef,\n            tableContentRef,\n            tableWidth,\n            isWidthOverflow,\n            virtualConfig,\n            props.rowKey,\n            props.rowClassName,\n            props.rowAttributes,\n            props.loading,\n            props.empty,\n            props.fixedRows,\n            props.firstFullRow,\n            props.lastFullRow,\n            props.rowspanAndColspan,\n            props.scroll,\n            props.cellEmptyContent,\n          ],\n        )}\n\n        {useMemo(\n          () => (\n            <TFoot\n              rowKey={props.rowKey}\n              isFixedHeader={isFixedHeader}\n              rowAndColFixedPosition={rowAndColFixedPosition}\n              footData={props.footData}\n              columns={spansAndLeafNodes?.leafColumns || columns}\n              rowAttributes={props.rowAttributes}\n              rowClassName={props.rowClassName}\n              thWidthList={thWidthList.current}\n              footerSummary={props.footerSummary}\n              rowspanAndColspanInFooter={props.rowspanAndColspanInFooter}\n              virtualScroll={virtualConfig.isVirtualScroll}\n            ></TFoot>\n          ),\n          // eslint-disable-next-line\n          [\n            isFixedHeader,\n            rowAndColFixedPosition,\n            spansAndLeafNodes,\n            columns,\n            thWidthList,\n            props.rowKey,\n            props.footData,\n            props.rowAttributes,\n            props.rowClassName,\n            props.footerSummary,\n            virtualConfig.isVirtualScroll,\n          ],\n        )}\n      </table>\n    </div>\n  );\n\n  const { loading, loadingProps } = props;\n  const customLoadingText = loading;\n  const loadingContent = loading !== undefined && (\n    <Loading\n      loading={!!loading}\n      text={customLoadingText}\n      attach={() => tableRef.current}\n      showOverlay\n      size=\"small\"\n      {...loadingProps}\n    ></Loading>\n  );\n\n  const { topContent, bottomContent } = props;\n  const paginationNode = pagination ? (\n    <div ref={paginationRef} className={tableBaseClass.paginationWrap} style={{ opacity: Number(showAffixPagination) }}>\n      {renderPagination()}\n    </div>\n  ) : null;\n  const bottom = !!bottomContent && (\n    <div ref={bottomContentRef} className={tableBaseClass.bottomContent}>\n      {bottomContent}\n    </div>\n  );\n\n  const affixedHeaderContent = useMemo(\n    renderAffixedHeader,\n    // eslint-disable-next-line\n    [\n      // eslint-disable-next-line\n      ...headUseMemoDependencies,\n      showAffixHeader,\n      tableWidth,\n      tableElmWidth,\n      affixHeaderRef,\n      affixedLeftBorder,\n      tableElmClasses,\n      tableElementStyles,\n      columns,\n      spansAndLeafNodes,\n      showHeader,\n      props.headerAffixedTop,\n    ],\n  );\n\n  const affixedFooterContent = useMemo(\n    renderAffixedFooter,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      showAffixFooter,\n      isFixedHeader,\n      rowAndColFixedPosition,\n      spansAndLeafNodes,\n      columns,\n      thWidthList,\n      tableBaseClass,\n      tableElementStyles,\n      tableElmWidth,\n      affixFooterRef,\n      affixedLeftBorder,\n      bordered,\n      isWidthOverflow,\n      scrollbarWidth,\n      tableElmClasses,\n      tableFootHeight,\n      tableWidth,\n      virtualConfig.isVirtualScroll,\n      props.rowKey,\n      props.footData,\n      props.rowAttributes,\n      props.rowClassName,\n      props.footerSummary,\n      props.footerAffixedBottom,\n      props.rowspanAndColspanInFooter,\n      tableWidth.current,\n    ],\n  );\n\n  const scrollbarDivider = useMemo(() => {\n    if (!showRightDivider) return null;\n    return (\n      <div\n        className={tableBaseClass.scrollbarDivider}\n        style={{\n          right: `${scrollbarWidth}px`,\n          bottom: dividerBottom ? `${dividerBottom}px` : undefined,\n          height: `${tableContentRef.current?.getBoundingClientRect().height}px`,\n        }}\n      ></div>\n    );\n  }, [tableBaseClass, showRightDivider, scrollbarWidth, dividerBottom, tableContentRef]);\n\n  const affixedScrollbar = props.horizontalScrollAffixedBottom && (\n    <Affix\n      offsetBottom={0}\n      {...getAffixProps(props.horizontalScrollAffixedBottom)}\n      ref={horizontalScrollAffixRef}\n      style={{ marginTop: `-${scrollbarWidth * 2}px` }}\n    >\n      <div\n        ref={horizontalScrollbarRef}\n        className={classNames(['scrollbar', tableBaseClass.obviousScrollbar])}\n        style={{\n          width: `${tableWidth.current}px`,\n          overflow: 'auto',\n          opacity: Number(showAffixFooter),\n        }}\n      >\n        <div style={{ width: `${tableElmWidth.current}px`, height: '5px' }}></div>\n      </div>\n    </Affix>\n  );\n\n  const affixedPaginationContent = props.paginationAffixedBottom ? (\n    <Affix offsetBottom={0} {...getAffixProps(props.paginationAffixedBottom)} ref={paginationAffixRef}>\n      {paginationNode}\n    </Affix>\n  ) : (\n    paginationNode\n  );\n\n  const tableElements = (\n    <>\n      {!!topContent && <div className={tableBaseClass.topContent}>{topContent}</div>}\n\n      {affixedHeaderContent}\n\n      {tableContent}\n\n      {/* eslint-disable-next-line */}\n      {affixedFooterContent}\n\n      {loadingContent}\n\n      {scrollbarDivider}\n\n      {bottom}\n\n      {/* 吸底的滚动条 */}\n      {affixedScrollbar}\n\n      {/* 吸底的分页器 */}\n      {affixedPaginationContent}\n\n      {/* 调整列宽时的指示线。由于层级需要比较高，因而放在根节点，避免被吸顶表头覆盖。非必要情况，请勿调整辅助线位置 */}\n      {resizable && <div ref={resizeLineRef} className={tableBaseClass.resizeLine} style={resizeLineStyle}></div>}\n    </>\n  );\n\n  if (resizable && tableLayout === 'auto') {\n    log.warn(\n      'Table',\n      'table-layout can not be `auto`, cause you are using column resizable, set `table-layout: fixed` please.',\n    );\n  }\n\n  if (!showElement) {\n    <div ref={tableRef}></div>;\n  }\n\n  return (\n    <div ref={tableRef} className={classNames(dynamicBaseTableClasses)} style={{ position: 'relative', ...style }}>\n      {tableElements}\n    </div>\n  );\n});\n\nBaseTable.displayName = 'BaseTable';\n\nexport default BaseTable as <T extends TableRowData = TableRowData>(\n  props: BaseTableProps<T> & RefAttributes<BaseTableRef>,\n) => React.ReactElement;\n"],"names":["BASE_TABLE_EVENTS","BASE_TABLE_ALL_EVENTS","ROW_LISTENERS","map","t","concat","BaseTable","forwardRef","originalProps","ref","_affixHeaderRef$curre","props","useDefaultProps","baseTableDefaultProps","_props$showHeader","showHeader","tableLayout","height","data","columns","style","headerAffixedTop","bordered","resizable","lazyLoad","pagination","tableRef","useRef","tableElmRef","bottomContentRef","_useState","useState","_useState2","_slicedToArray","tableFootHeight","setTableFootHeight","allTableClasses","useClassName","classPrefix","virtualScrollClasses","tableLayoutClasses","tableBaseClass","tableColFixedClasses","_useStyle","useStyle","tableClasses","sizeClassNames","tableContentStyles","tableElementStyles","_useTableHeader","useTableHeader","isMultipleHeader","spansAndLeafNodes","thList","finalColumns","useMemo","leafColumns","_useElementLazyRender","useElementLazyRender","showElement","paginationAffixRef","horizontalScrollAffixRef","headerTopAffixRef","footerBottomAffixRef","_useAffix","useAffix","affixHeaderRef","affixFooterRef","horizontalScrollbarRef","paginationRef","showAffixHeader","showAffixFooter","showAffixPagination","onHorizontalScroll","setTableContentRef","updateAffixHeaderOrFooter","_useFixed","useFixed","scrollbarWidth","tableWidth","tableElmWidth","tableContentRef","isFixedHeader","isWidthOverflow","isFixedColumn","thWidthList","showColumnShadow","rowAndColFixedPosition","setData","refreshTable","setTableElmWidth","emitScrollEvent","setUseFixedTableElmRef","updateColumnFixedShadow","getThWidthList","updateThWidthList","addTableResizeObserver","updateTableAfterColumnResize","_usePagination","usePagination","dataSource","innerPagination","isPaginateData","renderPagination","columnResizeParams","useColumnResize","onColumnResizeChange","resizeLineRef","resizeLineStyle","setEffectColMap","updateTableWidthOnColumnChange","dynamicBaseTableClasses","classNames","_defineProperty","headerFixed","columnFixed","widthOverflow","multipleHeader","leftShadow","left","rightShadow","right","columnResizableTable","tableElmClasses","fullHeight","showRightDivider","_useState3","_useState4","dividerBottom","setDividerBottom","useEffect","_bottomContentRef$cur","_paginationRef$curren","bottomRect","current","getBoundingClientRect","paginationRect","bottom","_useState5","_useState6","lastLeafColumns","setLastLeafColumns","colKey","join","_props$onLeafColumnsC","onLeafColumnsChange","call","onFixedChange","timer","setTimeout","clearTimeout","virtualScrollParams","scroll","fixedRows","virtualConfig","useVirtualScroll","lastScrollY","onInnerVirtualScroll","e","target","top","scrollTop","isVirtualScroll","handleScroll","scrollColumnIntoView","thDom","querySelector","fixedThDom","querySelectorAll","totalWidth","i","len","length","width","domRect","contentRect","distance","scrollTo","behavior","useImperativeHandle","tableElement","tableHtmlElement","tableContentElement","affixHeaderElement","scrollToElement","getTFootHeight","_tableElmRef$current$","footData","footerSummary","newData","renderColGroup","arguments","undefined","col","formatCSSUnit","minWidth","React","createElement","key","headProps","maxHeight","ellipsisOverlayClassName","size","attach","thDraggable","headUseMemoDependencies","affixedLeftBorder","IEHeaderWrap","getIEVersion","affixHeaderHeight","renderFixedHeader","headerOpacity","Number","barWidth","affixHeaderWrapHeight","affixHeaderWrapHeightStyle","opacity","affixedHeader","Boolean","className","affixedHeaderElm","_objectSpread","THead","affixHeaderWithWrap","affixedHeaderWrap","renderAffixedHeader","Affix","offsetTop","getAffixProps","headerAffixProps","renderAffixedFooter","_props$footData","marginScrollbarWidth","affixedFooter","footerAffixedBottom","affixedFooterWrap","offsetBottom","marginTop","affixedFooterElm","TFoot","rowKey","rowAttributes","rowClassName","rowspanAndColspanInFooter","tableBodyProps","handleRowMounted","cellEmptyContent","renderExpandedRow","pick","extendTableProps","translate","scrollHeight","virtualStyle","transform","msTransform","MozTransform","WebkitTransform","tableContent","content","onScroll","cursor","TBody","loading","empty","firstFullRow","lastFullRow","rowspanAndColspan","virtualScroll","loadingProps","customLoadingText","loadingContent","Loading","text","showOverlay","topContent","bottomContent","paginationNode","paginationWrap","affixedHeaderContent","affixedFooterContent","scrollbarDivider","_tableContentRef$curr","affixedScrollbar","horizontalScrollAffixedBottom","obviousScrollbar","overflow","affixedPaginationContent","paginationAffixedBottom","tableElements","Fragment","resizeLine","log","warn","position","displayName"],"mappings":"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"}