{"version":3,"file":"Drawer.js","sources":["../../../components/drawer/Drawer.tsx"],"sourcesContent":["import React, { forwardRef, useState, useEffect, useImperativeHandle, useRef, useMemo, isValidElement } from 'react';\nimport classnames from 'classnames';\nimport { isString, isObject, isFunction, isUndefined } from 'lodash-es';\n\nimport { CSSTransition } from 'react-transition-group';\nimport { CloseIcon as TdCloseIcon } from 'tdesign-icons-react';\n\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport type { TdDrawerProps, DrawerEventSource, DrawerInstance } from './type';\nimport { StyledProps } from '../common';\nimport Button, { ButtonProps } from '../button';\nimport useConfig from '../hooks/useConfig';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport { drawerDefaultProps } from './defaultProps';\nimport useDrag from './hooks/useDrag';\nimport Portal from '../common/Portal';\nimport useLockStyle from './hooks/useLockStyle';\nimport useDefaultProps from '../hooks/useDefaultProps';\nimport parseTNode from '../_util/parseTNode';\nimport useAttach from '../hooks/useAttach';\nimport useSetState from '../hooks/useSetState';\n\nexport const CloseTriggerType: { [key: string]: DrawerEventSource } = {\n  CLICK_OVERLAY: 'overlay',\n  CLICK_CLOSE_BTN: 'close-btn',\n  CLICK_CANCEL_BTN: 'cancel',\n  KEYDOWN_ESC: 'esc',\n};\n\nexport interface DrawerProps extends TdDrawerProps, StyledProps {\n  isPlugin?: boolean; // 是否以插件形式调用\n}\n\nconst Drawer = forwardRef<DrawerInstance, DrawerProps>((originalProps, ref) => {\n  // 国际化文本初始化\n  const [local, t] = useLocaleReceiver('drawer');\n  const { CloseIcon } = useGlobalIcon({ CloseIcon: TdCloseIcon });\n  const confirmText = t(local.confirm);\n  const cancelText = t(local.cancel);\n\n  const props = useDefaultProps<DrawerProps>(originalProps, drawerDefaultProps);\n  const [state, setState] = useSetState<DrawerProps>({ isPlugin: false, ...props });\n  const {\n    className,\n    style,\n    visible,\n    attach,\n    showOverlay,\n    size: propsSize,\n    placement,\n    onBeforeOpen,\n    onBeforeClose,\n    onCancel,\n    onConfirm,\n    onClose,\n    onCloseBtnClick,\n    onOverlayClick,\n    onEscKeydown,\n    onSizeDragEnd,\n    showInAttachedElement,\n    closeOnOverlayClick,\n    closeOnEscKeydown,\n    children,\n    header,\n    body,\n    footer,\n    closeBtn,\n    cancelBtn = cancelText,\n    confirmBtn = confirmText,\n    zIndex,\n    destroyOnClose,\n    sizeDraggable,\n    forceRender,\n    isPlugin,\n    lazy,\n  } = state;\n\n  const size = propsSize ?? local.size;\n  const { classPrefix } = useConfig();\n  const drawerAttach = useAttach('drawer', attach);\n  const maskRef = useRef<HTMLDivElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const drawerWrapperRef = useRef<HTMLElement>(null); // 即最终的 attach dom，默认为 document.body\n  const prefixCls = `${classPrefix}-drawer`;\n\n  const closeIcon = isValidElement(closeBtn) ? closeBtn : <CloseIcon />;\n  const { dragSizeValue, enableDrag, draggableLineStyles } = useDrag(placement, sizeDraggable, onSizeDragEnd);\n  const [animationStart, setAnimationStart] = useState(visible);\n\n  const sizeValue = useMemo(() => {\n    const sizeMap = { small: '300px', medium: '500px', large: '760px' };\n    return dragSizeValue || sizeMap[size] || size;\n  }, [dragSizeValue, size]);\n\n  useLockStyle({ ...state, sizeValue, drawerWrapper: drawerWrapperRef.current });\n  useImperativeHandle(ref, () => ({\n    show() {\n      setState({ visible: true });\n    },\n    hide() {\n      setState({ visible: false });\n    },\n    destroy() {\n      setState({ visible: false, destroyOnClose: true });\n    },\n    update(options) {\n      setState((prevState) => ({ ...prevState, ...options }));\n    },\n  }));\n\n  useEffect(() => {\n    if (visible) {\n      // 聚焦到 Drawer 最外层元素即 containerRef.current，KeyDown 事件才有效。\n      containerRef.current?.focus?.();\n    }\n  }, [visible]);\n\n  useEffect(() => {\n    // 非插件式调用 更新props\n    if (!isPlugin) {\n      setState((prevState) => ({ ...prevState, ...props }));\n    }\n  }, [isPlugin, props, setState]);\n\n  function onMaskClick(e: React.MouseEvent<HTMLDivElement>) {\n    onOverlayClick?.({ e });\n    (closeOnOverlayClick ?? local.closeOnOverlayClick) && onClose?.({ e, trigger: CloseTriggerType.CLICK_OVERLAY });\n  }\n  function onClickCloseBtn(e: React.MouseEvent<HTMLDivElement>) {\n    onCloseBtnClick?.({ e });\n    onClose?.({ e, trigger: CloseTriggerType.CLICK_CLOSE_BTN });\n  }\n  function onKeyDownEsc(e: React.KeyboardEvent<HTMLDivElement>) {\n    if (e.key !== 'Escape') return;\n\n    onEscKeydown?.({ e });\n    (closeOnEscKeydown ?? local.closeOnEscKeydown) && onClose?.({ e, trigger: CloseTriggerType.KEYDOWN_ESC });\n  }\n  function onCancelClick(e: React.MouseEvent<HTMLButtonElement>) {\n    onCancel?.({ e });\n    onClose?.({ e, trigger: CloseTriggerType.CLICK_CANCEL_BTN });\n  }\n  function onConfirmClick(e: React.MouseEvent<HTMLButtonElement>) {\n    onConfirm?.({ e });\n  }\n\n  const contentWrapperStyle = useMemo(\n    () => ({\n      transform: visible && animationStart ? 'translateX(0)' : undefined,\n      width: ['left', 'right'].includes(placement) ? sizeValue : '',\n      height: ['top', 'bottom'].includes(placement) ? sizeValue : '',\n    }),\n    [visible, placement, sizeValue, animationStart],\n  );\n\n  const renderDrawerButton = (btn: DrawerProps['cancelBtn'], defaultProps: ButtonProps) => {\n    let result = null;\n\n    if (isString(btn)) {\n      result = <Button {...defaultProps}>{btn}</Button>;\n    } else if (isValidElement(btn)) {\n      result = btn;\n    } else if (isObject(btn)) {\n      result = <Button {...defaultProps} {...(btn as {})} />;\n    } else if (isFunction(btn)) {\n      result = btn();\n    }\n\n    return result;\n  };\n\n  const renderFooter = () => {\n    const defaultFooter = () => {\n      const renderCancelBtn = renderDrawerButton(cancelBtn, {\n        theme: 'default',\n        onClick: (e: React.MouseEvent<HTMLButtonElement>) => onCancelClick?.(e),\n        className: `${prefixCls}__cancel`,\n      });\n      const renderConfirmBtn = renderDrawerButton(confirmBtn, {\n        theme: 'primary',\n        onClick: (e: React.MouseEvent<HTMLButtonElement>) => onConfirmClick?.(e),\n        className: `${prefixCls}__confirm`,\n      });\n\n      const footerStyle = {\n        display: 'flex',\n        justifyContent: placement === 'right' ? 'flex-start' : 'flex-end',\n      };\n\n      return (\n        <div style={footerStyle}>\n          {placement === 'right' ? (\n            <>\n              {renderConfirmBtn} {renderCancelBtn}\n            </>\n          ) : (\n            <>\n              {renderCancelBtn} {renderConfirmBtn}\n            </>\n          )}\n        </div>\n      );\n    };\n\n    return <div className={`${prefixCls}__footer`}>{parseTNode(footer, null, defaultFooter())}</div>;\n  };\n\n  const renderOverlay = showOverlay && (\n    <CSSTransition in={visible} timeout={200} classNames={`${prefixCls}-fade`} nodeRef={maskRef}>\n      <div ref={maskRef} className={`${prefixCls}__mask`} onClick={onMaskClick} />\n    </CSSTransition>\n  );\n  const renderCloseBtn = closeBtn && (\n    <div onClick={onClickCloseBtn} className={`${prefixCls}__close-btn`}>\n      {closeIcon}\n    </div>\n  );\n  const renderHeader = header && <div className={`${prefixCls}__header`}>{header}</div>;\n  const renderBody = <div className={`${prefixCls}__body`}>{body || children}</div>;\n\n  return (\n    <CSSTransition\n      in={visible}\n      nodeRef={drawerWrapperRef}\n      mountOnEnter={isUndefined(forceRender) ? lazy : !forceRender}\n      unmountOnExit={destroyOnClose}\n      timeout={{ appear: 10, enter: 10, exit: 300 }}\n      onEnter={() => onBeforeOpen?.()}\n      onEntered={() => setAnimationStart(true)}\n      onExit={() => onBeforeClose?.()}\n      onExited={() => setAnimationStart(false)}\n    >\n      <Portal attach={drawerAttach} ref={drawerWrapperRef}>\n        <div\n          ref={containerRef}\n          className={classnames(prefixCls, className, `${prefixCls}--${placement}`, {\n            [`${prefixCls}--open`]: visible,\n            [`${prefixCls}--attach`]: showInAttachedElement,\n            [`${prefixCls}--without-mask`]: !showOverlay,\n          })}\n          style={{ zIndex, ...style }}\n          tabIndex={-1} // https://stackoverflow.com/questions/43503964/onkeydown-event-not-working-on-divs-in-react\n          onKeyDown={onKeyDownEsc}\n        >\n          {renderOverlay}\n          <div\n            className={classnames(`${prefixCls}__content-wrapper`, `${prefixCls}__content-wrapper--${placement}`)}\n            style={contentWrapperStyle}\n          >\n            {renderCloseBtn}\n            {renderHeader}\n            {renderBody}\n            {!!footer && renderFooter()}\n            {sizeDraggable && <div style={draggableLineStyles} onMouseDown={enableDrag}></div>}\n          </div>\n        </div>\n      </Portal>\n    </CSSTransition>\n  );\n});\n\nDrawer.displayName = 'Drawer';\n\nexport default Drawer;\n"],"names":["CloseTriggerType","CLICK_OVERLAY","CLICK_CLOSE_BTN","CLICK_CANCEL_BTN","KEYDOWN_ESC","Drawer","forwardRef","originalProps","ref","_useLocaleReceiver","useLocaleReceiver","_useLocaleReceiver2","_slicedToArray","local","t","_useGlobalIcon","useGlobalIcon","CloseIcon","TdCloseIcon","confirmText","confirm","cancelText","cancel","props","useDefaultProps","drawerDefaultProps","_useSetState","useSetState","_objectSpread","isPlugin","_useSetState2","state","setState","className","style","visible","attach","showOverlay","propsSize","size","placement","onBeforeOpen","onBeforeClose","onCancel","onConfirm","onClose","onCloseBtnClick","onOverlayClick","onEscKeydown","onSizeDragEnd","showInAttachedElement","closeOnOverlayClick","closeOnEscKeydown","children","header","body","footer","closeBtn","_state$cancelBtn","cancelBtn","_state$confirmBtn","confirmBtn","zIndex","destroyOnClose","sizeDraggable","forceRender","lazy","_useConfig","useConfig","classPrefix","drawerAttach","useAttach","maskRef","useRef","containerRef","drawerWrapperRef","prefixCls","closeIcon","isValidElement","_useDrag","useDrag","dragSizeValue","enableDrag","draggableLineStyles","_useState","useState","_useState2","animationStart","setAnimationStart","sizeValue","useMemo","sizeMap","small","medium","large","useLockStyle","drawerWrapper","current","useImperativeHandle","show","hide","destroy","update","options","prevState","useEffect","_containerRef$current","_containerRef$current2","focus","call","onMaskClick","e","trigger","onClickCloseBtn","onKeyDownEsc","key","onCancelClick","onConfirmClick","contentWrapperStyle","transform","width","includes","height","renderDrawerButton","btn","defaultProps","result","isString","React","createElement","Button","isObject","isFunction","renderFooter","defaultFooter","renderCancelBtn","theme","onClick","renderConfirmBtn","footerStyle","display","justifyContent","Fragment","parseTNode","renderOverlay","CSSTransition","timeout","classNames","nodeRef","renderCloseBtn","renderHeader","renderBody","mountOnEnter","isUndefined","unmountOnExit","appear","enter","exit","onEnter","onEntered","onExit","onExited","Portal","classnames","concat","_defineProperty","tabIndex","onKeyDown","onMouseDown","displayName"],"mappings":"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"}