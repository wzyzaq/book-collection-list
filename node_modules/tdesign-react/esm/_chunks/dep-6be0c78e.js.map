{"version":3,"file":"dep-6be0c78e.js","sources":["../../../common/js/utils/setStyle.ts","../../../common/js/loading/circle-adapter.ts","../../../components/loading/gradient.tsx"],"sourcesContent":["import { Styles } from '../common';\n\n/**\n * 用于为节点增加styles\n * @param el HTMLElement\n * @param style Styles\n */\nfunction setStyle(el: HTMLElement, styles: Styles): void {\n  const keys = Object.keys(styles);\n  keys.forEach((key) => {\n    // @ts-ignore\n    // eslint-disable-next-line no-param-reassign\n    el.style[key] = styles[key];\n  });\n  // TODO: 这个怎么样\n  // Object.assign(el.style, styles);\n}\n\nexport default setStyle;\n","import setStyle from '../utils/setStyle';\nimport { getIEVersion } from '../utils/helper';\n\nexport default function circleAdapter(circleElem: HTMLElement) {\n  let basicStyle = {};\n\n  if (!circleElem || typeof window === 'undefined') {\n    return;\n  }\n\n  const { color, fontSize } = window?.getComputedStyle?.(circleElem);\n\n  // to fix the browser compat of foreignObject in Safari,\n  // https://bugs.webkit.org/show_bug.cgi?id=23113\n  const ua = window?.navigator?.userAgent;\n  const isSafari = /Safari/.test(ua) && !/Chrome/.test(ua);\n  // 判断是否为 iOS 下的微信和企业微信\n  const isIosWechat = /(?=.*iPhone)[?=.*MicroMessenger]/.test(ua) && !/Chrome/.test(ua);\n\n  // 注意：chrome上调试mobile/ipad端时，loading出现异常，属于正常现象，不需要修改。\n  if (isSafari || isIosWechat) {\n    basicStyle = {\n      transformOrigin: '0px 0px',\n      transform: `scale(${parseInt(fontSize, 10) / 12})`,\n    };\n  }\n  // 添加：判断是否为IE浏览器\n  if (color && getIEVersion() > 11) {\n    const matched = color.match(/[\\d.]+/g);\n    const endColor = matched ? `rgba(${matched[0]}, ${matched[1]}, ${matched[2]}, 0)` : '';\n    setStyle(circleElem, {\n      ...basicStyle,\n      background: `conic-gradient(from 90deg at 50% 50%,${endColor} 0deg, ${color} 360deg)`,\n    });\n  } else {\n    setStyle(circleElem, {\n      ...basicStyle,\n      background: '',\n    });\n  }\n}\n","import React, { useEffect, FC } from 'react';\nimport classnames from 'classnames';\nimport circleAdapter from '@tdesign/common-js/loading/circle-adapter';\nimport useDomRefCallback from '../hooks/useDomRefCallback';\nimport useConfig from '../hooks/useConfig';\n\n/**\n * Loading组件 渐变部分实现\n */\nconst GradientLoading: FC = () => {\n  const { classPrefix } = useConfig();\n  const [conicRef, setConicRef] = useDomRefCallback();\n  const gradientClass = `${classPrefix}-loading__gradient`;\n\n  useEffect(() => {\n    const el = conicRef;\n    circleAdapter(el);\n  }, [conicRef]);\n\n  return (\n    <svg\n      className={classnames(gradientClass, `${classPrefix}-icon-loading`)}\n      viewBox=\"0 0 12 12\"\n      version=\"1.1\"\n      width=\"1em\"\n      height=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <foreignObject x=\"0\" y=\"0\" width=\"12\" height=\"12\">\n        <div className={`${gradientClass}-conic`} ref={setConicRef} />\n      </foreignObject>\n    </svg>\n  );\n};\n\nexport default GradientLoading;\n"],"names":["setStyle","el","styles","keys","Object","forEach","key","style","circleAdapter","circleElem","_window","_window$getComputedSt2","_window2","basicStyle","window","_window$getComputedSt","getComputedStyle","call","color","fontSize","ua","navigator","userAgent","isSafari","test","isIosWechat","transformOrigin","transform","concat","parseInt","getIEVersion","matched","match","endColor","_objectSpread","background","GradientLoading","_useConfig","useConfig","classPrefix","_useDomRefCallback","useDomRefCallback","_useDomRefCallback2","_slicedToArray","conicRef","setConicRef","gradientClass","useEffect","React","createElement","className","classnames","viewBox","version","width","height","xmlns","x","y","ref"],"mappings":"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"}