{"version":3,"file":"StepItem.js","sources":["../../../components/steps/StepItem.tsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport classNames from 'classnames';\nimport { CloseIcon as TdCloseIcon, CheckIcon as TdCheckIcon } from 'tdesign-icons-react';\nimport useConfig from '../hooks/useConfig';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport { TdStepItemProps } from './type';\nimport { StyledProps } from '../common';\nimport StepsContext from './StepsContext';\nimport { stepItemDefaultProps } from './defaultProps';\nimport useDefaultProps from '../hooks/useDefaultProps';\n\nexport interface StepItemProps extends TdStepItemProps, StyledProps {\n  index?: number;\n  children?: React.ReactNode;\n}\n\nconst StepItem: React.FC<StepItemProps> = (originalProps) => {\n  const props = useDefaultProps<StepItemProps>(originalProps, stepItemDefaultProps);\n  const { index, icon, title, content, value, children, style, status } = props;\n\n  const { current, theme, onChange, readonly } = useContext(StepsContext);\n  const { classPrefix, steps: globalStepsConfig } = useConfig();\n  const { CloseIcon, CheckIcon } = useGlobalIcon({ CloseIcon: TdCloseIcon, CheckIcon: TdCheckIcon });\n\n  const canClick = status !== 'process' && !readonly;\n\n  // 步骤条每一步展示的图标\n  const iconNode = React.useMemo<React.ReactNode>(() => {\n    if (!icon) {\n      return null;\n    }\n    const iconCls = `${classPrefix}-steps-item__icon--number`;\n    if (icon && icon !== true) {\n      return <span className={iconCls}>{icon}</span>;\n    }\n    if (theme !== 'default') {\n      return null;\n    }\n    if (status === 'error') {\n      return <span className={iconCls}>{(globalStepsConfig.errorIcon || <CloseIcon />) as React.ReactNode}</span>;\n    }\n    if (status === 'finish') {\n      return <span className={iconCls}>{(globalStepsConfig.checkIcon || <CheckIcon />) as React.ReactNode}</span>;\n    }\n    return <span className={iconCls}>{Number(index) + 1}</span>;\n  }, [icon, classPrefix, theme, status, globalStepsConfig, index, CloseIcon, CheckIcon]);\n\n  function onStepClick(e: React.MouseEvent<HTMLDivElement>) {\n    if (!canClick) {\n      return;\n    }\n    const currentValue = value ?? index;\n    onChange(currentValue, current, { e });\n  }\n\n  return (\n    <div\n      style={style}\n      className={classNames({\n        [`${classPrefix}-steps-item`]: true,\n        [`${classPrefix}-steps-item--wait`]: status === 'default',\n        [`${classPrefix}-steps-item--error`]: status === 'error',\n        [`${classPrefix}-steps-item--finish`]: status === 'finish',\n        [`${classPrefix}-steps-item--process`]: status === 'process',\n        [props.className]: !!props.className,\n      })}\n    >\n      <div\n        className={classNames(`${classPrefix}-steps-item__inner`, {\n          [`${classPrefix}-steps-item--clickable`]: canClick,\n        })}\n        onClick={onStepClick}\n      >\n        <div\n          className={classNames(`${classPrefix}-steps-item__icon`, {\n            [`${classPrefix}-steps-item-${status}`]: status,\n          })}\n        >\n          {iconNode}\n        </div>\n        <div className={`${classPrefix}-steps-item__content`}>\n          <div className={`${classPrefix}-steps-item__title`}>{title}</div>\n          <div className={`${classPrefix}-steps-item__description`}>{content}</div>\n          {children ? <div className={`${classPrefix}-steps-item__extra`}>{children}</div> : null}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nStepItem.displayName = 'StepItem';\n\nexport default StepItem;\n"],"names":["StepItem","originalProps","props","useDefaultProps","stepItemDefaultProps","index","icon","title","content","value","children","style","status","_useContext","useContext","StepsContext","current","theme","onChange","readonly","_useConfig","useConfig","classPrefix","globalStepsConfig","steps","_useGlobalIcon","useGlobalIcon","CloseIcon","TdCloseIcon","CheckIcon","TdCheckIcon","canClick","iconNode","React","useMemo","iconCls","createElement","className","errorIcon","checkIcon","Number","onStepClick","e","currentValue","classNames","_defineProperty","concat","onClick","displayName"],"mappings":"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"}