{"version":3,"file":"CalendarCellComp.js","sources":["../../../components/calendar/CalendarCellComp.tsx"],"sourcesContent":["import React, { MouseEvent } from 'react';\nimport { CalendarCell, TdCalendarProps } from './type';\nimport useConfig from '../hooks/useConfig';\nimport usePrefixClass from './hooks/usePrefixClass';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport { blockName } from './_util';\n\ntype extendType = Required<Pick<TdCalendarProps, 'fillWithZero' | 'mode' | 'theme' | 'cell' | 'cellAppend'>>;\ninterface CalendarCellProps extends extendType {\n  cellData: CalendarCell;\n  isCurrent: boolean;\n  isNow: boolean;\n  isDisabled?: boolean;\n  createCalendarCell: (cellData: CalendarCell) => CalendarCell;\n  onCellClick: (e: MouseEvent<HTMLDivElement>) => void;\n  onCellDoubleClick: (e: MouseEvent<HTMLDivElement>) => void;\n  onCellRightClick: (e: MouseEvent<HTMLDivElement>) => void;\n}\n\nconst CalendarCellComp: React.FC<CalendarCellProps> = (props) => {\n  const {\n    mode,\n    cell,\n    cellAppend,\n    theme,\n    isDisabled = false,\n    cellData,\n    isCurrent,\n    isNow,\n    fillWithZero,\n    createCalendarCell,\n    onCellClick,\n    onCellDoubleClick,\n    onCellRightClick,\n  } = props;\n\n  const [local, t] = useLocaleReceiver('calendar');\n  const monthLabelList = t(local.cellMonth).split(',');\n  /**\n   * 将 month 映射为文字输出\n   * @param month 月份下标值（起始值为0）\n   */\n  const getMonthCN = (month: number): string => monthLabelList[month];\n\n  const { calendar: calendarConfig } = useConfig();\n  const fix0 = (num: number) => {\n    const fillZero = num < 10 && (fillWithZero ?? calendarConfig.fillWithZero ?? true);\n    return fillZero ? `0${num}` : num;\n  };\n\n  const prefixCls = usePrefixClass();\n\n  return (\n    <td\n      className={prefixCls(\n        [blockName, 'table-body-cell'],\n        isDisabled ? 'is-disabled' : null,\n        isCurrent ? 'is-checked' : null,\n        isNow ? [blockName, 'table-body-cell--now'] : null,\n      )}\n      onClick={onCellClick}\n      onDoubleClick={onCellDoubleClick}\n      onContextMenu={onCellRightClick}\n    >\n      {(() => {\n        if (cell && typeof cell === 'function') return cell(mode === 'month' ? createCalendarCell(cellData) : cellData);\n        if (cell && typeof cell !== 'function') return cell;\n        let cellCtx: React.ReactNode;\n        if (mode === 'year') {\n          // year mode：输出月\n          const mIndex = cellData.date.getMonth();\n          cellCtx = theme === 'full' ? getMonthCN(mIndex) : t(local.monthSelection, { month: `${mIndex + 1}` });\n        } else {\n          // month mode：输出天\n          cellCtx = fix0(cellData.date.getDate());\n        }\n        return <div className={prefixCls([blockName, 'table-body-cell-display'])}>{cellCtx}</div>;\n      })()}\n      {(() => {\n        let cellCtx: React.ReactNode;\n        if (cellAppend && typeof cellAppend === 'function') {\n          cellCtx = cellAppend(mode === 'month' ? createCalendarCell(cellData) : cellData);\n        }\n        if (cellAppend && typeof cellAppend !== 'function') {\n          cellCtx = cellAppend;\n        }\n        return cellAppend && <div className={prefixCls([blockName, 'table-body-cell-content'])}>{cellCtx}</div>;\n      })()}\n    </td>\n  );\n};\n\nexport default CalendarCellComp;\n"],"names":["CalendarCellComp","props","mode","cell","cellAppend","theme","_props$isDisabled","isDisabled","cellData","isCurrent","isNow","fillWithZero","createCalendarCell","onCellClick","onCellDoubleClick","onCellRightClick","_useLocaleReceiver","useLocaleReceiver","_useLocaleReceiver2","_slicedToArray","local","t","monthLabelList","cellMonth","split","getMonthCN","month","_useConfig","useConfig","calendarConfig","calendar","fix0","num","_ref","fillZero","concat","prefixCls","usePrefixClass","React","createElement","className","blockName","onClick","onDoubleClick","onContextMenu","cellCtx","mIndex","date","getMonth","monthSelection","getDate"],"mappings":"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"}