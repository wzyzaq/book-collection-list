{"version":3,"file":"InputAdornment.js","sources":["../../../components/input-adornment/InputAdornment.tsx"],"sourcesContent":["import React, { forwardRef } from 'react';\nimport classNames from 'classnames';\nimport { isString, isNumber } from 'lodash-es';\nimport useConfig from '../hooks/useConfig';\nimport { TdInputAdornmentProps } from './type';\nimport { StyledProps } from '../common';\n\nexport interface InputAdornmentProps extends TdInputAdornmentProps, StyledProps {\n  children?: React.ReactNode;\n}\n\nconst InputAdornment = forwardRef<HTMLDivElement, InputAdornmentProps>((props, ref) => {\n  const { classPrefix } = useConfig();\n  const { prepend, append, children, className, style, ...wrapperProps } = props;\n\n  const renderAddon = (type: string, classPrefix: string, Content) => {\n    if (typeof Content === 'undefined') return null;\n\n    let addonNode: React.ReactNode;\n    const isContentNode = isString(Content) || isNumber(Content);\n\n    if (typeof Content === 'function') {\n      addonNode = <Content />;\n    } else {\n      addonNode = isContentNode ? <span className={`${classPrefix}-input-adornment__text`}>{Content}</span> : Content;\n    }\n\n    return addonNode ? <span className={`${classPrefix}-input-adornment__${type}`}>{addonNode}</span> : addonNode;\n  };\n\n  const renderChildren = () =>\n    React.Children.map(children, (child) => {\n      if (!child) return null;\n      if (React.isValidElement(child)) {\n        const childProps = (child as React.ReactElement<any>).props;\n        return React.cloneElement(child, {\n          ...wrapperProps,\n          ...childProps,\n          onChange: (...args) => {\n            // @ts-ignore\n            wrapperProps?.onChange?.call?.(null, ...args);\n            childProps?.onChange?.call?.(null, ...args);\n          },\n        });\n      }\n      return child;\n    });\n\n  return (\n    <div ref={ref} style={style} className={classNames(`${classPrefix}-input-adornment`, className)}>\n      {renderAddon('prepend', classPrefix, prepend)}\n      {renderChildren()}\n      {renderAddon('append', classPrefix, append)}\n    </div>\n  );\n});\n\nInputAdornment.displayName = 'InputAdornment';\n\nexport default InputAdornment;\n"],"names":["InputAdornment","forwardRef","props","ref","_useConfig","useConfig","classPrefix","prepend","append","children","className","style","wrapperProps","_excluded","renderAddon","type","Content","addonNode","isContentNode","isString","isNumber","React","createElement","concat","renderChildren","Children","map","child","isValidElement","childProps","cloneElement","_objectSpread","onChange","_wrapperProps$onChang","_wrapperProps$onChang2","_childProps$onChange","_childProps$onChange$","_len","arguments","length","args","Array","_key","call","apply","classNames","displayName"],"mappings":"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"}