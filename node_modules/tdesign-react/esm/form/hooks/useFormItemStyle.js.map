{"version":3,"file":"useFormItemStyle.js","sources":["../../../../components/form/hooks/useFormItemStyle.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../../hooks/useConfig';\nimport parseTNode from '../../_util/parseTNode';\nimport { ValidateStatus } from '../const';\n\nexport default function useFormItemStyle(props) {\n  const { classPrefix } = useConfig();\n\n  const {\n    className,\n    help,\n    tips,\n    snakeName,\n    status,\n    successBorder,\n    errorList,\n    successList,\n    layout,\n    verifyStatus,\n    label,\n    labelWidth,\n    labelAlign,\n    requiredMark,\n    showErrorMessage,\n    innerRules,\n  } = props;\n\n  // 传入 status 时受控\n  const renderStatus = status || verifyStatus;\n\n  // help 文本\n  const helpNode = help && <div className={`${classPrefix}-input__help`}>{parseTNode(help)}</div>;\n\n  // 判断是否有星号\n  const needRequiredMark = requiredMark || (requiredMark ?? innerRules.filter((rule: any) => rule.required).length > 0);\n\n  // 提示文本\n  const extraNode = useMemo(() => {\n    let extra = tips ? (\n      <div className={`${classPrefix}-input__extra`} title={tips}>\n        {tips}\n      </div>\n    ) : null;\n\n    if (showErrorMessage && errorList?.[0]?.message) {\n      extra = (\n        <div className={`${classPrefix}-input__extra`} title={errorList[0].message}>\n          {errorList[0].message}\n        </div>\n      );\n    } else if (successList.length) {\n      extra = (\n        <div className={`${classPrefix}-input__extra`} title={successList[0].message}>\n          {successList[0].message}\n        </div>\n      );\n    }\n\n    return extra;\n  }, [showErrorMessage, errorList, successList, tips, classPrefix]);\n\n  // snake 在dom上显示的名字改成下划线拼接\n  const formSnakeName = snakeName.split(',').join('_');\n\n  const formItemClass = classNames(`${classPrefix}-form__item`, className, {\n    [`${classPrefix}-form-item__${formSnakeName}`]: formSnakeName,\n    [`${classPrefix}-form__item-with-help`]: helpNode,\n    [`${classPrefix}-form__item-with-extra`]: extraNode,\n  });\n\n  const formItemLabelClass = classNames(`${classPrefix}-form__label`, {\n    [`${classPrefix}-form__label--required`]: needRequiredMark,\n    [`${classPrefix}-form__label--top`]: labelAlign === 'top' || !labelWidth,\n    [`${classPrefix}-form__label--left`]: labelAlign === 'left' && labelWidth,\n    [`${classPrefix}-form__label--right`]: labelAlign === 'right' && labelWidth,\n  });\n\n  const contentClass = () => {\n    const controlCls = `${classPrefix}-form__controls`;\n    if (!showErrorMessage) return controlCls;\n\n    const isSuccess = renderStatus === ValidateStatus.SUCCESS;\n    if (isSuccess) {\n      return classNames(controlCls, `${classPrefix}-is-success`, {\n        [`${classPrefix}-form--success-border`]: successBorder,\n      });\n    }\n\n    return classNames(controlCls, {\n      [`${classPrefix}-is-warning`]: renderStatus === 'warning',\n      [`${classPrefix}-is-error`]: ['fail', 'error'].includes(renderStatus),\n      [`${classPrefix}-form--has-error`]:\n        renderStatus === ValidateStatus.ERROR || renderStatus === ValidateStatus.WARNING,\n    });\n  };\n\n  let labelStyle = {};\n  let contentStyle = {};\n  if (label && labelWidth && labelAlign !== 'top') {\n    if (typeof labelWidth === 'number') {\n      labelStyle = { width: `${labelWidth}px` };\n      contentStyle = { marginLeft: layout !== 'inline' ? `${labelWidth}px` : '' };\n    } else {\n      labelStyle = { width: labelWidth };\n      contentStyle = { marginLeft: layout !== 'inline' ? labelWidth : '' };\n    }\n  }\n\n  return {\n    formItemClass,\n    formItemLabelClass,\n    contentClass,\n    labelStyle,\n    contentStyle,\n    helpNode,\n    extraNode,\n  };\n}\n"],"names":["useFormItemStyle","props","_useConfig","useConfig","classPrefix","className","help","tips","snakeName","status","successBorder","errorList","successList","layout","verifyStatus","label","labelWidth","labelAlign","requiredMark","showErrorMessage","innerRules","renderStatus","helpNode","React","createElement","parseTNode","needRequiredMark","filter","rule","required","length","extraNode","useMemo","_errorList$","extra","title","message","formSnakeName","split","join","formItemClass","classNames","concat","_defineProperty","formItemLabelClass","contentClass","controlCls","isSuccess","ValidateStatus","SUCCESS","includes","ERROR","WARNING","labelStyle","contentStyle","width","marginLeft"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAMA,SAAwBA,iBAAiBC,KAAO,EAAA;AACxC,EAAA,IAAAC,UAAA,GAAkBC,SAAU,EAAA;IAA1BC,WAAY,GAAAF,UAAA,CAAZE,WAAY,CAAA;AAEd,EAAA,IACJC,SAAA,GAgBEJ,KAAA,CAhBFI,SAAA;IACAC,IAAA,GAeEL,KAAA,CAfFK,IAAA;IACAC,IAAA,GAcEN,KAAA,CAdFM,IAAA;IACAC,SAAA,GAaEP,KAAA,CAbFO,SAAA;IACAC,MAAA,GAYER,KAAA,CAZFQ,MAAA;IACAC,aAAA,GAWET,KAAA,CAXFS,aAAA;IACAC,SAAA,GAUEV,KAAA,CAVFU,SAAA;IACAC,WAAA,GASEX,KAAA,CATFW,WAAA;IACAC,MAAA,GAQEZ,KAAA,CARFY,MAAA;IACAC,YAAA,GAOEb,KAAA,CAPFa,YAAA;IACAC,KAAA,GAMEd,KAAA,CANFc,KAAA;IACAC,UAAA,GAKEf,KAAA,CALFe,UAAA;IACAC,UAAA,GAIEhB,KAAA,CAJFgB,UAAA;IACAC,YAAA,GAGEjB,KAAA,CAHFiB,YAAA;IACAC,gBAAA,GAEElB,KAAA,CAFFkB,gBAAA;IACAC,UAAA,GACEnB,KAAA,CADFmB,UAAA,CAAA;AAIF,EAAA,IAAMC,eAAeZ,MAAU,IAAAK,YAAA,CAAA;EAGzB,IAAAQ,QAAA,GAAWhB,uBAASiB,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;IAAInB,qBAAcD,WAAA,EAAA,cAAA,CAAA;AAA4B,GAAA,EAAAqB,UAAA,CAAWnB,IAAI,CAAE,CAAA,CAAA;AAGnF,EAAA,IAAAoB,gBAAA,GAAmBR,YAAiB,KAAAA,YAAA,KAAAA,IAAAA,IAAAA,YAAA,KAAAA,KAAAA,CAAAA,GAAAA,YAAA,GAAgBE,UAAW,CAAAO,MAAA,CAAO,UAACC,IAAc,EAAA;IAAA,OAAAA,IAAA,CAAKC,QAAQ,CAAA;AAAA,GAAA,CAAA,CAAEC,MAAS,GAAA,CAAA,CAAA,CAAA;AAG7G,EAAA,IAAAC,SAAA,GAAYC,QAAQ,YAAM;AAAA,IAAA,IAAAC,WAAA,CAAA;IAC1B,IAAAC,KAAA,GAAQ3B,sBACTgB,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAInB,MAAAA,qBAAcD,WAAA,EAAA,eAAA,CAAA;AAA4B+B,MAAAA,KAAO,EAAA5B,IAAAA;AAAA,KAAA,EACnDA,IACH,CACE,GAAA,IAAA,CAAA;AAEA,IAAA,IAAAY,gBAAA,IAAoBR,SAAY,aAAZA,SAAY,KAAA,KAAA,CAAA,IAAA,CAAAsB,WAAA,GAAZtB,SAAY,CAAA,CAAA,CAAA,MAAAsB,IAAAA,IAAAA,WAAA,eAAZA,WAAA,CAAgBG,OAAS,EAAA;AAC/CF,MAAAA,KAAA,kBACGX,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAInB,QAAAA,qBAAcD,WAAA,EAAA,eAAA,CAAA;AAA4B+B,QAAAA,KAAA,EAAOxB,UAAU,CAAG,CAAA,CAAAyB,OAAAA;AAChE,OAAA,EAAAzB,SAAA,CAAU,GAAGyB,OAChB,CAAA,CAAA;AAEJ,KAAA,MAAA,IAAWxB,YAAYkB,MAAQ,EAAA;AAC7BI,MAAAA,KAAA,kBACGX,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAInB,QAAAA,qBAAcD,WAAA,EAAA,eAAA,CAAA;AAA4B+B,QAAAA,KAAA,EAAOvB,YAAY,CAAG,CAAA,CAAAwB,OAAAA;AAClE,OAAA,EAAAxB,WAAA,CAAY,GAAGwB,OAClB,CAAA,CAAA;AAEJ,KAAA;AAEO,IAAA,OAAAF,KAAA,CAAA;AACT,KAAG,CAACf,gBAAA,EAAkBR,WAAWC,WAAa,EAAAL,IAAA,EAAMH,WAAW,CAAC,CAAA,CAAA;AAGhE,EAAA,IAAMiC,gBAAgB7B,SAAU,CAAA8B,KAAA,CAAM,GAAG,CAAA,CAAEC,KAAK,GAAG,CAAA,CAAA;AAEnD,EAAA,IAAMC,aAAgB,GAAAC,UAAA,CAAAC,EAAAA,CAAAA,MAAA,CAActC,WAAA,EAAA,aAAA,CAAA,EAA0BC,SAAW,EAAAsC,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAA,EAAA,EAAA,EAAA,CAAAD,MAAA,CACnEtC,WAAA,EAAAsC,cAAAA,CAAAA,CAAAA,MAAA,CAA0BL,aAAkB,CAAA,EAAAA,aAAA,CAAA,EAAA,EAAA,CAAAK,MAAA,CAC5CtC,WAAqC,EAAAkB,uBAAAA,CAAAA,EAAAA,QAAA,MAAAoB,MAAA,CACrCtC,WAAsC,EAAA2B,wBAAAA,CAAAA,EAAAA,SAAA,CAC3C,CAAA,CAAA;EAEK,IAAAa,kBAAA,GAAqBH,UAAW,CAAAC,EAAAA,CAAAA,MAAA,CAAGtC,WAA2B,EAAA,cAAA,CAAA,EAAAuC,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAD,EAAAA,EAAAA,EAAAA,CAAAA,MAAA,CAC9DtC,WAAsC,6BAAAsB,gBAAA,CAAA,EAAA,EAAA,CAAAgB,MAAA,CACtCtC,WAAiC,EAAA,mBAAA,CAAA,EAAAa,UAAA,KAAe,SAAS,CAACD,UAAA,CAAA,EAAA,EAAA,CAAA0B,MAAA,CAC1DtC,WAAkC,EAAAa,oBAAAA,CAAAA,EAAAA,UAAA,KAAe,MAAU,IAAAD,UAAA,CAAA,EAAA,EAAA,CAAA0B,MAAA,CAC3DtC,WAAmC,EAAA,qBAAA,CAAA,EAAAa,UAAA,KAAe,OAAW,IAAAD,UAAA,CAClE,CAAA,CAAA;AAED,EAAA,IAAM6B,eAAe,SAAfA,eAAqB;AACzB,IAAA,IAAMC,uBAAgB1C,WAAA,EAAA,iBAAA,CAAA,CAAA;AACtB,IAAA,IAAI,CAACe,gBAAA,EAAyB,OAAA2B,UAAA,CAAA;AAExB,IAAA,IAAAC,SAAA,GAAY1B,iBAAiB2B,cAAe,CAAAC,OAAA,CAAA;AAClD,IAAA,IAAIF,SAAW,EAAA;AACN,MAAA,OAAAN,UAAA,CAAWK,UAAY,EAAAJ,EAAAA,CAAAA,MAAA,CAAGtC,WAA0B,EAAA,aAAA,CAAA,EAAAuC,eAAA,CAAA,EAAA,EAAA,EAAA,CAAAD,MAAA,CACrDtC,WAAqC,EAAAM,uBAAAA,CAAAA,EAAAA,aAAA,CAC1C,CAAA,CAAA;AACH,KAAA;IAEA,OAAO+B,WAAWK,UAAY,EAAAH,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAD,EAAAA,EAAAA,EAAAA,CAAAA,MAAA,CACxBtC,WAAA,EAAA,aAAA,CAAA,EAA2BiB,YAAiB,KAAA,SAAA,MAAAqB,MAAA,CAC5CtC,WAAyB,EAAA,WAAA,CAAA,EAAA,CAAC,QAAQ,OAAO,CAAA,CAAE8C,SAAS7B,YAAY,CAAA,CAAA,EAAA,EAAA,CAAAqB,MAAA,CAChEtC,WAAA,EAAA,kBAAA,CAAA,EACFiB,iBAAiB2B,cAAe,CAAAG,KAAA,IAAS9B,iBAAiB2B,cAAe,CAAAI,OAAA,CAC5E,CAAA,CAAA;GACH,CAAA;EAEA,IAAIC,aAAa,EAAC,CAAA;EAClB,IAAIC,eAAe,EAAC,CAAA;AAChB,EAAA,IAAAvC,KAAA,IAASC,UAAc,IAAAC,UAAA,KAAe,KAAO,EAAA;AAC3C,IAAA,IAAA,OAAOD,eAAe,QAAU,EAAA;AACrBqC,MAAAA,UAAA,GAAA;QAAEE,KAAO,EAAA,EAAA,CAAAb,MAAA,CAAG1B,UAAe,EAAA,IAAA,CAAA;OAAA,CAAA;AACxCsC,MAAAA,YAAA,GAAe;QAAEE,UAAY,EAAA3C,MAAA,KAAW,QAAW,MAAA6B,MAAA,CAAG1B,YAAiB,IAAA,CAAA,GAAA,EAAA;OAAG,CAAA;AAC5E,KAAO,MAAA;AACQqC,MAAAA,UAAA,GAAA;AAAEE,QAAAA,OAAOvC,UAAAA;OAAW,CAAA;AACjCsC,MAAAA,YAAA,GAAe;AAAEE,QAAAA,UAAA,EAAY3C,MAAW,KAAA,QAAA,GAAWG,aAAa,EAAA;OAAG,CAAA;AACrE,KAAA;AACF,GAAA;EAEO,OAAA;AACLwB,IAAAA,aAAA,EAAAA,aAAA;AACAI,IAAAA,kBAAA,EAAAA,kBAAA;AACAC,IAAAA,YAAA,EAAAA,YAAA;AACAQ,IAAAA,UAAA,EAAAA,UAAA;AACAC,IAAAA,YAAA,EAAAA,YAAA;AACAhC,IAAAA,QAAA,EAAAA,QAAA;AACAS,IAAAA,SAAA,EAAAA,SAAAA;GACF,CAAA;AACF;;;;"}