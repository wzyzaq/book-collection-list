{"version":3,"file":"Header.js","sources":["../../../../components/date-picker/base/Header.tsx"],"sourcesContent":["import React, { useState, useMemo, useEffect, useCallback, useRef } from 'react';\nimport { useLocaleReceiver } from '../../locale/LocalReceiver';\nimport useConfig from '../../hooks/useConfig';\nimport Select from '../../select';\nimport { TdDatePickerProps } from '../type';\nimport { PaginationMini, TdPaginationMiniProps } from '../../pagination';\n\nexport interface DatePickerHeaderProps extends Pick<TdDatePickerProps, 'mode'> {\n  year?: number;\n  month?: number;\n  onMonthChange?: Function;\n  onYearChange?: Function;\n  onJumperClick?: TdPaginationMiniProps['onChange'];\n}\n\nconst useDatePickerLocalConfig = () => {\n  const [local, t] = useLocaleReceiver('datePicker');\n\n  return {\n    months: t(local.months),\n    nextYear: t(local.nextYear),\n    preYear: t(local.preYear),\n    nextMonth: t(local.nextMonth),\n    preMonth: t(local.preMonth),\n    preDecade: t(local.preDecade),\n    nextDecade: t(local.nextDecade),\n    now: t(local.now),\n  };\n};\n\nconst DatePickerHeader = (props: DatePickerHeaderProps) => {\n  const { classPrefix } = useConfig();\n\n  const { mode, year, month, onMonthChange, onYearChange, onJumperClick } = props;\n\n  const { now, months, preMonth, preYear, nextMonth, nextYear, preDecade, nextDecade } = useDatePickerLocalConfig();\n\n  const scrollAnchorRef = useRef('default');\n\n  const monthOptions = months.map((item: string, index: number) => ({ label: item, value: index }));\n\n  const initOptions = useCallback(\n    (year: number) => {\n      const options = [];\n      if (mode === 'year') {\n        const extraYear = year % 10;\n        const minYear = year - extraYear - 100;\n        const maxYear = year - extraYear + 100;\n\n        for (let i = minYear; i <= maxYear; i += 10) {\n          options.push({ label: `${i} - ${i + 9}`, value: i + 9 });\n        }\n      } else {\n        options.push({ label: `${year}`, value: year });\n\n        for (let i = 1; i <= 10; i++) {\n          options.push({ label: `${year + i}`, value: year + i });\n          options.unshift({ label: `${year - i}`, value: year - i });\n        }\n      }\n\n      return options;\n    },\n    [mode],\n  );\n  const [yearOptions, setYearOptions] = useState(() => initOptions(year));\n\n  // 年份选择展示区间\n  const nearestYear: number = useMemo(\n    () => yearOptions.find((option) => option.value - year <= 9 && option.value - year >= 0)?.value || year,\n    [yearOptions, year],\n  );\n\n  useEffect(() => {\n    const yearRange = initOptions(year);\n    setYearOptions(yearRange);\n  }, [initOptions, year]);\n\n  function loadMoreYear(year: number, type?: 'add' | 'reduce') {\n    const options = [];\n    if (mode === 'year') {\n      const extraYear = year % 10;\n      if (type === 'add') {\n        for (let i = year - extraYear + 10; i <= year - extraYear + 50; i += 10) {\n          options.push({ label: `${i} - ${i + 9}`, value: i });\n        }\n      } else {\n        for (let i = year - extraYear - 1; i > year - extraYear - 50; i -= 10) {\n          options.unshift({ label: `${i - 9} - ${i}`, value: i });\n        }\n      }\n    } else if (type === 'add') {\n      for (let i = year + 1; i <= year + 10; i++) {\n        options.push({ label: `${i}`, value: i });\n      }\n    } else {\n      for (let i = year - 1; i > year - 10; i--) {\n        options.unshift({ label: `${i}`, value: i });\n      }\n    }\n\n    return options;\n  }\n\n  // hover title\n  const labelMap = {\n    year: {\n      prev: preDecade,\n      current: now,\n      next: nextDecade,\n    },\n    month: {\n      prev: preYear,\n      current: now,\n      next: nextYear,\n    },\n    date: {\n      prev: preMonth,\n      current: now,\n      next: nextMonth,\n    },\n  };\n\n  const headerClassName = `${classPrefix}-date-picker__header`;\n  const showMonthPicker = mode === 'date' || mode === 'week';\n\n  function handlePanelTopClick(e?: React.MouseEvent) {\n    e?.stopPropagation?.();\n    e?.nativeEvent?.stopImmediatePropagation?.();\n\n    const firstYear = yearOptions[0].value;\n    const options = loadMoreYear(firstYear, 'reduce');\n    setYearOptions([...options, ...yearOptions]);\n  }\n\n  function handlePanelBottomClick(e?: React.MouseEvent) {\n    e?.stopPropagation?.();\n    e?.nativeEvent?.stopImmediatePropagation();\n\n    const lastYear = yearOptions.slice(-1)[0].value;\n    const options = loadMoreYear(lastYear, 'add');\n    setYearOptions([...yearOptions, ...options]);\n  }\n\n  // 滚动顶部底部自动加载\n  function handleScroll({ e }) {\n    if (e.target.scrollTop === 0) {\n      handlePanelTopClick();\n      scrollAnchorRef.current = 'top';\n    } else if (e.target.scrollTop === e.target.scrollHeight - e.target.clientHeight) {\n      handlePanelBottomClick();\n      scrollAnchorRef.current = 'bottom';\n    }\n  }\n\n  function handleUpdateScrollTop(content: HTMLElement) {\n    if (scrollAnchorRef.current === 'top') {\n      // eslint-disable-next-line no-param-reassign\n      content.scrollTop = 30 * 10;\n    } else if (scrollAnchorRef.current === 'bottom') {\n      // eslint-disable-next-line no-param-reassign\n      content.scrollTop = content.scrollHeight - 30 * 10;\n    } else {\n      const firstSelectedNode: HTMLDivElement = content.querySelector(`.${classPrefix}-is-selected`);\n\n      if (firstSelectedNode) {\n        const { paddingBottom } = getComputedStyle(firstSelectedNode);\n        const { marginBottom } = getComputedStyle(content);\n        const elementBottomHeight = parseInt(paddingBottom, 10) + parseInt(marginBottom, 10);\n        // 小于0时不需要特殊处理，会被设为0\n        const updateValue =\n          firstSelectedNode.offsetTop -\n          content.offsetTop -\n          (content.clientHeight - firstSelectedNode.clientHeight) +\n          elementBottomHeight;\n        // eslint-disable-next-line no-param-reassign\n        content.scrollTop = updateValue;\n      }\n    }\n  }\n\n  return (\n    <div className={headerClassName}>\n      <div className={`${headerClassName}-controller`}>\n        {showMonthPicker && (\n          <Select\n            className={`${headerClassName}-controller-month`}\n            value={month}\n            options={monthOptions}\n            onChange={(val) => onMonthChange(val)}\n            popupProps={{\n              attach: (triggerElement: HTMLElement) => triggerElement.parentNode as HTMLElement,\n              overlayClassName: `${headerClassName}-controller-month-popup`,\n            }}\n          />\n        )}\n        <Select\n          className={`${headerClassName}-controller-year`}\n          value={mode === 'year' ? nearestYear : year}\n          options={yearOptions}\n          onChange={(val) => onYearChange(val)}\n          onPopupVisibleChange={(visible) => {\n            if (!visible) scrollAnchorRef.current = 'default';\n          }}\n          popupProps={{\n            onScroll: handleScroll,\n            updateScrollTop: handleUpdateScrollTop,\n            attach: (triggerElement: HTMLElement) => triggerElement.parentNode as HTMLElement,\n            overlayClassName: `${headerClassName}-controller-year-popup`,\n          }}\n          panelTopContent={\n            <div className={`${classPrefix}-select-option`} onClick={handlePanelTopClick}>\n              ...\n            </div>\n          }\n          panelBottomContent={\n            <div className={`${classPrefix}-select-option`} onClick={handlePanelBottomClick}>\n              ...\n            </div>\n          }\n        />\n      </div>\n\n      <PaginationMini tips={labelMap[mode]} size=\"small\" onChange={onJumperClick} />\n    </div>\n  );\n};\n\nDatePickerHeader.displayName = 'DatePickerHeader';\n\nexport default React.memo(DatePickerHeader);\n"],"names":["useDatePickerLocalConfig","_useLocaleReceiver","useLocaleReceiver","_useLocaleReceiver2","_slicedToArray","local","t","months","nextYear","preYear","nextMonth","preMonth","preDecade","nextDecade","now","DatePickerHeader","props","_useConfig","useConfig","classPrefix","mode","year","month","onMonthChange","onYearChange","onJumperClick","_useDatePickerLocalCo","scrollAnchorRef","useRef","monthOptions","map","item","index","label","value","initOptions","useCallback","options","extraYear","minYear","maxYear","i","push","concat","unshift","_useState","useState","_useState2","yearOptions","setYearOptions","nearestYear","useMemo","_yearOptions$find","find","option","useEffect","yearRange","loadMoreYear","type","labelMap","prev","current","next","date","headerClassName","showMonthPicker","handlePanelTopClick","e","_e$stopPropagation","_e$nativeEvent","_e$nativeEvent$stopIm","stopPropagation","call","nativeEvent","stopImmediatePropagation","firstYear","_toConsumableArray","handlePanelBottomClick","_e$stopPropagation2","_e$nativeEvent2","lastYear","slice","handleScroll","_ref","target","scrollTop","scrollHeight","clientHeight","handleUpdateScrollTop","content","firstSelectedNode","querySelector","_getComputedStyle","getComputedStyle","paddingBottom","_getComputedStyle2","marginBottom","elementBottomHeight","parseInt","updateValue","offsetTop","React","createElement","className","Select","onChange","val","popupProps","attach","triggerElement","parentNode","overlayClassName","onPopupVisibleChange","visible","onScroll","updateScrollTop","panelTopContent","onClick","panelBottomContent","PaginationMini","tips","size","displayName","memo"],"mappings":"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"}