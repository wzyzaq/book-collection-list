{"version":3,"file":"useDialogEsc.js","sources":["../../../components/hooks/useDialogEsc.ts"],"sourcesContent":["import { useEffect, MutableRefObject } from 'react';\n\nconst dialogSet: Set<MutableRefObject<HTMLDivElement>> = new Set();\n\nconst useDialogEsc = (visible: boolean, dialog: MutableRefObject<HTMLDivElement>) => {\n  useEffect(() => {\n    if (visible) {\n      // 将 dialog 添加至 Set 对象\n      if (dialog?.current) {\n        dialogSet.add(dialog);\n        dialog?.current?.focus();\n      }\n    } else if (dialogSet.has(dialog)) {\n      // 将 dialog 从 Set 对象删除\n      dialogSet.delete(dialog);\n      const dialogList = [...dialogSet];\n      // 将 Set 对象中最后一个 dialog 设置为 focus\n      dialogList[dialogList.length - 1]?.current?.focus();\n    }\n    return () => {\n      // 从 Set 对象删除无效的 dialog\n      dialogSet.forEach((item) => {\n        if (item.current === null) {\n          dialogSet.delete(item);\n        }\n      });\n    };\n  }, [visible, dialog]);\n};\n\nexport default useDialogEsc;\n"],"names":["dialogSet","Set","useDialogEsc","visible","dialog","useEffect","current","_dialog$current","add","focus","has","_dialogList","dialogList","_toConsumableArray","length","forEach","item"],"mappings":";;;;;;;;;;AAEA,IAAMA,SAAA,sBAAuDC,GAAI,EAAA,CAAA;AAE3DC,IAAAA,YAAA,GAAe,SAAfA,YAAAA,CAAgBC,OAAA,EAAkBC,MAA6C,EAAA;AACnFC,EAAAA,SAAA,CAAU,YAAM;AACd,IAAA,IAAIF,OAAS,EAAA;AAEX,MAAA,IAAIC,WAAAA,IAAAA,IAAAA,qBAAAA,OAAQE,OAAS,EAAA;AAAA,QAAA,IAAAC,eAAA,CAAA;AACnBP,QAAAA,SAAA,CAAUQ,IAAIJ,MAAM,CAAA,CAAA;AACpBA,QAAAA,MAAA,KAAAA,IAAAA,IAAAA,MAAA,KAAAG,KAAAA,CAAAA,IAAAA,CAAAA,eAAA,GAAAH,MAAA,CAAQE,yCAARC,KAAAA,CAAAA,IAAAA,eAAA,CAAiBE,KAAM,EAAA,CAAA;AACzB,OAAA;KACS,MAAA,IAAAT,SAAA,CAAUU,GAAI,CAAAN,MAAM,CAAG,EAAA;AAAA,MAAA,IAAAO,WAAA,CAAA;MAEhCX,SAAA,CAAA,QAAA,EAAiBI,MAAM,CAAA,CAAA;AACjB,MAAA,IAAAQ,UAAA,GAAAC,kBAAA,CAAiBb,SAAS,CAAA,CAAA;MAEhC,CAAAW,WAAA,GAAAC,UAAA,CAAWA,UAAW,CAAAE,MAAA,GAAS,CAAI,CAAA,MAAAH,IAAAA,IAAAA,WAAA,gBAAAA,WAAA,GAAnCA,WAAA,CAAmCL,OAAA,MAAA,IAAA,IAAAK,WAAA,KAAA,KAAA,CAAA,IAAnCA,WAAA,CAA4CF,KAAM,EAAA,CAAA;AACpD,KAAA;AACA,IAAA,OAAO,YAAM;AAEDT,MAAAA,SAAA,CAAAe,OAAA,CAAQ,UAACC,IAAS,EAAA;AACtB,QAAA,IAAAA,IAAA,CAAKV,YAAY,IAAM,EAAA;UACzBN,SAAA,CAAA,QAAA,EAAiBgB,IAAI,CAAA,CAAA;AACvB,SAAA;AACF,OAAC,CAAA,CAAA;KACH,CAAA;AACF,GAAG,EAAA,CAACb,OAAS,EAAAC,MAAM,CAAC,CAAA,CAAA;AACtB;;;;"}