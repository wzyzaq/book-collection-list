{"version":3,"file":"dom.js","sources":["../../../components/_util/dom.ts"],"sourcesContent":["import raf from 'raf';\nimport { isString } from 'lodash-es';\nimport { easeInOutCubic, EasingFunction } from './easing';\nimport { ScrollContainer, ScrollContainerElement } from '../common';\n\n// 用于判断是否可使用 dom\nexport const canUseDocument = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\nconst trim = (str: string): string => (str || '').replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, '');\n\nexport const on = ((): any => {\n  if (canUseDocument && document.addEventListener) {\n    return (element: Node, event: string, handler: EventListenerOrEventListenerObject): any => {\n      if (element && event && handler) {\n        element.addEventListener(event, handler, false);\n      }\n    };\n  }\n  return (element: Node, event: string, handler: EventListenerOrEventListenerObject): any => {\n    if (element && event && handler) {\n      (element as any).attachEvent(`on${event}`, handler);\n    }\n  };\n})();\n\nexport const off = ((): any => {\n  if (canUseDocument && document.removeEventListener) {\n    return (element: Node, event: string, handler: EventListenerOrEventListenerObject): any => {\n      if (element && event) {\n        element.removeEventListener(event, handler, false);\n      }\n    };\n  }\n  return (element: Node, event: string, handler: EventListenerOrEventListenerObject): any => {\n    if (element && event) {\n      (element as any).detachEvent(`on${event}`, handler);\n    }\n  };\n})();\n\nexport function hasClass(el: Element, cls: string) {\n  if (!el || !cls) return false;\n  if (cls.indexOf(' ') !== -1) throw new Error('className should not contain space.');\n  if (el.classList) {\n    return el.classList.contains(cls);\n  }\n  return ` ${el.className} `.indexOf(` ${cls} `) > -1;\n}\n\nexport const addClass = function (el: Element, cls: string) {\n  if (!el) return;\n  let curClass = el.className;\n  const classes = (cls || '').split(' ');\n\n  for (let i = 0, j = classes.length; i < j; i++) {\n    const clsName = classes[i];\n    if (!clsName) continue;\n\n    if (el.classList) {\n      el.classList.add(clsName);\n    } else if (!hasClass(el, clsName)) {\n      curClass += ` ${clsName}`;\n    }\n  }\n  if (!el.classList) {\n    // eslint-disable-next-line\n    el.className = curClass;\n  }\n};\n\nexport const removeClass = function (el: Element, cls: string) {\n  if (!el || !cls) return;\n  const classes = cls.split(' ');\n  let curClass = ` ${el.className} `;\n\n  for (let i = 0, j = classes.length; i < j; i++) {\n    const clsName = classes[i];\n    if (!clsName) continue;\n\n    if (el.classList) {\n      el.classList.remove(clsName);\n    } else if (hasClass(el, clsName)) {\n      curClass = curClass.replace(` ${clsName} `, ' ');\n    }\n  }\n  if (!el.classList) {\n    // eslint-disable-next-line\n    el.className = trim(curClass);\n  }\n};\n\n/**\n * 获取滚动容器\n * 因为 document 不存在 scroll 等属性, 因此排除 document\n * window | HTMLElement\n * @param {ScrollContainerElement} [container='body']\n * @returns {ScrollContainer}\n */\nexport const getScrollContainer = (container: ScrollContainer = 'body'): ScrollContainerElement => {\n  if (isString(container)) {\n    return container ? (document.querySelector(container) as HTMLElement) : window;\n  }\n  if (typeof container === 'function') {\n    return container();\n  }\n  return container || window;\n};\n\n/**\n * 返回是否 window 对象\n *\n * @export\n * @param {any} obj\n * @returns\n */\nfunction isWindow(obj: any) {\n  return obj && obj === obj.window;\n}\n\ntype ScrollTarget = HTMLElement | Window | Document;\n\n/**\n * 获取滚动距离\n *\n * @export\n * @param {ScrollTarget} target\n * @param {boolean} isLeft true 为获取 scrollLeft, false 为获取 scrollTop\n * @returns {number}\n */\nexport function getScroll(target: ScrollTarget, isLeft?: boolean): number {\n  // node 环境或者 target 为空\n  if (typeof window === 'undefined' || !target) {\n    return 0;\n  }\n  const method = isLeft ? 'scrollLeft' : 'scrollTop';\n  let result = 0;\n  if (isWindow(target)) {\n    result = (target as Window)[isLeft ? 'pageXOffset' : 'pageYOffset'];\n  } else if (target instanceof Document) {\n    result = target.documentElement[method];\n  } else if (target) {\n    result = (target as HTMLElement)[method];\n  }\n  return result;\n}\ninterface ScrollTopOptions {\n  container?: ScrollTarget;\n  duration?: number;\n  easing?: EasingFunction;\n}\n\nexport function scrollTo(target: number, opt: ScrollTopOptions) {\n  const { container = window, duration = 450, easing = easeInOutCubic } = opt;\n  const scrollTop = getScroll(container);\n  const startTime = Date.now();\n  return new Promise((res) => {\n    const fnc = () => {\n      const timestamp = Date.now();\n      const time = timestamp - startTime;\n      const nextScrollTop = easing(Math.min(time, duration), scrollTop, target, duration);\n      if (isWindow(container)) {\n        (container as Window).scrollTo(window.pageXOffset, nextScrollTop);\n      } else if (container instanceof HTMLDocument || container.constructor.name === 'HTMLDocument') {\n        (container as HTMLDocument).documentElement.scrollTop = nextScrollTop;\n      } else {\n        (container as HTMLElement).scrollTop = nextScrollTop;\n      }\n      if (time < duration) {\n        raf(fnc);\n      } else {\n        // 由于上面步骤设置了 scrollTop, 滚动事件可能未触发完毕\n        // 此时应该在下一帧再执行 res\n        raf(res);\n      }\n    };\n    raf(fnc);\n  });\n}\n\n// 用于判断节点内容是否溢出\nexport const isNodeOverflow = (ele: Element | Element[]): boolean => {\n  const { clientWidth = 0, scrollWidth = 0 } = ele as Element & { clientWidth: number; scrollWidth: number };\n\n  if (scrollWidth > clientWidth) {\n    return true;\n  }\n  return false;\n};\n\nexport const getAttach = (node: any): HTMLElement => {\n  const attachNode = typeof node === 'function' ? node() : node;\n  if (!attachNode) {\n    return document.body;\n  }\n  if (isString(attachNode)) {\n    return document.querySelector(attachNode);\n  }\n  if (attachNode instanceof HTMLElement) {\n    return attachNode;\n  }\n  return document.body;\n};\n\n// 获取 css vars\nexport const getCssVarsValue = (name: string, element?: HTMLElement) => {\n  if (!canUseDocument) return;\n\n  const el = element || document.documentElement;\n  return getComputedStyle(el).getPropertyValue(name);\n};\n\n/**\n * 检查元素是否在父元素视图\n * http://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport\n * @param elm 元素\n * @param parent\n * @returns boolean\n */\nexport function elementInViewport(elm: HTMLElement, parent?: HTMLElement): boolean {\n  const rect = elm.getBoundingClientRect();\n  if (parent) {\n    const parentRect = parent.getBoundingClientRect();\n    return (\n      rect.top >= parentRect.top &&\n      rect.left >= parentRect.left &&\n      rect.bottom <= parentRect.bottom &&\n      rect.right <= parentRect.right\n    );\n  }\n  return rect.top >= 0 && rect.left >= 0 && rect.bottom + 80 <= window.innerHeight && rect.right <= window.innerWidth;\n}\n\n/**\n * 获取元素某个 css 对应的值\n * @param element 元素\n * @param propName css 名\n * @returns string\n */\nexport function getElmCssPropValue(element: HTMLElement, propName: string): string {\n  let propValue = '';\n\n  if (document.defaultView && document.defaultView.getComputedStyle) {\n    propValue = document.defaultView.getComputedStyle(element, null).getPropertyValue(propName);\n  }\n\n  if (propValue && propValue.toLowerCase) {\n    return propValue.toLowerCase();\n  }\n\n  return propValue;\n}\n\n/**\n * 判断元素是否处在 position fixed 中\n * @param element 元素\n * @returns boolean\n */\nexport function isFixed(element: HTMLElement): boolean {\n  const p = element.parentNode as HTMLElement;\n\n  if (!p || p.nodeName === 'HTML') {\n    return false;\n  }\n\n  if (getElmCssPropValue(element, 'position') === 'fixed') {\n    return true;\n  }\n\n  return isFixed(p);\n}\n\n/**\n * 获取当前视图滑动的距离\n * @returns { scrollTop: number, scrollLeft: number }\n */\nexport function getWindowScroll(): { scrollTop: number; scrollLeft: number } {\n  const { body } = document;\n  const docElm = document.documentElement;\n  const scrollTop = window.pageYOffset || docElm.scrollTop || body.scrollTop;\n  const scrollLeft = window.pageXOffset || docElm.scrollLeft || body.scrollLeft;\n\n  return { scrollTop, scrollLeft };\n}\n\n/**\n * 获取当前视图的大小\n * @returns { width: number, height: number }\n */\nexport function getWindowSize(): { width: number; height: number } {\n  if (window.innerWidth !== undefined) {\n    return { width: window.innerWidth, height: window.innerHeight };\n  }\n  const doc = document.documentElement;\n  return { width: doc.clientWidth, height: doc.clientHeight };\n}\n"],"names":["canUseDocument","window","document","createElement","trim","str","replace","on","addEventListener","element","event","handler","attachEvent","concat","off","removeEventListener","detachEvent","hasClass","el","cls","indexOf","Error","classList","contains","className","addClass","curClass","classes","split","i","j","length","clsName","add","removeClass","remove","getScrollContainer","container","arguments","undefined","isString","querySelector","isWindow","obj","getScroll","target","isLeft","method","result","Document","documentElement","scrollTo","opt","_opt$container","_opt$duration","duration","_opt$easing","easing","easeInOutCubic","scrollTop","startTime","Date","now","Promise","res","fnc","timestamp","time","nextScrollTop","Math","min","pageXOffset","HTMLDocument","constructor","name","raf","isNodeOverflow","ele","_ele$clientWidth","clientWidth","_ele$scrollWidth","scrollWidth","getAttach","node","attachNode","body","HTMLElement","getCssVarsValue","getComputedStyle","getPropertyValue","elementInViewport","elm","parent","rect","getBoundingClientRect","parentRect","top","left","bottom","right","innerHeight","innerWidth","getElmCssPropValue","propName","propValue","defaultView","toLowerCase","isFixed","p","parentNode","nodeName","getWindowScroll","_document","docElm","pageYOffset","scrollLeft","getWindowSize","width","height","doc","clientHeight"],"mappings":";;;;;;;;;;IAMaA,cAAA,GAAiB,CAAC,EAAE,OAAOC,WAAW,WAAe,IAAAA,MAAA,CAAOC,QAAY,IAAAD,MAAA,CAAOC,QAAS,CAAAC,aAAA,EAAA;AAErG,IAAMC,OAAO,SAAPA,KAAQC,GAAA,EAAA;EAAA,OAAA,CAAyBA,OAAO,EAAI,EAAAC,OAAA,CAAQ,8BAA8B,EAAE,CAAA,CAAA;AAAA,CAAA,CAAA;AAEnF,IAAMC,KAAM,YAAW;AACxB,EAAA,IAAAP,cAAA,IAAkBE,SAASM,gBAAkB,EAAA;AACxC,IAAA,OAAA,UAACC,OAAe,EAAAC,KAAA,EAAeC,OAAqD,EAAA;AACrF,MAAA,IAAAF,OAAA,IAAWC,SAASC,OAAS,EAAA;QACvBF,OAAA,CAAAD,gBAAA,CAAiBE,KAAO,EAAAC,OAAA,EAAS,KAAK,CAAA,CAAA;AAChD,OAAA;KACF,CAAA;AACF,GAAA;AACO,EAAA,OAAA,UAACF,OAAe,EAAAC,KAAA,EAAeC,OAAqD,EAAA;AACrF,IAAA,IAAAF,OAAA,IAAWC,SAASC,OAAS,EAAA;MAC9BF,OAAgB,CAAAG,WAAA,CAAAC,IAAAA,CAAAA,MAAA,CAAiBH,KAAA,CAAA,EAASC,OAAO,CAAA,CAAA;AACpD,KAAA;GACF,CAAA;AACF,CAAG,GAAA;AAEI,IAAMG,MAAO,YAAW;AACzB,EAAA,IAAAd,cAAA,IAAkBE,SAASa,mBAAqB,EAAA;AAC3C,IAAA,OAAA,UAACN,OAAe,EAAAC,KAAA,EAAeC,OAAqD,EAAA;MACzF,IAAIF,WAAWC,KAAO,EAAA;QACZD,OAAA,CAAAM,mBAAA,CAAoBL,KAAO,EAAAC,OAAA,EAAS,KAAK,CAAA,CAAA;AACnD,OAAA;KACF,CAAA;AACF,GAAA;AACO,EAAA,OAAA,UAACF,OAAe,EAAAC,KAAA,EAAeC,OAAqD,EAAA;IACzF,IAAIF,WAAWC,KAAO,EAAA;MACnBD,OAAgB,CAAAO,WAAA,CAAAH,IAAAA,CAAAA,MAAA,CAAiBH,KAAA,CAAA,EAASC,OAAO,CAAA,CAAA;AACpD,KAAA;GACF,CAAA;AACF,CAAG,GAAA;AAEa,SAAAM,QAAAA,CAASC,IAAaC,GAAa,EAAA;AAC7C,EAAA,IAAA,CAACD,MAAM,CAACC,GAAA,EAAY,OAAA,KAAA,CAAA;AACpB,EAAA,IAAAA,GAAA,CAAIC,OAAQ,CAAA,GAAG,CAAM,KAAA,CAAA,CAAA,EAAU,MAAA,IAAIC,MAAM,qCAAqC,CAAA,CAAA;EAClF,IAAIH,GAAGI,SAAW,EAAA;AACT,IAAA,OAAAJ,EAAA,CAAGI,SAAU,CAAAC,QAAA,CAASJ,GAAG,CAAA,CAAA;AAClC,GAAA;AACA,EAAA,OAAO,IAAAN,MAAA,CAAIK,EAAG,CAAAM,SAAA,EAAaJ,GAAAA,CAAAA,CAAAA,OAAQ,CAAAP,GAAAA,CAAAA,MAAA,CAAIM,SAAM,CAAI,GAAA,CAAA,CAAA,CAAA;AACnD,CAAA;AAEa,IAAAM,QAAA,GAAW,SAAXA,QAAAA,CAAqBP,EAAA,EAAaC,GAAa,EAAA;EAC1D,IAAI,CAACD,EAAA,EAAI,OAAA;AACT,EAAA,IAAIQ,WAAWR,EAAG,CAAAM,SAAA,CAAA;EAClB,IAAMG,OAAW,GAAA,CAAAR,GAAA,IAAO,EAAI,EAAAS,KAAA,CAAM,GAAG,CAAA,CAAA;AAErC,EAAA,KAAA,IAASC,IAAI,CAAG,EAAAC,CAAA,GAAIH,QAAQI,MAAQ,EAAAF,CAAA,GAAIC,GAAGD,CAAK,EAAA,EAAA;AAC9C,IAAA,IAAMG,UAAUL,OAAQ,CAAAE,CAAA,CAAA,CAAA;IACxB,IAAI,CAACG,OAAA,EAAS,SAAA;IAEd,IAAId,GAAGI,SAAW,EAAA;AACbJ,MAAAA,EAAA,CAAAI,SAAA,CAAUW,IAAID,OAAO,CAAA,CAAA;KACf,MAAA,IAAA,CAACf,QAAS,CAAAC,EAAA,EAAIc,OAAO,CAAG,EAAA;AACjCN,MAAAA,QAAA,IAAAb,GAAAA,CAAAA,MAAA,CAAgBmB,OAAA,CAAA,CAAA;AAClB,KAAA;AACF,GAAA;AACI,EAAA,IAAA,CAACd,GAAGI,SAAW,EAAA;IAEjBJ,EAAA,CAAGM,SAAY,GAAAE,QAAA,CAAA;AACjB,GAAA;AACF,EAAA;AAEa,IAAAQ,WAAA,GAAc,SAAdA,WAAAA,CAAwBhB,EAAA,EAAaC,GAAa,EAAA;AACzD,EAAA,IAAA,CAACD,MAAM,CAACC,GAAA,EAAK,OAAA;AACX,EAAA,IAAAQ,OAAA,GAAUR,GAAI,CAAAS,KAAA,CAAM,GAAG,CAAA,CAAA;AACzB,EAAA,IAAAF,QAAA,GAAAb,GAAAA,CAAAA,MAAA,CAAeK,EAAG,CAAAM,SAAA,EAAA,GAAA,CAAA,CAAA;AAEtB,EAAA,KAAA,IAASK,IAAI,CAAG,EAAAC,CAAA,GAAIH,QAAQI,MAAQ,EAAAF,CAAA,GAAIC,GAAGD,CAAK,EAAA,EAAA;AAC9C,IAAA,IAAMG,UAAUL,OAAQ,CAAAE,CAAA,CAAA,CAAA;IACxB,IAAI,CAACG,OAAA,EAAS,SAAA;IAEd,IAAId,GAAGI,SAAW,EAAA;AACbJ,MAAAA,EAAA,CAAAI,SAAA,CAAUa,OAAOH,OAAO,CAAA,CAAA;KAClB,MAAA,IAAAf,QAAA,CAASC,EAAI,EAAAc,OAAO,CAAG,EAAA;MAChCN,QAAA,GAAWA,QAAS,CAAApB,OAAA,CAAA,GAAA,CAAAO,MAAA,CAAYmB,OAAA,EAAY,GAAA,CAAA,EAAA,GAAG,CAAA,CAAA;AACjD,KAAA;AACF,GAAA;AACI,EAAA,IAAA,CAACd,GAAGI,SAAW,EAAA;AAEdJ,IAAAA,EAAA,CAAAM,SAAA,GAAYpB,KAAKsB,QAAQ,CAAA,CAAA;AAC9B,GAAA;AACF,EAAA;IASaU,kBAAA,GAAqB,SAArBA,kBAAAA,GAAsF;AAAA,EAAA,IAAhEC,SAAA,GAAAC,SAAA,CAAAP,MAAA,GAAA,CAAA,IAAAO,SAAA,CAAA,CAAA,CAAA,KAAAC,SAAA,GAAAD,SAAA,CAAA,CAAA,CAAA,GAA6B,MAAmC,CAAA;AAC7F,EAAA,IAAAE,QAAA,CAASH,SAAS,CAAG,EAAA;IACvB,OAAOA,SAAa,GAAAnC,QAAA,CAASuC,aAAc,CAAAJ,SAAS,CAAoB,GAAApC,MAAA,CAAA;AAC1E,GAAA;AACI,EAAA,IAAA,OAAOoC,cAAc,UAAY,EAAA;IACnC,OAAOA,SAAU,EAAA,CAAA;AACnB,GAAA;EACA,OAAOA,SAAa,IAAApC,MAAA,CAAA;AACtB,EAAA;AASA,SAASyC,SAASC,GAAU,EAAA;AACnB,EAAA,OAAAA,GAAA,IAAOA,QAAQA,GAAI,CAAA1C,MAAA,CAAA;AAC5B,CAAA;AAYgB,SAAA2C,SAAAA,CAAUC,QAAsBC,MAA0B,EAAA;AAExE,EAAA,IAAI,OAAO7C,MAAA,KAAW,WAAe,IAAA,CAAC4C,MAAQ,EAAA;AACrC,IAAA,OAAA,CAAA,CAAA;AACT,GAAA;AACM,EAAA,IAAAE,MAAA,GAASD,SAAS,YAAe,GAAA,WAAA,CAAA;EACvC,IAAIE,MAAS,GAAA,CAAA,CAAA;AACT,EAAA,IAAAN,QAAA,CAASG,MAAM,CAAG,EAAA;IACVG,MAAA,GAAAH,MAAA,CAAkBC,SAAS,aAAgB,GAAA,aAAA,CAAA,CAAA;AACvD,GAAA,MAAA,IAAWD,kBAAkBI,QAAU,EAAA;AACrCD,IAAAA,MAAA,GAASH,OAAOK,eAAgB,CAAAH,MAAA,CAAA,CAAA;aACvBF,MAAQ,EAAA;AACjBG,IAAAA,MAAA,GAAUH,MAAuB,CAAAE,MAAA,CAAA,CAAA;AACnC,GAAA;AACO,EAAA,OAAAC,MAAA,CAAA;AACT,CAAA;AAOgB,SAAAG,QAAAA,CAASN,QAAgBO,GAAuB,EAAA;AAC9D,EAAA,IAAAC,cAAA,GAAwED,GAAA,CAAhEf,SAAY;AAAZA,IAAAA,SAAY,GAAAgB,cAAA,KAAApD,KAAAA,CAAAA,GAAAA,MAAA,GAAAoD,cAAA;IAAAC,aAAA,GAAoDF,GAAA,CAA5CG;AAAAA,IAAAA,6BAAW,KAAA,CAAA,GAAA,GAAK,GAAAD,aAAA;IAAAE,WAAA,GAA4BJ,GAAA,CAA5BK,MAAA;AAAAA,IAAAA,MAAA,GAAAD,WAAA,KAASE,KAAAA,CAAAA,GAAAA;AAC/C,EAAA,IAAAC,SAAA,GAAYf,UAAUP,SAAS,CAAA,CAAA;AAC/B,EAAA,IAAAuB,SAAA,GAAYC,KAAKC,GAAI,EAAA,CAAA;AACpB,EAAA,OAAA,IAAIC,OAAQ,CAAA,UAACC,GAAQ,EAAA;AAC1B,IAAA,IAAMC,OAAM,SAANA,MAAY;AACV,MAAA,IAAAC,SAAA,GAAYL,KAAKC,GAAI,EAAA,CAAA;AAC3B,MAAA,IAAMK,OAAOD,SAAY,GAAAN,SAAA,CAAA;AACnB,MAAA,IAAAQ,aAAA,GAAgBX,OAAOY,IAAK,CAAAC,GAAA,CAAIH,MAAMZ,QAAQ,CAAA,EAAGI,SAAW,EAAAd,MAAA,EAAQU,QAAQ,CAAA,CAAA;AAC9E,MAAA,IAAAb,QAAA,CAASL,SAAS,CAAG,EAAA;QACtBA,SAAqB,CAAAc,QAAA,CAASlD,MAAO,CAAAsE,WAAA,EAAaH,aAAa,CAAA,CAAA;AAClE,iBAAW/B,SAAqB,YAAAmC,YAAA,IAAgBnC,SAAU,CAAAoC,WAAA,CAAYC,SAAS,cAAgB,EAAA;AAC5FrC,QAAAA,SAAA,CAA2Ba,gBAAgBS,SAAY,GAAAS,aAAA,CAAA;AAC1D,OAAO,MAAA;QACJ/B,UAA0BsB,SAAY,GAAAS,aAAA,CAAA;AACzC,OAAA;MACA,IAAID,OAAOZ,QAAU,EAAA;QACnBoB,GAAA,CAAIV,IAAG,CAAA,CAAA;AACT,OAAO,MAAA;QAGLU,GAAA,CAAIX,GAAG,CAAA,CAAA;AACT,OAAA;KACF,CAAA;IACAW,GAAA,CAAIV,IAAG,CAAA,CAAA;AACT,GAAC,CAAA,CAAA;AACH,CAAA;IAGaW,cAAA,GAAiB,SAAjBA,cAAAA,CAAkBC,GAAsC,EAAA;AACnE,EAAA,IAAAC,gBAAA,GAA6CD,GAAA,CAArCE,WAAA;AAAAA,IAAAA,WAAA,GAAAD,gBAAA,KAAc,KAAA,CAAA,GAAA,CAAG,GAAAA,gBAAA;IAAAE,gBAAA,GAAoBH,GAAA,CAApBI,WAAA;AAAAA,IAAAA,WAAA,GAAAD,gBAAA,KAAc,KAAA,CAAA,GAAA;EAEvC,IAAIC,cAAcF,WAAa,EAAA;AACtB,IAAA,OAAA,IAAA,CAAA;AACT,GAAA;AACO,EAAA,OAAA,KAAA,CAAA;AACT,EAAA;IAEaG,SAAA,GAAY,SAAZA,SAAAA,CAAaC,IAA2B,EAAA;EACnD,IAAMC,UAAa,GAAA,OAAOD,IAAS,KAAA,UAAA,GAAaA,MAAS,GAAAA,IAAA,CAAA;EACzD,IAAI,CAACC,UAAY,EAAA;IACf,OAAOlF,QAAS,CAAAmF,IAAA,CAAA;AAClB,GAAA;AACI,EAAA,IAAA7C,QAAA,CAAS4C,UAAU,CAAG,EAAA;AACjB,IAAA,OAAAlF,QAAA,CAASuC,cAAc2C,UAAU,CAAA,CAAA;AAC1C,GAAA;EACA,IAAIA,sBAAsBE,WAAa,EAAA;AAC9B,IAAA,OAAAF,UAAA,CAAA;AACT,GAAA;EACA,OAAOlF,QAAS,CAAAmF,IAAA,CAAA;AAClB,EAAA;AAGa,IAAAE,eAAA,GAAkB,SAAlBA,eAAAA,CAAmBb,IAAA,EAAcjE,OAA0B,EAAA;EACtE,IAAI,CAACT,cAAA,EAAgB,OAAA;AAEf,EAAA,IAAAkB,EAAA,GAAKT,WAAWP,QAAS,CAAAgD,eAAA,CAAA;EAC/B,OAAOsC,gBAAiB,CAAAtE,EAAE,CAAE,CAAAuE,gBAAA,CAAiBf,IAAI,CAAA,CAAA;AACnD,EAAA;AASgB,SAAAgB,iBAAAA,CAAkBC,KAAkBC,MAA+B,EAAA;AAC3E,EAAA,IAAAC,IAAA,GAAOF,IAAIG,qBAAsB,EAAA,CAAA;AACvC,EAAA,IAAIF,MAAQ,EAAA;AACJ,IAAA,IAAAG,UAAA,GAAaH,OAAOE,qBAAsB,EAAA,CAAA;AAChD,IAAA,OACED,IAAK,CAAAG,GAAA,IAAOD,UAAW,CAAAC,GAAA,IACvBH,KAAKI,IAAQ,IAAAF,UAAA,CAAWE,IACxB,IAAAJ,IAAA,CAAKK,MAAU,IAAAH,UAAA,CAAWG,MAC1B,IAAAL,IAAA,CAAKM,SAASJ,UAAW,CAAAI,KAAA,CAAA;AAE7B,GAAA;AACA,EAAA,OAAON,IAAK,CAAAG,GAAA,IAAO,CAAK,IAAAH,IAAA,CAAKI,IAAQ,IAAA,CAAA,IAAKJ,IAAK,CAAAK,MAAA,GAAS,EAAM,IAAAjG,MAAA,CAAOmG,WAAe,IAAAP,IAAA,CAAKM,SAASlG,MAAO,CAAAoG,UAAA,CAAA;AAC3G,CAAA;AAQgB,SAAAC,kBAAAA,CAAmB7F,SAAsB8F,QAA0B,EAAA;EACjF,IAAIC,SAAY,GAAA,EAAA,CAAA;EAEhB,IAAItG,QAAS,CAAAuG,WAAA,IAAevG,QAAS,CAAAuG,WAAA,CAAYjB,gBAAkB,EAAA;AACjEgB,IAAAA,SAAA,GAAYtG,SAASuG,WAAY,CAAAjB,gBAAA,CAAiB/E,SAAS,IAAI,CAAA,CAAEgF,iBAAiBc,QAAQ,CAAA,CAAA;AAC5F,GAAA;AAEI,EAAA,IAAAC,SAAA,IAAaA,UAAUE,WAAa,EAAA;AACtC,IAAA,OAAOF,UAAUE,WAAY,EAAA,CAAA;AAC/B,GAAA;AAEO,EAAA,OAAAF,SAAA,CAAA;AACT,CAAA;AAOO,SAASG,QAAQlG,OAA+B,EAAA;AACrD,EAAA,IAAMmG,IAAInG,OAAQ,CAAAoG,UAAA,CAAA;EAElB,IAAI,CAACD,CAAA,IAAKA,CAAE,CAAAE,QAAA,KAAa,MAAQ,EAAA;AACxB,IAAA,OAAA,KAAA,CAAA;AACT,GAAA;EAEA,IAAIR,kBAAmB,CAAA7F,OAAA,EAAS,UAAU,CAAA,KAAM,OAAS,EAAA;AAChD,IAAA,OAAA,IAAA,CAAA;AACT,GAAA;EAEA,OAAOkG,QAAQC,CAAC,CAAA,CAAA;AAClB,CAAA;AAMO,SAASG,eAA6DA,GAAA;EACrE,IAAAC,SAAA,GAAW9G,QAAA;IAATmF,iBAAAA;AACR,EAAA,IAAM4B,SAAS/G,QAAS,CAAAgD,eAAA,CAAA;AACxB,EAAA,IAAMS,SAAY,GAAA1D,MAAA,CAAOiH,WAAe,IAAAD,MAAA,CAAOtD,aAAa0B,IAAK,CAAA1B,SAAA,CAAA;AACjE,EAAA,IAAMwD,UAAa,GAAAlH,MAAA,CAAOsE,WAAe,IAAA0C,MAAA,CAAOE,cAAc9B,IAAK,CAAA8B,UAAA,CAAA;EAE5D,OAAA;AAAExD,IAAAA,WAAAA;AAAWwD,IAAAA,UAAW,EAAXA,UAAAA;GAAW,CAAA;AACjC,CAAA;AAMO,SAASC,aAAmDA,GAAA;AAC7D,EAAA,IAAAnH,MAAA,CAAOoG,eAAe,KAAW,CAAA,EAAA;IACnC,OAAO;MAAEgB,KAAO,EAAApH,MAAA,CAAOoG,UAAY;MAAAiB,MAAA,EAAQrH,OAAOmG,WAAAA;KAAY,CAAA;AAChE,GAAA;AACA,EAAA,IAAMmB,MAAMrH,QAAS,CAAAgD,eAAA,CAAA;EACrB,OAAO;IAAEmE,KAAO,EAAAE,GAAA,CAAIxC,WAAa;IAAAuC,MAAA,EAAQC,IAAIC,YAAAA;GAAa,CAAA;AAC5D;;;;"}