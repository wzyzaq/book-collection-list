{"version":3,"file":"Layout.js","sources":["../../../components/layout/Layout.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../hooks/useConfig';\nimport { StyledProps } from '../common';\nimport { TdLayoutProps, TdHeaderProps, TdFooterProps } from './type';\nimport Aside from './Aside';\nimport parseTNode from '../_util/parseTNode';\n\nexport interface LayoutProps extends TdLayoutProps, StyledProps, React.HTMLAttributes<HTMLDivElement> {\n  children?: React.ReactNode;\n}\nexport interface HeaderProps extends TdHeaderProps, StyledProps, React.HTMLAttributes<HTMLElement> {\n  children?: React.ReactNode;\n}\nexport interface ContentProps extends StyledProps, React.HTMLAttributes<HTMLElement> {\n  children?: React.ReactNode;\n}\nexport interface FooterProps extends TdFooterProps, StyledProps, React.HTMLAttributes<HTMLElement> {\n  children?: React.ReactNode;\n}\n\nconst Header: React.FC<HeaderProps> = (props) => {\n  const { classPrefix } = useConfig();\n  const { className, style = {}, children, height, ...others } = props;\n  const renderHeight = isNaN(Number(height)) ? height : `${height}px`;\n  const headerClassNames = classNames(`${classPrefix}-layout__header`, className);\n  return (\n    <header className={headerClassNames} style={{ height: renderHeight, ...style }} {...others}>\n      {parseTNode(children)}\n    </header>\n  );\n};\n\nconst Footer: React.FC<FooterProps> = (props) => {\n  const { classPrefix } = useConfig();\n  const { className, style = {}, children, height, ...others } = props;\n  const renderHeight = isNaN(Number(height)) ? height : `${height}px`;\n  const footerClassNames = classNames(`${classPrefix}-layout__footer`, className);\n  return (\n    <footer className={footerClassNames} style={{ height: renderHeight, ...style }} {...others}>\n      {parseTNode(children)}\n    </footer>\n  );\n};\n\nconst Content: React.FC<ContentProps> = (props) => {\n  const { classPrefix } = useConfig();\n  const { className, style, children, content, ...others } = props;\n  const contentClassNames = classNames(`${classPrefix}-layout__content`, className);\n  return (\n    <main className={contentClassNames} style={style} {...others}>\n      {parseTNode(content) || parseTNode(children)}\n    </main>\n  );\n};\n\n/**\n * 布局组件\n */\nconst Layout: React.FC<LayoutProps> & {\n  Header: typeof Header;\n  Content: typeof Content;\n  Footer: typeof Footer;\n  Aside: typeof Aside;\n} = (props) => {\n  const { direction, className, style, children, ...otherLayoutProps } = props;\n\n  const shouldAsides = useMemo(() => {\n    const asides: React.ReactElement[] = [];\n    React.Children.forEach(children, (child: React.ReactElement) => {\n      if (!child || typeof child !== 'object') {\n        return;\n      }\n      if (child.type === Aside) {\n        asides.push(child);\n      }\n    });\n    return !!asides.length;\n  }, [children]);\n\n  const { classPrefix } = useConfig();\n  const layoutClassNames = classNames(\n    `${classPrefix}-layout`,\n    {\n      [`${classPrefix}-layout--with-sider`]: shouldAsides,\n      [`${classPrefix}-layout__direction-${direction}`]: direction,\n    },\n    className,\n  );\n\n  return (\n    <div className={layoutClassNames} style={style} {...otherLayoutProps}>\n      {parseTNode(children)}\n    </div>\n  );\n};\n\nLayout.Header = Header;\nLayout.Content = Content;\nLayout.Footer = Footer;\nLayout.Aside = Aside;\n\nHeader.displayName = 'Header';\nContent.displayName = 'Content';\nFooter.displayName = 'Footer';\nLayout.displayName = 'Layout';\n\nexport default Layout;\n"],"names":["Header","props","_useConfig","useConfig","classPrefix","className","style","_props$style","children","height","others","_excluded","renderHeight","isNaN","Number","headerClassNames","classNames","concat","React","createElement","_objectSpread","parseTNode","Footer","_useConfig2","_props$style2","_excluded2","footerClassNames","Content","_useConfig3","content","_excluded3","contentClassNames","Layout","direction","otherLayoutProps","_excluded4","shouldAsides","useMemo","asides","Children","forEach","child","_typeof","type","Aside","push","length","_useConfig4","layoutClassNames","_defineProperty","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqBA,IAAMA,MAAA,GAAgC,SAAhCA,MAAAA,CAAiCC,KAAU,EAAA;AACzC,EAAA,IAAAC,UAAA,GAAkBC,SAAU,EAAA;IAA1BC,WAAY,GAAAF,UAAA,CAAZE,WAAY,CAAA;AACd,EAAA,IAAEC,YAAuDJ,KAAA,CAAvDI;mBAAuDJ,KAAA,CAA5CK,KAAQ;AAARA,IAAAA,KAAQ,GAAAC,YAAA,KAAA,KAAA,CAAA,GAAA;IAAIC,QAAU,GAAsBP,KAAA,CAAhCO,QAAU;IAAAC,MAAA,GAAsBR,KAAA,CAAtBQ,MAAA;AAAWC,IAAAA,kCAAWT,KAAA,EAAAU,SAAA,CAAA,CAAA;AAC/D,EAAA,IAAMC,eAAeC,KAAM,CAAAC,MAAA,CAAOL,MAAM,CAAC,CAAA,GAAIA,mBAAYA,MAAA,EAAA,IAAA,CAAA,CAAA;EACzD,IAAMM,gBAAmB,GAAAC,UAAA,CAAA,EAAA,CAAAC,MAAA,CAAcb,WAAA,EAA8BC,iBAAAA,CAAAA,EAAAA,SAAS,CAAA,CAAA;AAC9E,EAAA,sBACGa,KAAA,CAAAC,aAAA,CAAA,QAAA,EAAAC,aAAA,CAAA;AAAOf,IAAAA,SAAW,EAAAU,gBAAA;AAAkBT,IAAAA,KAAO,EAAAc,aAAA,CAAA;AAAEX,MAAAA,MAAQ,EAAAG,YAAAA;AAAA,KAAA,EAAiBN,KAAM,CAAA;AAAA,GAAA,EAAOI,MAAA,CACjFW,EAAAA,UAAA,CAAWb,QAAQ,CACtB,CAAA,CAAA;AAEJ,CAAA,CAAA;AAEA,IAAMc,MAAA,GAAgC,SAAhCA,MAAAA,CAAiCrB,KAAU,EAAA;AACzC,EAAA,IAAAsB,WAAA,GAAkBpB,SAAU,EAAA;IAA1BC,WAAY,GAAAmB,WAAA,CAAZnB,WAAY,CAAA;AACd,EAAA,IAAEC,YAAuDJ,KAAA,CAAvDI;oBAAuDJ,KAAA,CAA5CK,KAAQ;AAARA,IAAAA,KAAQ,GAAAkB,aAAA,KAAA,KAAA,CAAA,GAAA;IAAIhB,QAAU,GAAsBP,KAAA,CAAhCO,QAAU;IAAAC,MAAA,GAAsBR,KAAA,CAAtBQ,MAAA;AAAWC,IAAAA,kCAAWT,KAAA,EAAAwB,UAAA,CAAA,CAAA;AAC/D,EAAA,IAAMb,eAAeC,KAAM,CAAAC,MAAA,CAAOL,MAAM,CAAC,CAAA,GAAIA,mBAAYA,MAAA,EAAA,IAAA,CAAA,CAAA;EACzD,IAAMiB,gBAAmB,GAAAV,UAAA,CAAA,EAAA,CAAAC,MAAA,CAAcb,WAAA,EAA8BC,iBAAAA,CAAAA,EAAAA,SAAS,CAAA,CAAA;AAC9E,EAAA,sBACGa,KAAA,CAAAC,aAAA,CAAA,QAAA,EAAAC,aAAA,CAAA;AAAOf,IAAAA,SAAW,EAAAqB,gBAAA;AAAkBpB,IAAAA,KAAO,EAAAc,aAAA,CAAA;AAAEX,MAAAA,MAAQ,EAAAG,YAAAA;AAAA,KAAA,EAAiBN,KAAM,CAAA;AAAA,GAAA,EAAOI,MAAA,CACjFW,EAAAA,UAAA,CAAWb,QAAQ,CACtB,CAAA,CAAA;AAEJ,CAAA,CAAA;AAEA,IAAMmB,OAAA,GAAkC,SAAlCA,OAAAA,CAAmC1B,KAAU,EAAA;AAC3C,EAAA,IAAA2B,WAAA,GAAkBzB,SAAU,EAAA;IAA1BC,WAAY,GAAAwB,WAAA,CAAZxB,WAAY,CAAA;AACpB,EAAA,IAAQC,SAAW,GAAwCJ,KAAA,CAAnDI,SAAW;IAAAC,KAAA,GAAwCL,KAAA,CAAxCK,KAAA;IAAOE,QAAU,GAAuBP,KAAA,CAAjCO,QAAU;IAAAqB,OAAA,GAAuB5B,KAAA,CAAvB4B,OAAA;AAAYnB,IAAAA,kCAAWT,KAAA,EAAA6B,UAAA,CAAA,CAAA;EAC3D,IAAMC,iBAAoB,GAAAf,UAAA,CAAA,EAAA,CAAAC,MAAA,CAAcb,WAAA,EAA+BC,kBAAAA,CAAAA,EAAAA,SAAS,CAAA,CAAA;AAChF,EAAA,sBACGa,KAAA,CAAAC,aAAA,CAAA,MAAA,EAAAC,aAAA,CAAA;AAAKf,IAAAA,SAAW,EAAA0B,iBAAA;AAAmBzB,IAAAA,KAAA,EAAAA,KAAAA;GAAkBI,EAAAA,MAAA,CACnDW,EAAAA,UAAW,CAAAQ,OAAO,CAAK,IAAAR,UAAA,CAAWb,QAAQ,CAC7C,CAAA,CAAA;AAEJ,CAAA,CAAA;AAKA,IAAMwB,MAAA,GAKF,SALEA,MAAAA,CAKD/B,KAAU,EAAA;AACb,EAAA,IAAQgC,SAAW,GAAoDhC,KAAA,CAA/DgC,SAAW;IAAA5B,SAAA,GAAoDJ,KAAA,CAApDI,SAAA;IAAWC,KAAO,GAAkCL,KAAA,CAAzCK,KAAO;IAAAE,QAAA,GAAkCP,KAAA,CAAlCO,QAAA;AAAa0B,IAAAA,4CAAqBjC,KAAA,EAAAkC,UAAA,CAAA,CAAA;AAEjE,EAAA,IAAAC,YAAA,GAAeC,QAAQ,YAAM;IACjC,IAAMC,SAA+B,EAAC,CAAA;IACtCpB,KAAA,CAAMqB,QAAS,CAAAC,OAAA,CAAQhC,QAAU,EAAA,UAACiC,KAA8B,EAAA;MAC9D,IAAI,CAACA,KAAA,IAASC,OAAA,CAAOD,KAAA,CAAA,KAAU,QAAU,EAAA;AACvC,QAAA,OAAA;AACF,OAAA;AACI,MAAA,IAAAA,KAAA,CAAME,SAASC,KAAO,EAAA;AACxBN,QAAAA,MAAA,CAAOO,KAAKJ,KAAK,CAAA,CAAA;AACnB,OAAA;AACF,KAAC,CAAA,CAAA;AACM,IAAA,OAAA,CAAC,CAACH,MAAO,CAAAQ,MAAA,CAAA;AAClB,GAAA,EAAG,CAACtC,QAAQ,CAAC,CAAA,CAAA;AAEP,EAAA,IAAAuC,WAAA,GAAkB5C,SAAU,EAAA;IAA1BC,WAAY,GAAA2C,WAAA,CAAZ3C,WAAY,CAAA;AACpB,EAAA,IAAM4C,gBAAmB,GAAAhC,UAAA,CAAA,EAAA,CAAAC,MAAA,CACpBb,WAAA,EAAA,SAAA,CAAA,EAAA6C,eAAA,CAAAA,eAAA,CAAA,EAAA,EAAA,EAAA,CAAAhC,MAAA,CAEGb,WAAmC,EAAA,qBAAA,CAAA,EAAAgC,YAAA,CAAA,EAAA,EAAA,CAAAnB,MAAA,CACnCb,WAAA,EAAA,qBAAA,CAAA,CAAAa,MAAA,CAAiCgB,SAAc,CAAA,EAAAA,SAAA,CAAA,EAErD5B,SACF,CAAA,CAAA;AAEA,EAAA,sBACGa,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAAC,aAAA,CAAA;AAAIf,IAAAA,SAAW,EAAA2C,gBAAA;AAAkB1C,IAAAA,KAAA,EAAAA,KAAAA;AAAA,GAAA,EAAkB4B,gBAAA,CACjDb,EAAAA,UAAA,CAAWb,QAAQ,CACtB,CAAA,CAAA;AAEJ,EAAA;AAEAwB,MAAA,CAAOhC,MAAS,GAAAA,MAAA,CAAA;AAChBgC,MAAA,CAAOL,OAAU,GAAAA,OAAA,CAAA;AACjBK,MAAA,CAAOV,MAAS,GAAAA,MAAA,CAAA;AAChBU,MAAA,CAAOY,KAAQ,GAAAA,KAAA,CAAA;AAEf5C,MAAA,CAAOkD,WAAc,GAAA,QAAA,CAAA;AACrBvB,OAAA,CAAQuB,WAAc,GAAA,SAAA,CAAA;AACtB5B,MAAA,CAAO4B,WAAc,GAAA,QAAA,CAAA;AACrBlB,MAAA,CAAOkB,WAAc,GAAA,QAAA;;;;"}